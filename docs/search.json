[
  {
    "objectID": "tareas/tarea-2.html",
    "href": "tareas/tarea-2.html",
    "title": "Tarea 2",
    "section": "",
    "text": "Fecha de entrega: miércoles 2 de octubre a las 20:00\nLa tarea deberá entregarse en Teams. Deberá incluir dos documentos:\nUn primer documento de respuestas donde se incluyan las respuestas a las preguntas teóricas y conceptuales. Este documento debe estar en formato pdf y debe ser generado usando un software de procesamiento de textos científicos, por ejemplo, usando los leguajes LaTeX o Markdown. En este documento también se deben incluir las respuestas a preguntas sobre conclusiones que se desprenden de las secciones prácticas. Por ejemplo, si una pregunta pide obtener la media de la variable x en cierta base de datos, entonces el documento de respuestas debe incluir la pregunta y respuesta correspondiente: “la media de la variable x es 32.6”. En este documento también deberán incluirse las tablas y gráficas que se soliciten.\nUn segundo archivo deberá contener el código replicable usado para generar los resultados de la sección práctica. El código debe también crear las tablas y gráficas solicitadas. Los archivos de código se verificarán para comprobar su replicabilidad.\n\n\ncrepon_morocco_balance.csv\ncrepon_morocco_analysis.csv\nSTAR_public_use.csv\n\n\n\nEn esta pregunta usaremos un ejemplo de el estudio con asignación experimental de Banerjee et al. (2015)1 para fijar algunas ideas referentes al análisis de una intervención de este tipo. A diferencia de otros ejemplos vistos en clase, este es un experimento a gran escala. Por favor, utilice la versión publicada, así como el material suplementario.\n\n[5 puntos] Describa brevemente en qué consiste la intervención que se discute en el artículo.\n[5 puntos] Describa brevemente en qué consiste el diseño experimental, es decir, ¿cómo se construye la variación que permite identificar el efecto del tratamiento? ¿Cómo se construyen los grupos de tratamiento y control?\n[5 puntos] En la página 1260799-7 se presenta una subsección denominada Atrition. Describa brevemente el propósito de este análisis y qué se concluye al respecto.\n[5 puntos] En la página 1260799-7, la subsección Compliance with treatment assignment concluye que los efectos estimados en el artículo se refieren a un efecto de intención a tratar o intent-to-treat o ITT. ¿Por qué?\n[5 puntos] En la página 1260799-8 se discuten dos métodos para tomar en cuenta la prueba de hipótesis múltiples. Describa brevemente por qué puede ser problemático probar múltiples hipótesis y cuáles son las dos formas en que los autores enfrentan este problema.\n[5 puntos] En la página 1260799-12 se discute la posible presencia de efectos de derramamiento o Spillovers. Describa brevemente en qué consisten dichos efectos de derramamiento y cómo los autores muestran la presencia o ausencia de dichos efectos usando regresiones.\n\n\n\n\nEn Crepon et al. (2015)2 se estudia una intervención en Marruecos en la que se analiza el efecto de la adopción de microfinanzas, a través de un experimento de campo. En 81 de 162 localidades estudiadas se introdujo aleatoriamente una empresa de microfinanzas. Para seleccionar las localidades de tratamiento, primero se emparejaron localidades de acuerdo a características observables y, para cada pareja se asignó a tratamiento y otra a control. La variable que identifica a las parejas es paire. La base de datos crepon_morocco_balance.csv contiene los datos de este estudio usados para mostrar la integridad del diseño. La variable treatment es la variable de asignación aleatoria, mientras que la variable client es la variable de adopción\n\n[3 puntos] Primero recordaremos cómo mostrar que el tratamiento efectivamente fue asignado de manera aleatoria. El siguiente código lee los datos que debemos usar y se queda con las observaciones de la línea base. Con estos datos, mostraremos que la variable members_resid_bl, que indica el número de personas que viven en cada hogar está balanceado entre los grupos asignados a tratamiento y control. Noten que la media del número de personas que viven en el hogar en el grupo de control es 5.14 (d.e. 2.70) y que hay 2,266 hogares en dicho grupo de control. Esto es exactamente lo que se reporta en la fila correspondiente a Number members en la tabla 1 del artículo.\n\ndata.morocco&lt;-read_csv(\"../files/crepon_morocco_balance.csv\",\n                       locale = locale(encoding = \"latin1\")) %&gt;% \n  clean_names() %&gt;% \n  filter(merge_indicator!=1)\n\ndata.morocco %&gt;% \n  group_by(treatment) %&gt;%\n  summarize(mean=mean(members_resid_bl, na.rm=T),\n            std=sd(members_resid_bl, na.rm=T),\n            n=n()) %&gt;% \n  ungroup()\n\n# A tibble: 2 × 4\n  treatment  mean   std     n\n      &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt;\n1         0  5.14  2.69  2266\n2         1  5.19  2.76  2199\n\n\nObtenga ahora el valor de la diferencia entre el grupo de tratamiento y el de control, así como su valor \\(p\\) (últimas dos columnas). Para ello, estime una regresión en la que la variable dependiente sea número de personas que vive en el hogar members_resid_bl, en función de la variable de asignación treatment y variables dummy de pareja de localidad (la variable paire indica cuáles son las parejas). La regresión permite recuperar la diferencia de 0.04 personas que se reporta en la fila correspondiente en la tabla 1. Para recuperar el valor \\(p\\), estime errores agrupados usando la variable demi_paire, que es la clave de las distintas localidades, como variable de agrupación. Una forma de realizar esto es con la función coef_test del paquete clubSandwich.3\n[2 puntos] Ahora mostremos que efectivamente este es un ejemplo de una intervención con cumplimiento imperfecto. Genere un cuadro que indique: 1) cuántas personas que fueron asignadas a recibir el tratamiento efectivamente fueron clientes; 2) cuántas personas que fueron asignadas a recibir el tratamiento no se convirtieron en clientes; 3) cuántas personas que no fueron asignadas a recibir el tratamiento sí se convirtieron en clientes; y 4) cuántas personas que no fueron asignadas a recibir el tratamiento tampoco se convirtieron en clientes.\n[5 puntos] Ahora mostraremos que la adopción, es decir, convertirse en cliente, no es independiente de las características de los hogares. Considere las variables members_resid_bl y act_number_bl, que indican el número de miembros del hogar y el número de actividades económicas del hogar. Para cada una de estas dos variables, utilice la misma especificación que en la parte a., pero ahora usando la variable cliente como regresor. ¿Qué concluye?\n[5 puntos] Con estos elementos estamos convencidos de que es necesario emplear lo que sabemos sobre cumplimiento imperfecto. Usaremos ahora los datos en crepon_morocco_analysis.csv, que contiene los datos empleados para evaluar el impacto de la adopción. Estos datos están listos para analizarse. Estime la forma reducida del efecto de ser asignado al tratamiento sobre gasto total, expense_total. Comente los resultados, en particular, comente sobre la magnitud y la significancia estadística de la variable treatment. Aquí y en adelante, incluya los siguientes controles en la regresión: members_resid_bl, nadults_resid_bl, head_age_bl, act_livestock_bl, act_business_bl, borrowed_total_bl, members_resid_d_bl, nadults_resid_d_bl, head_age_d_bl, act_livestock_d_bl, act_business_d_bl, borrowed_total_d_bl, ccm_resp_activ, other_resp_activ, ccm_resp_activ_d y other_resp_activ_d. Además, incluya efectos fijos por pareja introduciendo la variable paire como factor. Use los mismos errores estándar que en la parte a. Con esto deberá poder recuperar el coeficiente y el error estándar de la columna (3) de la tabla 3.\n[5 puntos] Estime ahora la primera etapa, es decir, estime por MCO el efecto causal de la asignación sobre la adopción. Comente sobre la magnitud, la significancia estadística y la interpretación de la variable treatment en términos del comportamiento de los cumplidores. Debería poder replicar el coeficiente y el error estándar de la columna 1 en la tabla 2 del artículo.\n[5 puntos] Considere la columna 3 del panel A en la Tabla 9 del artículo. Aquí se reporta la estimación por MCO de la relación entre client y gasto total, con los mismos controles y tipo de errores que antes. Replique este resultado. ¿Se puede interpretar de forma causal el coeficiente sobre client?\n[5 puntos] ¿Cuáles son los dos supuestos econométricos que permiten la estimación del Local Average Treatment Effect (LATE) en el contexto de este problema? Comente sobre la evidencia que respalda el supuesto de que los instrumentos no son débiles en este problema.\n[5 puntos] Estime el efecto del cumplimiento sobre el gasto total, usando la asignación aleatoria como instrumento del cumplimiento. Es decir, estime el LATE. Use los mismos controles y tipo de errores que en c. Este resultado se reporta en la columna 3 del panel B en la Tabla 9. ¿Cuál es la interpretación del coeficiente de la variable client? En R, la función ivreg del paquete AER le permite hacer la estimación de MC2E.\n\n\n\n\nSea una variable de resultados \\(y_i\\), una variable de asignación aleatoria \\(Z_i\\) y una variable de adopción \\(D_i\\). El estimador de Wald se define como:\n\\[\\hat{\\beta}_{Wald}=\\frac{\\bar{Y}_{Z_i=1}-\\bar{Y}_{Z_i=0}}{\\bar{D}_{Z_i=1}-\\bar{D}_{Z_i=0}}\\]\nEn esta pregunta mostraremos cómo el estimador de Wald es equivalente al estimador de VI cuando no hay controles. Use nuevamente los datos en crepon_morocco_analysis.csv.\n\n[5 puntos] Obtenga el estimador de Wald como el cociente de la diferencia en gasto total promedio entre los hogares asignados a tratamiento y control dividido por la diferencia en la probabilidad de adopción entre los hogares asignados a tratamiento y control. Recuerde que la variable del gasto total es expense_total.\n[5 puntos] Ahora estime por MC2E el efecto de la adopción sobre el gasto total, usando la variable de asignación como instrumento para la adopción. ¿Qué ventaja observa con respecto al estimador de Wald?\n\n\n\n\nConsidere nuevamente la base STAR_public_use.csv usada en la Tarea 1 del artículo Angrist, Lang y Oreopoulos (2009)4. En esta pregunta nos concentraremos en los efectos de la intervención en el año 2, mostrados en la columna (4) de la Tabla 6, sobre dos variables, el promedio de calificaciones gpa_year2 y los créditos completados credits_earned2.\nEl propósito de esta pregunta es mostrar la función de los \\(z\\)-scores en el análisis de efectos de tratamiento. De nuevo, puede quedarse solo con las observaciones que tienen noshow igual a 0. Antes de comenzar su análisis, sustituya por NA los valores en credits_earned2 para aquellas observaciones que tienen \\(NA\\) en la variable prob_year1.\n\n[5 puntos] Para tener un punto de comparación, estime la ecuación del efecto de tratamiento para gpa_year2 usando la misma especificación que en la pregunta 5 de la Tarea 1. Use también errores robustos. Deberá poder replicar los coeficientes y errores estándar del panel A, columna (4). ¿Cómo se interpretan el coeficiente sobre la variable ssp?\n[5 puntos] Genere un \\(z\\)-score para la variable gpa_year2 al que llame gpa_year2_sd. Para ello, calcule la media y desviación estándar de gpa_year2 para el grupo de control y luego genere gpa_year2_sd restándole a gpa_year2 la media obtenida y dividiendo esta diferencia por la desviación estándar obtenida. Compruebe que si calcula la media y la desviación estándar de gpa_year2_sd, en el grupo de control estas deberían ser 0 y 1, respectivamente.\n[5 puntos] Realice la misma estimación que en la parte a., pero ahora use como variable dependiente gpa_year2_sd. ¿Cómo se interpreta el coeficiente sobre ssp? ¿Qué es diferente y qué es igual entre los resultados obtenidos en esta parte y los obtenidos en la parte a.?\n[5 puntos] Ahora realizaremos un índice de mejora en educación, al agregar los resultados de estos dos indicadores en una sola variable, como se describe en Banerjee et al. (2015)5. Para ello, primero genere credits_earned2_sd, que será la versión estandarizada de credits_earned2, siguiendo el mismo procedimiento que en la parte b. En seguida, genere una nueva variable llamada indice_escolar, que será el promedio de credits_earned2_sd y gpa_year2_sd. Luego, calcule la media y la desviación estándar de indice_escolar en el grupo de control. Finalmente, genere una nueva variable indice_escolar_sd restándole a indice_escolar la media antes calculada y dividiendo esta diferencia por la desviación estándar antes calculada. Muestre que la variable indice_escolar_sd tiene media 0 y desviación estándar 1 en el grupo de control.\n[5 puntos] Estime ahora el efecto de tratamiento sobre indice_escolar_sd, siguiendo la misma especificación econométrica que en la parte a. y usando errores robustos. ¿Qué concluye?"
  },
  {
    "objectID": "tareas/tarea-2.html#datos",
    "href": "tareas/tarea-2.html#datos",
    "title": "Tarea 2",
    "section": "",
    "text": "crepon_morocco_balance.csv\ncrepon_morocco_analysis.csv\nSTAR_public_use.csv"
  },
  {
    "objectID": "tareas/tarea-2.html#pregunta-1",
    "href": "tareas/tarea-2.html#pregunta-1",
    "title": "Tarea 2",
    "section": "",
    "text": "En esta pregunta usaremos un ejemplo de el estudio con asignación experimental de Banerjee et al. (2015)1 para fijar algunas ideas referentes al análisis de una intervención de este tipo. A diferencia de otros ejemplos vistos en clase, este es un experimento a gran escala. Por favor, utilice la versión publicada, así como el material suplementario.\n\n[5 puntos] Describa brevemente en qué consiste la intervención que se discute en el artículo.\n[5 puntos] Describa brevemente en qué consiste el diseño experimental, es decir, ¿cómo se construye la variación que permite identificar el efecto del tratamiento? ¿Cómo se construyen los grupos de tratamiento y control?\n[5 puntos] En la página 1260799-7 se presenta una subsección denominada Atrition. Describa brevemente el propósito de este análisis y qué se concluye al respecto.\n[5 puntos] En la página 1260799-7, la subsección Compliance with treatment assignment concluye que los efectos estimados en el artículo se refieren a un efecto de intención a tratar o intent-to-treat o ITT. ¿Por qué?\n[5 puntos] En la página 1260799-8 se discuten dos métodos para tomar en cuenta la prueba de hipótesis múltiples. Describa brevemente por qué puede ser problemático probar múltiples hipótesis y cuáles son las dos formas en que los autores enfrentan este problema.\n[5 puntos] En la página 1260799-12 se discute la posible presencia de efectos de derramamiento o Spillovers. Describa brevemente en qué consisten dichos efectos de derramamiento y cómo los autores muestran la presencia o ausencia de dichos efectos usando regresiones."
  },
  {
    "objectID": "tareas/tarea-2.html#pregunta-2",
    "href": "tareas/tarea-2.html#pregunta-2",
    "title": "Tarea 2",
    "section": "",
    "text": "En Crepon et al. (2015)2 se estudia una intervención en Marruecos en la que se analiza el efecto de la adopción de microfinanzas, a través de un experimento de campo. En 81 de 162 localidades estudiadas se introdujo aleatoriamente una empresa de microfinanzas. Para seleccionar las localidades de tratamiento, primero se emparejaron localidades de acuerdo a características observables y, para cada pareja se asignó a tratamiento y otra a control. La variable que identifica a las parejas es paire. La base de datos crepon_morocco_balance.csv contiene los datos de este estudio usados para mostrar la integridad del diseño. La variable treatment es la variable de asignación aleatoria, mientras que la variable client es la variable de adopción\n\n[3 puntos] Primero recordaremos cómo mostrar que el tratamiento efectivamente fue asignado de manera aleatoria. El siguiente código lee los datos que debemos usar y se queda con las observaciones de la línea base. Con estos datos, mostraremos que la variable members_resid_bl, que indica el número de personas que viven en cada hogar está balanceado entre los grupos asignados a tratamiento y control. Noten que la media del número de personas que viven en el hogar en el grupo de control es 5.14 (d.e. 2.70) y que hay 2,266 hogares en dicho grupo de control. Esto es exactamente lo que se reporta en la fila correspondiente a Number members en la tabla 1 del artículo.\n\ndata.morocco&lt;-read_csv(\"../files/crepon_morocco_balance.csv\",\n                       locale = locale(encoding = \"latin1\")) %&gt;% \n  clean_names() %&gt;% \n  filter(merge_indicator!=1)\n\ndata.morocco %&gt;% \n  group_by(treatment) %&gt;%\n  summarize(mean=mean(members_resid_bl, na.rm=T),\n            std=sd(members_resid_bl, na.rm=T),\n            n=n()) %&gt;% \n  ungroup()\n\n# A tibble: 2 × 4\n  treatment  mean   std     n\n      &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt;\n1         0  5.14  2.69  2266\n2         1  5.19  2.76  2199\n\n\nObtenga ahora el valor de la diferencia entre el grupo de tratamiento y el de control, así como su valor \\(p\\) (últimas dos columnas). Para ello, estime una regresión en la que la variable dependiente sea número de personas que vive en el hogar members_resid_bl, en función de la variable de asignación treatment y variables dummy de pareja de localidad (la variable paire indica cuáles son las parejas). La regresión permite recuperar la diferencia de 0.04 personas que se reporta en la fila correspondiente en la tabla 1. Para recuperar el valor \\(p\\), estime errores agrupados usando la variable demi_paire, que es la clave de las distintas localidades, como variable de agrupación. Una forma de realizar esto es con la función coef_test del paquete clubSandwich.3\n[2 puntos] Ahora mostremos que efectivamente este es un ejemplo de una intervención con cumplimiento imperfecto. Genere un cuadro que indique: 1) cuántas personas que fueron asignadas a recibir el tratamiento efectivamente fueron clientes; 2) cuántas personas que fueron asignadas a recibir el tratamiento no se convirtieron en clientes; 3) cuántas personas que no fueron asignadas a recibir el tratamiento sí se convirtieron en clientes; y 4) cuántas personas que no fueron asignadas a recibir el tratamiento tampoco se convirtieron en clientes.\n[5 puntos] Ahora mostraremos que la adopción, es decir, convertirse en cliente, no es independiente de las características de los hogares. Considere las variables members_resid_bl y act_number_bl, que indican el número de miembros del hogar y el número de actividades económicas del hogar. Para cada una de estas dos variables, utilice la misma especificación que en la parte a., pero ahora usando la variable cliente como regresor. ¿Qué concluye?\n[5 puntos] Con estos elementos estamos convencidos de que es necesario emplear lo que sabemos sobre cumplimiento imperfecto. Usaremos ahora los datos en crepon_morocco_analysis.csv, que contiene los datos empleados para evaluar el impacto de la adopción. Estos datos están listos para analizarse. Estime la forma reducida del efecto de ser asignado al tratamiento sobre gasto total, expense_total. Comente los resultados, en particular, comente sobre la magnitud y la significancia estadística de la variable treatment. Aquí y en adelante, incluya los siguientes controles en la regresión: members_resid_bl, nadults_resid_bl, head_age_bl, act_livestock_bl, act_business_bl, borrowed_total_bl, members_resid_d_bl, nadults_resid_d_bl, head_age_d_bl, act_livestock_d_bl, act_business_d_bl, borrowed_total_d_bl, ccm_resp_activ, other_resp_activ, ccm_resp_activ_d y other_resp_activ_d. Además, incluya efectos fijos por pareja introduciendo la variable paire como factor. Use los mismos errores estándar que en la parte a. Con esto deberá poder recuperar el coeficiente y el error estándar de la columna (3) de la tabla 3.\n[5 puntos] Estime ahora la primera etapa, es decir, estime por MCO el efecto causal de la asignación sobre la adopción. Comente sobre la magnitud, la significancia estadística y la interpretación de la variable treatment en términos del comportamiento de los cumplidores. Debería poder replicar el coeficiente y el error estándar de la columna 1 en la tabla 2 del artículo.\n[5 puntos] Considere la columna 3 del panel A en la Tabla 9 del artículo. Aquí se reporta la estimación por MCO de la relación entre client y gasto total, con los mismos controles y tipo de errores que antes. Replique este resultado. ¿Se puede interpretar de forma causal el coeficiente sobre client?\n[5 puntos] ¿Cuáles son los dos supuestos econométricos que permiten la estimación del Local Average Treatment Effect (LATE) en el contexto de este problema? Comente sobre la evidencia que respalda el supuesto de que los instrumentos no son débiles en este problema.\n[5 puntos] Estime el efecto del cumplimiento sobre el gasto total, usando la asignación aleatoria como instrumento del cumplimiento. Es decir, estime el LATE. Use los mismos controles y tipo de errores que en c. Este resultado se reporta en la columna 3 del panel B en la Tabla 9. ¿Cuál es la interpretación del coeficiente de la variable client? En R, la función ivreg del paquete AER le permite hacer la estimación de MC2E."
  },
  {
    "objectID": "tareas/tarea-2.html#pregunta-3",
    "href": "tareas/tarea-2.html#pregunta-3",
    "title": "Tarea 2",
    "section": "",
    "text": "Sea una variable de resultados \\(y_i\\), una variable de asignación aleatoria \\(Z_i\\) y una variable de adopción \\(D_i\\). El estimador de Wald se define como:\n\\[\\hat{\\beta}_{Wald}=\\frac{\\bar{Y}_{Z_i=1}-\\bar{Y}_{Z_i=0}}{\\bar{D}_{Z_i=1}-\\bar{D}_{Z_i=0}}\\]\nEn esta pregunta mostraremos cómo el estimador de Wald es equivalente al estimador de VI cuando no hay controles. Use nuevamente los datos en crepon_morocco_analysis.csv.\n\n[5 puntos] Obtenga el estimador de Wald como el cociente de la diferencia en gasto total promedio entre los hogares asignados a tratamiento y control dividido por la diferencia en la probabilidad de adopción entre los hogares asignados a tratamiento y control. Recuerde que la variable del gasto total es expense_total.\n[5 puntos] Ahora estime por MC2E el efecto de la adopción sobre el gasto total, usando la variable de asignación como instrumento para la adopción. ¿Qué ventaja observa con respecto al estimador de Wald?"
  },
  {
    "objectID": "tareas/tarea-2.html#pregunta-4",
    "href": "tareas/tarea-2.html#pregunta-4",
    "title": "Tarea 2",
    "section": "",
    "text": "Considere nuevamente la base STAR_public_use.csv usada en la Tarea 1 del artículo Angrist, Lang y Oreopoulos (2009)4. En esta pregunta nos concentraremos en los efectos de la intervención en el año 2, mostrados en la columna (4) de la Tabla 6, sobre dos variables, el promedio de calificaciones gpa_year2 y los créditos completados credits_earned2.\nEl propósito de esta pregunta es mostrar la función de los \\(z\\)-scores en el análisis de efectos de tratamiento. De nuevo, puede quedarse solo con las observaciones que tienen noshow igual a 0. Antes de comenzar su análisis, sustituya por NA los valores en credits_earned2 para aquellas observaciones que tienen \\(NA\\) en la variable prob_year1.\n\n[5 puntos] Para tener un punto de comparación, estime la ecuación del efecto de tratamiento para gpa_year2 usando la misma especificación que en la pregunta 5 de la Tarea 1. Use también errores robustos. Deberá poder replicar los coeficientes y errores estándar del panel A, columna (4). ¿Cómo se interpretan el coeficiente sobre la variable ssp?\n[5 puntos] Genere un \\(z\\)-score para la variable gpa_year2 al que llame gpa_year2_sd. Para ello, calcule la media y desviación estándar de gpa_year2 para el grupo de control y luego genere gpa_year2_sd restándole a gpa_year2 la media obtenida y dividiendo esta diferencia por la desviación estándar obtenida. Compruebe que si calcula la media y la desviación estándar de gpa_year2_sd, en el grupo de control estas deberían ser 0 y 1, respectivamente.\n[5 puntos] Realice la misma estimación que en la parte a., pero ahora use como variable dependiente gpa_year2_sd. ¿Cómo se interpreta el coeficiente sobre ssp? ¿Qué es diferente y qué es igual entre los resultados obtenidos en esta parte y los obtenidos en la parte a.?\n[5 puntos] Ahora realizaremos un índice de mejora en educación, al agregar los resultados de estos dos indicadores en una sola variable, como se describe en Banerjee et al. (2015)5. Para ello, primero genere credits_earned2_sd, que será la versión estandarizada de credits_earned2, siguiendo el mismo procedimiento que en la parte b. En seguida, genere una nueva variable llamada indice_escolar, que será el promedio de credits_earned2_sd y gpa_year2_sd. Luego, calcule la media y la desviación estándar de indice_escolar en el grupo de control. Finalmente, genere una nueva variable indice_escolar_sd restándole a indice_escolar la media antes calculada y dividiendo esta diferencia por la desviación estándar antes calculada. Muestre que la variable indice_escolar_sd tiene media 0 y desviación estándar 1 en el grupo de control.\n[5 puntos] Estime ahora el efecto de tratamiento sobre indice_escolar_sd, siguiendo la misma especificación econométrica que en la parte a. y usando errores robustos. ¿Qué concluye?"
  },
  {
    "objectID": "tareas/tarea-2.html#footnotes",
    "href": "tareas/tarea-2.html#footnotes",
    "title": "Tarea 2",
    "section": "Notas",
    "text": "Notas\n\n\nBanerjee, A. et al. (2015). A multifaceted program causes lasting progress for the very poor: Evidence from six countries. Science, 348(6236).↩︎\nPor ejemplo, suponga que estima un modelo al que llame modelo1. Entonces, si ejecuta\n\ncoef_test(modelo1,\n          vcov=\"CR1S\",\n          cluster=mis_datos$demi_paire)[1:2,]\n\nobtendrá los coeficientes con los errores agrupados requeridos. La opción CR1S toma en cuenta el número de grupos o clusters para realizar inferencia. Puede leer más al respecto en la ayuda al ejecutar ?vcovCR. Este es el tipo de ajuste de muestras finitas que usan los autores. Esta corrección consiste en multiplicar la matriz de sándwich agrupada CR0 por \\(\\frac{G(N-1)}{(G-1)(N-p)}\\), donde \\(G\\) es el número de grupos, \\(N\\) es el número total de observaciones y \\(p\\) es el número de regresores.↩︎\nCrépon, B., Devoto, F., Duflo, E., & Parienté, W. (2015). Estimating the impact of microcredit on those who take it up: Evidence from a randomized experiment in Morocco. American Economic Journal: Applied Economics, 7(1), 123-50.↩︎\nAngrist, J., Lang, D., y Oreopoulos, P. (2009). Incentives and services for college achievement: Evidence from a randomized trial. American Economic Journal: Applied Economics, 1(1), 136-63.↩︎\nBanerjee, A. et al. (2015). A multifaceted program causes lasting progress for the very poor: Evidence from six countries. Science, 348(6236).↩︎"
  },
  {
    "objectID": "tareas/tarea-1.html",
    "href": "tareas/tarea-1.html",
    "title": "Tarea 1",
    "section": "",
    "text": "Fecha de entrega: martes 17 de septiembre a las 20:00 en Teams\nLa tarea deberá entregarse en Teams. Deberá incluir dos documentos:\nUn primer documento de respuestas donde se incluyan las respuestas a las preguntas teóricas y conceptuales. Este documento debe estar en formato pdf y debe ser generado usando un software de procesamiento de textos científicos, por ejemplo, usando los leguajes LaTeX o Markdown. En este documento también se deben incluir las respuestas a preguntas sobre conclusiones que se desprenden de las secciones prácticas. Por ejemplo, si una pregunta pide obtener la media de la variable x en cierta base de datos, entonces el documento de respuestas debe incluir la pregunta y respuesta correspondiente: “la media de la variable x es 32.6”. En este documento también deberán incluirse las tablas y gráficas que se soliciten.\nUn segundo archivo deberá contener el código replicable usado para generar los resultados de la sección práctica. El código debe también crear las tablas y gráficas solicitadas. Los archivos de código se verificarán para comprobar su replicabilidad."
  },
  {
    "objectID": "tareas/tarea-1.html#preguntas",
    "href": "tareas/tarea-1.html#preguntas",
    "title": "Tarea 1",
    "section": "",
    "text": "Fecha de entrega: martes 17 de septiembre a las 20:00 en Teams\nLa tarea deberá entregarse en Teams. Deberá incluir dos documentos:\nUn primer documento de respuestas donde se incluyan las respuestas a las preguntas teóricas y conceptuales. Este documento debe estar en formato pdf y debe ser generado usando un software de procesamiento de textos científicos, por ejemplo, usando los leguajes LaTeX o Markdown. En este documento también se deben incluir las respuestas a preguntas sobre conclusiones que se desprenden de las secciones prácticas. Por ejemplo, si una pregunta pide obtener la media de la variable x en cierta base de datos, entonces el documento de respuestas debe incluir la pregunta y respuesta correspondiente: “la media de la variable x es 32.6”. En este documento también deberán incluirse las tablas y gráficas que se soliciten.\nUn segundo archivo deberá contener el código replicable usado para generar los resultados de la sección práctica. El código debe también crear las tablas y gráficas solicitadas. Los archivos de código se verificarán para comprobar su replicabilidad."
  },
  {
    "objectID": "tareas/tarea-1.html#datos",
    "href": "tareas/tarea-1.html#datos",
    "title": "Tarea 1",
    "section": "Datos",
    "text": "Datos\nmuestra-enoe-123.csv\nSTAR_public_use.csv"
  },
  {
    "objectID": "tareas/tarea-1.html#pregunta-1",
    "href": "tareas/tarea-1.html#pregunta-1",
    "title": "Tarea 1",
    "section": "Pregunta 1",
    "text": "Pregunta 1\nSe diseñó una intervención que consistió en entregar zapatos a niños en cuatro áreas con altos niveles de pobreza de cierto país. Se sabe que los niños caminan bastante para ir a la escuela y realizan una serie de tareas domésticas después de la escuela. Por tanto, se tiene la hipótesis de que la entrega de zapatos tendrá impactos en el desarrollo de los niños. Se seleccionaron aleatoriamente localidades de control y localidades de tratamiento. Dentro de las localidades asignadas al tratamiento, todos los niños de entre 7 y 12 años de edad recibieron zapatos. Los investigadores deciden usar un \\(\\alpha=0.10\\) durante el estudio.\nLa tabla 1 presenta información sobre una serie de características de los niños que participaron en el estudio en la línea base.\n\n\n\n\n\n\n\n\nTabla 1. Covariables entre grupos de tratamiento y control (datos en la línea base)\n\n\n\n$$(1)$$\n$$(2)$$\n$$(3)$$\n\n\n\n\nVariables\nMedia control\nMedia tratamiento\n$$p$$\n\n\nEdad\n9.486\n9.332\n0.114\n\n\nSexo (masculino=1)\n0.545\n0.497\n0.073*\n\n\nJefe trabaja en agricultura\n0.462\n0.522\n0.435\n\n\nGrado máximo de estudios en el hogar\n5.836\n5.346\n0.406\n\n\nÍndice calidad de vivienda\n0.492\n0.593\n0.447\n\n\nÍndice de consumo de durables\n0.441\n0.467\n0.829\n\n\nNúmero de pares de zapatos que posee\n2.06\n1.825\n0.213\n\n\nHoras que pasa sin zapatos\n2.09\n1.963\n0.917\n\n\nDías que no fue a la escuela\n0.701\n0.886\n0.465\n\n\nHoras para dormir\n10.68\n9.98\n0.388\n\n\nHoras para comer\n1.931\n1.934\n0.986\n\n\nHoras para lavar\n0.732\n0.835\n0.228\n\n\nHoras en escuela\n4.613\n4.154\n0.168\n\n\nHoras para trabajar\n0.409\n0.572\n0.082*\n\n\nN\n666\n912\n1,578\n\n\n\nNota: Los valores \\(p\\) son de una prueba \\(t\\) simple. * \\(p &lt;0.10\\), ** \\(p &lt;0.05\\), *** \\(p &lt;0.01\\).\n\n\n\n\n\n\n\n\nLa tabla 2 muestra los resultados de estimar una regresión del tipo\n\\[y_i=\\alpha+X_i'\\beta+\\theta T_i+\\varepsilon_i\\]\ndonde \\(T_i\\) indica la pertenencia al grupo de tratamiento, \\(X_i\\) es un vector de características observables usadas como controles y \\(y_i\\) es cada una de las siguientes variables sobre las que se estima el impacto del programa: 1) número de zapatos que posee; 2) días que no fue a la escuela; y 3) horas para trabajar.\n\n\n\n\n\n\n\n\nTabla 2. Efectos del tratamiento en variables seleccionadas\n\n\n\n$$(1)$$\n$$(2)$$\n$$(3)$$\n\n\n\n\n\nNúmero de pares de zapatos que posee\nDías que no fue a la escuela\nHoras para trabajar\n\n\n$$\\hat{\\theta}$$\n0.075\n-0.165**\n0.348\n\n\n(e.e)\n(0.061)\n(0.057)\n(0.243)\n\n\nN\n1,302\n664\n556\n\n\n\nNota: * \\(p &lt;0.10\\), ** \\(p &lt;0.05\\), *** \\(p &lt;0.01\\). Todas las regresiones controlan por edad, sexo, ocupación del jefe del hogar y calidad de la vivienda. Errores estándar agrupados a nivel localidad entre paréntesis. \\(\\hat{{\\theta}}\\) se refiere al estimador de \\(\\theta\\).\n\n\n\n\n\n\n\n\n\n[2 puntos] ¿Qué representan los valores \\(p\\) reportados en la columna (3) en la tabla 1?\n[3 puntos] Un donante está preocupado por los resultados de la intervención porque considera que los niños que tenían más zapatos antes de que iniciara el programa tuvieron una menor probabilidad de estar en el grupo que recibió zapatos por parte del programa. ¿Considera esto una preocupación válida sobre la integridad del experimento?\n[5 puntos] ¿Cómo se interpreta el asterisco al lado del valor \\(p\\) de 0.082 asociado a las horas para trabajar?\n[5 puntos] ¿Cuál es el impacto del programa en el número de pares zapatos que los niños en promedio poseen? Mencione la magnitud y significancia estadística de dicho impacto.\n[5 puntos] En columna (2) de la tabla 2, ¿qué interpretación tienen los dos asteriscos al lado de -0.165?\n[5 puntos] ¿Cuántos días sin ir a la escuela esperaríamos observar después de la intervención en los niños que recibieron zapatos?\n[5 puntos] La nota al pie de la tabla 2 indica que se reportan errores estándar agrupados? ¿Por qué los investigadores realizan la estimación de los errores estándar de esta manera?"
  },
  {
    "objectID": "tareas/tarea-1.html#pregunta-2",
    "href": "tareas/tarea-1.html#pregunta-2",
    "title": "Tarea 1",
    "section": "Pregunta 2",
    "text": "Pregunta 2\nSuponga que está interesado en conocer el impacto que tiene el acceso a las microfinanzas en un indicador de seguridad alimentaria \\(y_i\\) de las familias. La idea detrás es que el acceso al crédito podría mejorar la habilidad de los hogares para suavizar el consumo. Afortunadamente, usted tiene acceso a una encuesta representativa a nivel nacional que incluye un índice de seguridad alimentaria así como una variable indicadora o dummy, \\(T_i\\), que toma el valor de 1 si algún miembro del hogar tiene acceso a microfinanzas y de 0 en otro caso.\nSuponga que su asistente le sugiere que para evaluar el impacto de microfinanzas basta con estimar la siguiente regresión por MCO:\n\\[ y_i = \\alpha + \\beta T_i + \\varepsilon_i \\]\n\n[5 puntos] ¿Cómo valora la propuesta de su asistente? ¿Qué podemos esperar de una comparación observacional como la de la propuesta?\n[5 puntos] Muestre si el estimador de MCO de \\(\\beta\\) es consistente o no para el efecto de tratamiento."
  },
  {
    "objectID": "tareas/tarea-1.html#pregunta-3",
    "href": "tareas/tarea-1.html#pregunta-3",
    "title": "Tarea 1",
    "section": "Pregunta 3",
    "text": "Pregunta 3\n[10 puntos] Replique el ejercicio en MHE que ejemplifica el teorema de la regresión de la FEC. Para esto use el archivo de datos muestra-enoe-123.csv, que contiene una muestra del primer trimestre de 2023 de la ENOE e incluye personas que trabajan y reciben un ingreso. lingreso es el log del ingreso mensual y escolaridad son los años de educación. Primero, estime una regresión de lingreso en función de escolaridad usando los microdatos. Luego, obtenga la media de lingreso para cada nivel de escolaridad y estime una regresión de las medias en función de escolaridad, pesando por el número de observaciones usadas para construir cada media. Compare los coeficientes estimados."
  },
  {
    "objectID": "tareas/tarea-1.html#pregunta-4",
    "href": "tareas/tarea-1.html#pregunta-4",
    "title": "Tarea 1",
    "section": "Pregunta 4",
    "text": "Pregunta 4\nUse los datos del archivo STAR_public_use.csv para este problema. En este problema replicará la fila correspondiente a la variable Age (edad del o la estudiante) de la Tabla 1 en Angrist et al. (2009).1\n\n[5 puntos] Obtenga la media y la desviación estándar de la edad, age en los datos, en el grupo de control (columna 1), restringiendo la muestra a aquellos individuos con noshow igual a 0.\n[10 puntos] Usando una regresión lineal, muestre que la edad no está correlacionada con la asignación a los tratamientos (ssp, sfp y sfsp). De nuevo, debe restringir la muestra quienes tienen noshow igual a 0. Reporte los coeficientes y los errores estándar (columnas 2 a 4).\n[5 puntos] Realice una prueba de significancia conjunta de los coeficientes obtenidos en el punto b. Reporte el estadístico \\(F\\) y el valor \\(p\\) asociado (columna 5).\n[10 puntos] ¿Cuál es el propósito de la prueba F realizada en el punto c.? ¿Qué hipótesis nula prueban los autores?"
  },
  {
    "objectID": "tareas/tarea-1.html#pregunta-5",
    "href": "tareas/tarea-1.html#pregunta-5",
    "title": "Tarea 1",
    "section": "Pregunta 5",
    "text": "Pregunta 5\nNuevamente, use los datos del archivo STAR_public_use.csv para este problema. En este problema, replicará dos columnas del efecto de tratamiento de la Tabla 5. Note que de nuevo se deben usar solo las observaciones que tienen noshow igual a 0. Los autores también sustituyen los valores de gpa_year1 por NA cuando la variable grade_20059_fall es NA; y sustituyen grade_20059_fall por NA cuando la variable gpa_year1 es NA. Además, note que se usan las siguientes variables de control: sex, mtongue, hsgroup, numcourses_nov1, lastmin, mom_edn, y dad_edn, todas ellas categóricas.\n\n[10 puntos] Estime el efecto de cada tipo de tratamiento sobre el promedio o GPA, denotado gpa_year1 en los datos, para toda la muestra (Panel B, columna 1). Calcule correctamente los errores estándar. Interprete los resultados.\n[10 puntos] Estime el efecto sobre el GPA de recibir cada tipo de tratamiento, considerando los tratamientos SSP o SFP (de cualquier tipo) en los hombres de la muestra (Panel B, columna 5). Esto es, considere el tratamiento SSP como un primer tipo de tratamiento y, ya sea SFP o SFSP, como un segundo tipo de tratamiento. Calcule correctamente los errores estándar. Interprete sus resultados."
  },
  {
    "objectID": "tareas/tarea-1.html#footnotes",
    "href": "tareas/tarea-1.html#footnotes",
    "title": "Tarea 1",
    "section": "Notas",
    "text": "Notas\n\n\nAngrist, J., Lang, D., y Oreopoulos, P. (2009). Incentives and services for college achievement: Evidence from a randomized trial. American Economic Journal: Applied Economics, 1(1), 136-63.↩︎"
  },
  {
    "objectID": "tareas/index.html",
    "href": "tareas/index.html",
    "title": "Tareas",
    "section": "",
    "text": "Tarea 1\n\nFecha de entrega: martes 17 de septiembre a las 20:00 en Teams\nPreguntas\nRespuestas\n\n\n\n\nTarea 2\n\nFecha de entrega: miércoles 2 de octubre a las 20:00 en Teams\nPreguntas\nRespuestas\n\n\n\n\nTarea 3\n\nFecha de entrega: jueves 7 de noviembre a las 20:00 en Teams\n\n\n\n\nTarea 4\n\nFecha de entrega: jueves 28 de noviembre a las 20:00 en Teams",
    "crumbs": [
      "Tareas"
    ]
  },
  {
    "objectID": "reglas.html",
    "href": "reglas.html",
    "title": "Reglas",
    "section": "",
    "text": "No se tolerarán actos de discriminación. Se procura un ambiente de respeto entre todos los miembros de la clase.\nToda la comunicación relativa al curso se dará por medio del correo institucional del CIDE.\nLas tareas y exámenes se entregarán a través de Teams.\nLos participantes en la sesión deberán procurar que haya un ambiente silencioso para el desarrollo de la clase.\nSe aplicarán estrictamente los lineamientos generales contenidos en el código de ética del CIDE en términos de plagio y fraude en tareas, exámenes y proyecto final.",
    "crumbs": [
      "Reglas"
    ]
  },
  {
    "objectID": "presentaciones.html",
    "href": "presentaciones.html",
    "title": "Presentaciones",
    "section": "",
    "text": "Por favor, seleccione una de las lecturas marcadas con una “+” de la lista de lecturas y envíe un correo al profesor para que se le asigne una fecha de presentación.\n\n\n\n\n\n\n\n\n\nAutores\nTema\nPresentador o presentadora\nFecha de exposición\n\n\n\n\nArceo-Gomez & Campos-Vazquez (2014)\nExperimental\nXimena Nuñez\nMartes 10 de septiembre\n\n\nGertler (2004)\nExperimental\nMontserrath Vázquez\nMartes 10 de septiembre\n\n\nDe la O (2013)\nLATE\nLuis Angel Ruiz\nMartes 24 de septiembre\n\n\nBoruchowicz et al. (2022)\nDID\nAntonio Lara\nMartes 22 de octubre\n\n\nChort & Öktem (2024)\nDID\nAlejandra Rojas\nMartes 22 de octubre\n\n\nConti & Ginja (2023).\nDID\nVíctor Escandón\nJueves 24 de octubre\n\n\nAguilar, Gutiérrez & Seira (2021)\nDiscontinuidades\nAbigail Basañez\nMartes 5 de noviembre\n\n\nDavis (2017)\nDiscontinuidades\nRaúl Zúñiga\nMartes 5 de noviembre\n\n\nCampos-Vazquez & Esquivel (2020)\nControl sintético\nEmilio Vázquez\nMartes 12 de noviembre\n\n\nCampos-Vazquez & Esquivel (2023)\nControl sintético\nCynthia Ramos\nMartes 12 de noviembre\n\n\n\nMachine learning\nRicardo Cortés\nJueves 21 de noviembre",
    "crumbs": [
      "Presentaciones"
    ]
  },
  {
    "objectID": "notas/late.html",
    "href": "notas/late.html",
    "title": "LATE",
    "section": "",
    "text": "En esta nota se presenta la derivación del Local Average Treatment Effect (LATE) de acuerdo con Angrist, Imbens & Rubin (1996)\nFrecuentemente nos encontraremos con intervenciones donde la aleatorización ocurre de manera íntegra, pero no todos aquellos asignados a cierto tratamiento efectivamente lo reciben.\nConsideraremos la diferencia entre ser asignado al tratamiento y recibir el tratamiento pues, por ejemplo, al evaluar un programa que asigna aleatoriamente a niños a escuelas de prestigio, nos interesa el efecto de efectivamente asistir a dichas escuelas y, quizás no tanto, el efecto de haber sido sorteado para asistir a dichas escuelas por medio de un experimento.\nUsaremos un estimador de variables instrumentales (VI) para relacionar los efectos de la asignación con los efectos de la adopción. El resultado principal al que llegaremos es el siguiente:\n\\[\\text{Efecto de la asignación en } Y=(\\text{Efecto de la asignación en la adopción})\\times (\\text{Efecto de la adopción en }Y)\\]\nPor tanto:\n\\[\\text{Efecto de la adopción en }Y=\\frac{\\text{Efecto de la asignación en }Y}{\\text{Efecto de las asignación en la adopción}}\\]\nAhora derivaremos formalmente este resultado, pero la intuición es importante: el efecto causal de la adopción es el efecto de la asignación, escalado por el efecto de la asignación en la adopción\n\n\nConsideremos, para la asignación y el cumplimiento, las dos posibles situaciones:\nAsignación: \\(Z_i=\\begin{cases} 1 \\\\0 \\\\ \\end{cases}\\)\nCumplimiento: \\(D_i=\\begin{cases} 1 \\\\0 \\\\ \\end{cases}\\)\nSi \\(Y_i\\) variable de resultados, nos importa el efecto de \\(D_i\\) sobre \\(Y_i\\).\n\\(D_i(Z)\\) es el indicador de cumplir, dada la asignación \\(Z\\), por lo que con cumplimiento perfecto tendríamos \\(D_i(Z)=Z_i\\). En general, hay asignados que no cumplen y no asignados que cumplen.\nCon esta notación podemos escribir la variable de pacto de \\(i\\) como \\(Y_i(Z,D)\\).\nNoten que \\(Y_i(Z,D)\\) y \\(D_i(Z)\\) son resultados potenciales.\n\n\n\nSupuesto 1: Stable Unit Treatment Value Assumption (SUTVA)\nEste supuesto indica que los resultados potenciales de \\(i\\) no están correlacionados con los de los otros individuos. Por tanto podemos escribir:\n\\[Y_i(Z,D)=Y_i(Z_i,D_i)\\] Y además:\n\\[D_i(Z)=D_i(Z_i)\\]\nSupuesto 2: asignación aleatoria\nLa asignación de \\(Z_i\\) es aleatoria, es decir:\n\\[P(Z=C)=P(Z=C')\\quad \\forall\\quad C,C'\\]\nLos supuestos 1 y 2 nos permiten identificar los efectos causales de \\(Z\\) en \\(Y\\) y de \\(Z\\) en \\(D\\) calculando diferencias de medias por grupos de \\(Z\\):\n\n\\(ITT_Y\\) comparar las medias de \\(y\\) entre quienes \\(Z=1\\) y quienes \\(Z=0\\)\n\\(ITT_D\\) comparar las medias de \\(D\\) entre quienes \\(Z=1\\) y quienes \\(Z=0\\)\n\nLos dos efectos causales antes descritos reciben el nombre de intención a tratar o intention to treat, o como se encuentra frecuentemente, \\(ITT\\). Este parámetro nos dice el efecto que resulta de ser asignado, es decir, refleja la intención que se tenía para tratar a un grupo y a otro no.\nHasta ahora el supuesto crítico es la asignación aleatoria de \\(Z\\). Sin embargo, \\(D_i\\) puede no serlo y, en general, no lo es. Por tanto, una comparación de \\(y\\) entre grupos de \\(D\\) es inapropiada. Necesitamos algunos supuestos para decir algo del efecto causal de \\(D\\) sobre \\(Y\\)\nSupuesto 3: restricción de exclusión\nEste supuestos indica que la asignación al tratamiento es independiente de los resultados potenciales:\n\\[Y(Z,D)=Y(Z',D)\\quad \\forall \\quad Z,Z',D\\]\nEste supuesto implica que podemos escribir:\n\\[Y_i(1,d)=Y_i(0,d) \\quad d=\\{0,1\\}\\]\nEs decir, la exclusión resuleve el problema contrafactual.\nAdemás, con el supuesto 3 podemos escribir:\n\\[Y(D)=Y(Z,D)=Y(Z',D)\\quad \\forall \\quad Z,Z',D\\]\npor el supuesto 1:\n\\[Y_i(D_i)=Y_i(Z,D)\\]\nSupuesto 4: el efecto causal promedio de \\(Z\\) sobre \\(D\\) es distinto de cero\nEste supuesto implica que, si se asignan individuos a ser tratados, esperamos que algunos efectivamente cumplan:\n\\[E(D_i(1)-D_i(0))\\neq0\\]\nEn otras palabras, la asignación tiene efecto sobre el cumplimiento.\nSupuesto 5: monotonicidad\nEste supuesto dice que no hay un individuo que:\n\nCuando se le asigna, no cumple\nCuando no se le asigna, cumple\n\n\\[D_i(1)\\geq D_i(0) \\quad \\forall\\quad i=1,\\ldots N\\]\nNoten que este supuesto se debe pensar en términos contrafactuales. A un individuo que no cumple cuando se le asigna y cumple cuando no se le asigna se le conoce como retador o defier."
  },
  {
    "objectID": "notas/late.html#notación",
    "href": "notas/late.html#notación",
    "title": "LATE",
    "section": "",
    "text": "Consideremos, para la asignación y el cumplimiento, las dos posibles situaciones:\nAsignación: \\(Z_i=\\begin{cases} 1 \\\\0 \\\\ \\end{cases}\\)\nCumplimiento: \\(D_i=\\begin{cases} 1 \\\\0 \\\\ \\end{cases}\\)\nSi \\(Y_i\\) variable de resultados, nos importa el efecto de \\(D_i\\) sobre \\(Y_i\\).\n\\(D_i(Z)\\) es el indicador de cumplir, dada la asignación \\(Z\\), por lo que con cumplimiento perfecto tendríamos \\(D_i(Z)=Z_i\\). En general, hay asignados que no cumplen y no asignados que cumplen.\nCon esta notación podemos escribir la variable de pacto de \\(i\\) como \\(Y_i(Z,D)\\).\nNoten que \\(Y_i(Z,D)\\) y \\(D_i(Z)\\) son resultados potenciales."
  },
  {
    "objectID": "notas/late.html#supuestos",
    "href": "notas/late.html#supuestos",
    "title": "LATE",
    "section": "",
    "text": "Supuesto 1: Stable Unit Treatment Value Assumption (SUTVA)\nEste supuesto indica que los resultados potenciales de \\(i\\) no están correlacionados con los de los otros individuos. Por tanto podemos escribir:\n\\[Y_i(Z,D)=Y_i(Z_i,D_i)\\] Y además:\n\\[D_i(Z)=D_i(Z_i)\\]\nSupuesto 2: asignación aleatoria\nLa asignación de \\(Z_i\\) es aleatoria, es decir:\n\\[P(Z=C)=P(Z=C')\\quad \\forall\\quad C,C'\\]\nLos supuestos 1 y 2 nos permiten identificar los efectos causales de \\(Z\\) en \\(Y\\) y de \\(Z\\) en \\(D\\) calculando diferencias de medias por grupos de \\(Z\\):\n\n\\(ITT_Y\\) comparar las medias de \\(y\\) entre quienes \\(Z=1\\) y quienes \\(Z=0\\)\n\\(ITT_D\\) comparar las medias de \\(D\\) entre quienes \\(Z=1\\) y quienes \\(Z=0\\)\n\nLos dos efectos causales antes descritos reciben el nombre de intención a tratar o intention to treat, o como se encuentra frecuentemente, \\(ITT\\). Este parámetro nos dice el efecto que resulta de ser asignado, es decir, refleja la intención que se tenía para tratar a un grupo y a otro no.\nHasta ahora el supuesto crítico es la asignación aleatoria de \\(Z\\). Sin embargo, \\(D_i\\) puede no serlo y, en general, no lo es. Por tanto, una comparación de \\(y\\) entre grupos de \\(D\\) es inapropiada. Necesitamos algunos supuestos para decir algo del efecto causal de \\(D\\) sobre \\(Y\\)\nSupuesto 3: restricción de exclusión\nEste supuestos indica que la asignación al tratamiento es independiente de los resultados potenciales:\n\\[Y(Z,D)=Y(Z',D)\\quad \\forall \\quad Z,Z',D\\]\nEste supuesto implica que podemos escribir:\n\\[Y_i(1,d)=Y_i(0,d) \\quad d=\\{0,1\\}\\]\nEs decir, la exclusión resuleve el problema contrafactual.\nAdemás, con el supuesto 3 podemos escribir:\n\\[Y(D)=Y(Z,D)=Y(Z',D)\\quad \\forall \\quad Z,Z',D\\]\npor el supuesto 1:\n\\[Y_i(D_i)=Y_i(Z,D)\\]\nSupuesto 4: el efecto causal promedio de \\(Z\\) sobre \\(D\\) es distinto de cero\nEste supuesto implica que, si se asignan individuos a ser tratados, esperamos que algunos efectivamente cumplan:\n\\[E(D_i(1)-D_i(0))\\neq0\\]\nEn otras palabras, la asignación tiene efecto sobre el cumplimiento.\nSupuesto 5: monotonicidad\nEste supuesto dice que no hay un individuo que:\n\nCuando se le asigna, no cumple\nCuando no se le asigna, cumple\n\n\\[D_i(1)\\geq D_i(0) \\quad \\forall\\quad i=1,\\ldots N\\]\nNoten que este supuesto se debe pensar en términos contrafactuales. A un individuo que no cumple cuando se le asigna y cumple cuando no se le asigna se le conoce como retador o defier."
  },
  {
    "objectID": "materiales.html",
    "href": "materiales.html",
    "title": "Materiales",
    "section": "",
    "text": "Datasets\nSlides"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Evaluación de Programas 2024",
    "section": "",
    "text": "Profesor: Irvin Rojas (irvin.rojas@cide.edu).\nHorario de clases: martes (8:00 a 11:10).\nPlataforma del curso: Microsoft Teams.\nHorario de oficina: martes y jueves (18:00).\n\n¡Bienvenidas, bienvenidos!\nEste es un sitio para las y los estudiantes del curso de Evaluación de Programas de la Licenciatura y Maestría en Economía del CIDE. Sin embargo, otras personas pueden encontrar útiles los recursos de este sitio, como el programa del curso, las tareas y la lista de lecturas.",
    "crumbs": [
      "Home"
    ]
  },
  {
    "objectID": "cronograma.html",
    "href": "cronograma.html",
    "title": "Cronograma",
    "section": "",
    "text": "El siguiente cronograma es informativo sobre la organización del curso:",
    "crumbs": [
      "Cronograma"
    ]
  },
  {
    "objectID": "diapositivas/did.html#introducción",
    "href": "diapositivas/did.html#introducción",
    "title": "Diferencia en diferencias",
    "section": "Introducción",
    "text": "Introducción\n\n\n\nAngrist & Pischke (2014) describen lo sucedido con el sector bancario en Mississippi durante la Gran Depresión\nEn EUA, la FED tiene 12 bancos regionales y cada uno tiene autonomía para tomar ciertas decisiones de política monetaria\nEn particular, Mississippi tiene una parte del estado bajo el mando del distrito 6 (Atlanta) y la otra mitad en el distrito 8 (San Luis)"
  },
  {
    "objectID": "diapositivas/did.html#diferencia-en-diferencias-1",
    "href": "diapositivas/did.html#diferencia-en-diferencias-1",
    "title": "Diferencia en diferencias",
    "section": "Diferencia en diferencias",
    "text": "Diferencia en diferencias\n\nComo respuesta a las corridas bancarias que caracterizaron la crisis de 1929, los bancos comerciales en Mississippi se vieron expuestos a dos políticas distintas\n\n\\[\nT=\n\\begin{cases}\n1\\quad\\quad \\text{proveer liquidez adicional (distrito 6)} \\\\\n0\\quad\\quad \\text{dar igual o menos liquidez (distrito 8)} \\\\\n\\end{cases}\n\\]\n\nSi estamos interesados en la cantidad de bancos que sobrevivieron y decir algo sobre qué política es más efectiva, ¿qué podemos hacer?\nUna primera respuesta sería contar la diferencia después de la crisis:\n\n\n\n\nDistrito 8\nDistrito 6\nDiferencia\n\n\n\n\n\\(T=0\\)\n\\(T=1\\)\n\n\n\n132 bancos\n121 bancos\n11 bancos\n\n\n\n\nPareciera que la política de proveer liquidez, easy money, causó que quebraran más bancos\nSin embargo, esta comparación claramente ignora las condiciones iniciales"
  },
  {
    "objectID": "diapositivas/did.html#representación-gráfica",
    "href": "diapositivas/did.html#representación-gráfica",
    "title": "Diferencia en diferencias",
    "section": "Representación gráfica",
    "text": "Representación gráfica\n\nGráficamente observamos\n\n\n\nbanks&lt;-read_csv(\"banks_mm.csv\",\n                       locale = locale(encoding = \"latin1\"))\nbanks &lt;- banks %&gt;%\n  filter(month(date) == 7L,\n         mday(date) == 1L) %&gt;%\n  mutate(year = year(date)) %&gt;%\n  select(year,\n         matches(\"bi[ob][68]\")) %&gt;% \n  select(year,bib6,bib8) %&gt;% \n  gather(distrito,banks,bib6:bib8) %&gt;% \n  mutate(treatment=ifelse(distrito==\"bib6\",1,0)) %&gt;% \n  mutate(post=ifelse(year&gt;=1931,1,0))\n\nbanks %&gt;% \n  mutate(banks=ifelse(year==1930 | year==1931,banks,NA)) %&gt;% \n  filter(year &lt;= 1932) %&gt;% \n  ggplot(aes(x=year, y=banks, color=distrito)) +\n  geom_line(size=2) +\n  scale_y_continuous(limits=c(100,180))"
  },
  {
    "objectID": "diapositivas/did.html#representación-gráfica-1",
    "href": "diapositivas/did.html#representación-gráfica-1",
    "title": "Diferencia en diferencias",
    "section": "Representación gráfica",
    "text": "Representación gráfica\n\nDel distrito 8 (no tratado) podemos obtener la pendiente:\n\n\\[m_{NT}=\\frac{Y_{8,post}-Y_{8,pre}}{X_{8,post}-X_{8,pre}}=\\frac{132-165}{1931-1930}=-33\\]\n\nY entonces, podemos encontrar cuál hubiera sido el número de bancos en el distrio 6 (tratado) si hubiera seguido la pendiente del distrito 8:\n\n\\[m_T=\\frac{\\tilde{Y}_{6,post}-Y_{6,pre}}{X_{6,post}-X_{6,pre}}=\\frac{\\tilde{Y}_{6,post}-135}{1931-1930}=-33\\] - Por tanto, \\(\\tilde{Y}_{6,post}=102\\) es el número de bancos que el distrito 6 hubiera tenido si hubiera seguido una tendencia paralela a la del distrito 8"
  },
  {
    "objectID": "diapositivas/did.html#representación-gráfica-2",
    "href": "diapositivas/did.html#representación-gráfica-2",
    "title": "Diferencia en diferencias",
    "section": "Representación gráfica",
    "text": "Representación gráfica\n\nPodemos contruir el contrafactual para el distrito 6 observando la pendiente del distrito 8\n\n\n\nbanks_contrafactual &lt;- banks %&gt;%\n    mutate(banks=ifelse(year==1930 | year==1931,banks,NA)) %&gt;% \n  filter(year &lt;= 1932) %&gt;% \n  mutate(tipo=\"observado\")\n  \nd6_contrafactual &lt;- banks_contrafactual %&gt;% \n  filter(distrito==\"bib6\") %&gt;% \n  mutate(banks=ifelse(year==1931,102,banks),\n         tipo=\"contrafactual\")\n\nbanks_contrafactual &lt;- rbind(banks_contrafactual,d6_contrafactual)\n\ndd_grafica &lt;- banks_contrafactual %&gt;% \n  ggplot(aes(x=year, y=banks, color=distrito, linetype=tipo))+\n  geom_line(size=2) +\n  scale_linetype_manual(values=c(\"dashed\", \"solid\")) +\n  scale_y_continuous(limits=c(100,180)) \n\n\ndd_grafica"
  },
  {
    "objectID": "diapositivas/did.html#diferencia-en-diferencias-2",
    "href": "diapositivas/did.html#diferencia-en-diferencias-2",
    "title": "Diferencia en diferencias",
    "section": "Diferencia en diferencias",
    "text": "Diferencia en diferencias\n\nPodemos dar así una primera definición de lo que es la diferencia en diferencias del número de bancos que sobrevivieron a la Gran Depresión en Mississippi\n\n\\[\n\\begin{aligned}\n\\delta_{DID}&=(Y_{6,post}-Y_{6,pre})-(Y_{8,post}-Y_{8,pre}) \\\\\n&=(Y_{6,1931}-Y_{6,1930})-(Y_{8,1931}-Y_{8,1930}) \\\\\n&=(121-135)-(132-165) \\\\\n&=-14+33 = 19\n\\end{aligned}\n\\]\n\nEl estimador de DID toma en cuenta las diferencias inciales\nEn este caso, el distrito 8 ya tenía más bancos abiertos que el 6 antes de la crisis\nDID construye un contrafactual para las unidades tratadas usando la pendiente de las unidades no tratadas"
  },
  {
    "objectID": "diapositivas/did.html#diferencia-en-diferencias-3",
    "href": "diapositivas/did.html#diferencia-en-diferencias-3",
    "title": "Diferencia en diferencias",
    "section": "Diferencia en diferencias",
    "text": "Diferencia en diferencias\n\nEl supuesto fundamental es el de tendencias comunes, es decir, que en ausencia del tratamiento, el grupo de tratamiento se hubiera comportado igual al grupo de control\nSi hay varios puntos pre intervención, el supuesto de tendencias comunes puede probarse empíricamente"
  },
  {
    "objectID": "diapositivas/did.html#regresión-en-did",
    "href": "diapositivas/did.html#regresión-en-did",
    "title": "Diferencia en diferencias",
    "section": "Regresión en DID",
    "text": "Regresión en DID\n\nEl método puede generalizarse a más periodos de tiempo\nAquí, una regresión nos permite identificar el efecto del tratamiento\nTenemos datos sobre el número de bancos en cada distrito en cada año (1929-1934)\n\n\\[y_{dt}=\\alpha+\\beta T_d+\\gamma POST_t + \\delta_{r,DID}(T_d\\times POST_t)+e_{dt}\\] - \\(T_d\\) es una dummy para los distritos tratados (distrito 6 en este caso)\n\nLes llamamos efectos fijos individuales y sirven para controlar diferencias entre distritos que no cambian en el tiempo\n\\(POST_t\\) es una dummy para los periodos post tratamiento (1931 en adelante)\nAl término \\(T_d\\times POST_t\\) se le conoce como el término de interacción, que es una dummy igual a 1 para los distritos tratados en los años post intervención\n\\(\\delta_{r,DID}\\) es el estimador de DID del efecto del tratamiento"
  },
  {
    "objectID": "diapositivas/did.html#regresión-en-did-1",
    "href": "diapositivas/did.html#regresión-en-did-1",
    "title": "Diferencia en diferencias",
    "section": "Regresión en DID",
    "text": "Regresión en DID\n\nUsemos los datos del archivo banks_mm.csv que se utilizan en el libro\nEs una forma muy básica de datos en panel: cada fila representa un distrito en un periodo de tiempo\nPodemos identificar si cada fila pertenece a un distrito tratado o no o a un periodo posterior a al tratamiento o no\n\n\nbanks\n\n# A tibble: 12 × 5\n    year distrito banks treatment  post\n   &lt;dbl&gt; &lt;chr&gt;    &lt;dbl&gt;     &lt;dbl&gt; &lt;dbl&gt;\n 1  1929 bib6       141         1     0\n 2  1930 bib6       135         1     0\n 3  1931 bib6       121         1     1\n 4  1932 bib6       113         1     1\n 5  1933 bib6       102         1     1\n 6  1934 bib6       102         1     1\n 7  1929 bib8       169         0     0\n 8  1930 bib8       165         0     0\n 9  1931 bib8       132         0     1\n10  1932 bib8       120         0     1\n11  1933 bib8       111         0     1\n12  1934 bib8       109         0     1"
  },
  {
    "objectID": "diapositivas/did.html#regresión-en-did-2",
    "href": "diapositivas/did.html#regresión-en-did-2",
    "title": "Diferencia en diferencias",
    "section": "Regresión en DID",
    "text": "Regresión en DID\n\nEstimemos la regresión que acabamos de motivar usando todos los periodos en el panel\n\n\ndid_bank &lt;- lm(banks ~ treatment + post+ treatment*post,\n               data=banks)\n\nsummary(did_bank)\n\n\nCall:\nlm(formula = banks ~ treatment + post + treatment * post, data = banks)\n\nResiduals:\n   Min     1Q Median     3Q    Max \n-9.000 -7.125  0.000  3.125 14.000 \n\nCoefficients:\n               Estimate Std. Error t value Pr(&gt;|t|)    \n(Intercept)     167.000      6.190  26.980 3.83e-09 ***\ntreatment       -29.000      8.754  -3.313 0.010652 *  \npost            -49.000      7.581  -6.464 0.000195 ***\ntreatment:post   20.500     10.721   1.912 0.092224 .  \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 8.754 on 8 degrees of freedom\nMultiple R-squared:  0.8906,    Adjusted R-squared:  0.8496 \nF-statistic: 21.71 on 3 and 8 DF,  p-value: 0.0003369"
  },
  {
    "objectID": "diapositivas/did.html#regresión-en-did-3",
    "href": "diapositivas/did.html#regresión-en-did-3",
    "title": "Diferencia en diferencias",
    "section": "Regresión en DID",
    "text": "Regresión en DID\n\nNoten que si solo usamos dos años, obtenemos exactamente lo que obtendríamos haciendo las diferencias a mano\n\n\\[\\delta_{DiD}=(Y_{6,1931}-Y_{6,1930})-(Y_{8,1931}-Y_{8,1930})=19\\]\n\ndid_bank2 &lt;- lm(banks ~ treatment + post+ treatment*post,\n               data=filter(banks,year==1930 | year==1931))\n\n\nsummary(did_bank2)\n\n\nCall:\nlm(formula = banks ~ treatment + post + treatment * post, data = filter(banks, \n    year == 1930 | year == 1931))\n\nResiduals:\nALL 4 residuals are 0: no residual degrees of freedom!\n\nCoefficients:\n               Estimate Std. Error t value Pr(&gt;|t|)\n(Intercept)         165        NaN     NaN      NaN\ntreatment           -30        NaN     NaN      NaN\npost                -33        NaN     NaN      NaN\ntreatment:post       19        NaN     NaN      NaN\n\nResidual standard error: NaN on 0 degrees of freedom\nMultiple R-squared:      1, Adjusted R-squared:    NaN \nF-statistic:   NaN on 3 and 0 DF,  p-value: NA"
  },
  {
    "objectID": "diapositivas/did.html#violación-a-los-supuestos",
    "href": "diapositivas/did.html#violación-a-los-supuestos",
    "title": "Diferencia en diferencias",
    "section": "Violación a los supuestos",
    "text": "Violación a los supuestos\n\nConsideremos cosas que podrían salir mal con respecto al supuesto de tendencias paralelas\nSupongamos que un tratamiento ocurre en el periodo marcado con la línea vertical, por ejemplo, un cambio en una legislación\nEn este ejemplo algo sucedió en Allatsea que produjo un cambio en la trayectoria de mortalidad antes del cambio en la legislación\nEl supuesto de tendencias paralelas sí se sostenía hasta antes de este cambio\nSin embargo, nuestra estrategia de DID atribuiría el efecto al cambio en la legislación cuando en realidad cuando ese cambio ocurrió ya nole pasó nada a Allatsea"
  },
  {
    "objectID": "diapositivas/did.html#violación-a-los-supuestos-1",
    "href": "diapositivas/did.html#violación-a-los-supuestos-1",
    "title": "Diferencia en diferencias",
    "section": "Violación a los supuestos",
    "text": "Violación a los supuestos\n\nEn este segundo ejemplo, el supuesto de tendencias paralelas pre intervención se viola\nAunque en el momento del cambio de la política, la línea de Allatsea es más inclinada, estimar esta relación por DID de nuevo atribuiría a la política diferencias que ya existían antes de la intervención"
  },
  {
    "objectID": "diapositivas/did.html#violación-a-los-supuestos-2",
    "href": "diapositivas/did.html#violación-a-los-supuestos-2",
    "title": "Diferencia en diferencias",
    "section": "Violación a los supuestos",
    "text": "Violación a los supuestos\n\nEn este tercer ejemplo hay tendencias que no son paralelas pre intervención\nSin embargo, después de la intervención, la trayectoria de Allatsea tiene una pendiente claramente más inclinada que antes de la intervención"
  },
  {
    "objectID": "diapositivas/did.html#adopción-escalonada-en-la-antiguedad",
    "href": "diapositivas/did.html#adopción-escalonada-en-la-antiguedad",
    "title": "Diferencia en diferencias",
    "section": "Adopción escalonada en la antiguedad",
    "text": "Adopción escalonada en la antiguedad\n\nDID es uno de esos campos tan activos en la investigación que cosas que pensábamos superadas o completamente estudiadas se han modificado en los últimos años\nEn esta sección mostramos el tratamiento que MHE y MM dan a los problemas de adopción escalonada\nLa adopción escalonada ocurre cuando existen varios periodos de tratamiento y algunas unidades van siendo tratadas de forma desfasada\nPor ejemplo, en Méxio las leyes de despenalización del aborto o las que reconocen las uniones entre personas del mismo sexo son buenos ejemplos de tratamientos con adopción escalonada\nHasta los trabajos de Goodman-Bacon (2021) y Chaisemartin & D’Haultfœuille (2020), los problemas con adopción escalonada se abordaban econométricamente de la misma forma que hemos descrito hasta ahora, conocida como efectos fijos en bidireccionales (sí, suena horrible dicha traducción) o two-way fixed effects\nEsta sección presenta el tipo de tratamiento que hoy ya consideramos inapropiado\nMás adelante se presentan alternativas para los problemas de adopción escalonada"
  },
  {
    "objectID": "diapositivas/did.html#edad-legal-para-beber-en-eua",
    "href": "diapositivas/did.html#edad-legal-para-beber-en-eua",
    "title": "Diferencia en diferencias",
    "section": "Edad legal para beber en EUA",
    "text": "Edad legal para beber en EUA\n\nDiferencias en la edad legal para beber en Estados Unidos\n¿Las restricciones a la edad mínima para comprar alcohol tienen un impacto en la mortalidad?\nAlabama redujo la edad legal a 19 en 1975, mientras que, por ejemplo, Arkansas mantuvo la edad en 21\nTenemos datos de mortalidad de 1970 a 1983 para personas de entre 18 y 20 años\nLo que hemos aprendido hasta ahora nos sugiere estimar el impacto por DID comos sigue\n\n\\[y_{st}=\\alpha+\\beta T_s+\\gamma POST_t+\\delta_{DID}(T_s\\times POST_t)+e_{st}\\] - \\(T_s\\) es una dummy igual a 0 para Arkansas en todos los periodos e igual a 1 para Alabama en todos los periodos\n\n\\(POST_t\\) es igual a cero para el periodo 1970-1975 e igual a 1 para el periodo 1976-1983\n\\(T_s\\times POST_t\\) es igual a 1 para las observaciones de Alabama en los años en los que la nueva política ya está en vigor"
  },
  {
    "objectID": "diapositivas/did.html#más-de-un-estado",
    "href": "diapositivas/did.html#más-de-un-estado",
    "title": "Diferencia en diferencias",
    "section": "Más de un estado",
    "text": "Más de un estado\n\n¿Por qué quedarnos solo con la comparación con Arkansas?\nPodemos incluir más unidades que implementen cambios en la política en distintos momentos\nEn vez de \\(POST_t\\) usamos efectos fijos por año\nY en vez de una dummy de tratamiento, incluimos efectos fijos por unidad\nAdemás, en el cambio en la ley podría no ser el mismo\n\nAlgunos estados mueven la edad a 18, otros a 19 y otros a 20\nPodemos definir \\(LEGAL_{st}\\) como la proporción de individuos de entre 18 y 20 años autorizados para beber en el estado \\(s\\) y en el año \\(t\\)\n\n\n\\[y_{st}=\\alpha+\\delta_{DID}LEGAL_{st}+\\sum_k\\beta_k STATE_{ks}+\\sum_j \\gamma_j YEAR_{jt}+e_{st}\\]"
  },
  {
    "objectID": "diapositivas/did.html#estructura-de-datos-en-panel",
    "href": "diapositivas/did.html#estructura-de-datos-en-panel",
    "title": "Diferencia en diferencias",
    "section": "Estructura de datos en panel",
    "text": "Estructura de datos en panel\n\nLos datos que acabamos de describir tienen una estructura de panel\nLa variable de panel es el estado \\(s\\) y la variable de tiempo es el año \\(t\\)\nEn nuestros datos, cada estado se encuentra presente en varios años, y para cada estado y año sabemos la mortalidad y la fracción de personas de 18 a 20 años que pueden beber\nEfectos fijos \\(STATE_{ks}\\): diferencias entre estados que no cambian con el tiempo\nEfectos año \\(YEAR_{jt}\\): factores que afectan a todas las unidades por igual en un momento del tiempo"
  },
  {
    "objectID": "diapositivas/did.html#interpretación",
    "href": "diapositivas/did.html#interpretación",
    "title": "Diferencia en diferencias",
    "section": "Interpretación",
    "text": "Interpretación\n\n\n\nMuertes por 100,000 habs.:\n\\(\\hat{\\delta}_{DID}\\)\n\n\n\n\nTodas\n10.80\n\n\n\n(4.59)\n\n\nAccidentes en vehículos\n7.59\n\n\n\n(2.50)\n\n\nSuicidio\n0.59\n\n\n\n(0.59)\n\n\nCausas internas\n1.33\n\n\n\n(1.59)\n\n\n\n\nLa interpretación de los resultados es directa\nEl acceso a alcohol causa un incremento de casi 11 muertes adicionales por cada 100,000 habitantes y este efecto es estadísticamente significativo\nNo hay efectos donde no esperaríamos tenerlos"
  },
  {
    "objectID": "diapositivas/index.html",
    "href": "diapositivas/index.html",
    "title": "Diapositivas",
    "section": "",
    "text": "Diferencia en diferencias\nMétodos de emparejamiento",
    "crumbs": [
      "Diapositivas"
    ]
  },
  {
    "objectID": "lecturas.html",
    "href": "lecturas.html",
    "title": "Lecturas",
    "section": "",
    "text": "Las lecturas obligatorias (marcadas con “*”) permiten una discusión informada en la clase. Las lecturas que serán presentadas en exposiciones también son obligatorias y están marcadas con “+”. El resto de las lecturas no serán cubiertas en clase, pero son ampliamente recomendables. En las sesiones de exposiciones se espera que el resto de la clase tenga el conocimiento suficiente sobre el material presentado para participar en la discusión.",
    "crumbs": [
      "Lecturas"
    ]
  },
  {
    "objectID": "lecturas.html#semana-1",
    "href": "lecturas.html#semana-1",
    "title": "Lecturas",
    "section": "Semana 1",
    "text": "Semana 1\n\nDiseño y econometría\n\n* Freedman, D. A. (1991). Statistical models and shoe leather. Sociological methodology, 291-313.\n* Athey, S., & Imbens, G. W. (2017). The state of applied econometrics: Causality and policy evaluation. Journal of Economic Perspectives, 31(2), 3-32.\nHeckman, J. J. (2001). Micro data, heterogeneity, and the evaluation of public policy: Nobel lecture. Journal of political Economy, 109(4), 673-748.\n\nHeckman, J. J., & Vytlacil, E. J. (2007). Econometric evaluation of social programs, part I: Causal models, structural models and econometric policy evaluation. Handbook of econometrics, 6, 4779-4874.\n\nInferencia causal\n\nGMPRV, Capítulo 3\n\n* MHE, Capítulo 2 (The Experimental Ideal)\nMT, Capítulo 4 (Potential Outcomes Model)",
    "crumbs": [
      "Lecturas"
    ]
  },
  {
    "objectID": "lecturas.html#semana-2",
    "href": "lecturas.html#semana-2",
    "title": "Lecturas",
    "section": "Semana 2",
    "text": "Semana 2\n\nEvaluación por métodos experimentales\n\n* CT, Capítulo 25, Secciones 1, 2\n\nGMPRV, Capítulo 4\n\nCT, Capítulo 25, Sección 3\n\nRevisión de métodos de regresión\n\n* MHE, Capítulo 3 (Making Regression Make Sense)\nMM, Capítulo 2 (Regression)\n\nTransparencia y replicabilidad\n\n* Christensen, G., & Miguel, E. (2018). Transparency, reproducibility, and the credibility of economics research. Journal of Economic Literature, 56(3), 920-80.",
    "crumbs": [
      "Lecturas"
    ]
  },
  {
    "objectID": "lecturas.html#semana-3",
    "href": "lecturas.html#semana-3",
    "title": "Lecturas",
    "section": "Semana 3",
    "text": "Semana 3\n\nInferencia estadística\n\n* MM, Capítulo 1 (Randomized Trials), Apéndice (Mastering Inference)\nMT, Capítulo 2 (Probability and Regression Review)\n\nErrores estándar no estándar\n\nAbadie, A., Athey, S., Imbens, G. W., & Wooldridge, J. M. (2023). When should you adjust standard errors for clustering?. The Quarterly Journal of Economics, 138(1), 1-35.\n* MHE, Capítulo 8 (Nonstandard Standard Errors Issues)\nCameron, A. C., & Miller, D. L. (2015). A practitioner’s guide to cluster-robust inference. Journal of Human Resources, 50(2), 317-372.\nStock, J. H. (2010). The other transformation in econometric practice: Robust tools for inference. Journal of Economic Perspectives, 24(2), 83-94.",
    "crumbs": [
      "Lecturas"
    ]
  },
  {
    "objectID": "lecturas.html#semana-4",
    "href": "lecturas.html#semana-4",
    "title": "Lecturas",
    "section": "Semana 4",
    "text": "Semana 4\n\nAplicaciones de evaluaciones experimentales\n\n+ Arceo-Gomez, E. O., & Campos-Vazquez, R. M. (2014). Race and marriage in the labor market: A discrimination correspondence study in a developing country. American Economic Review, 104(5), 376-80.\n+ Ascencio, S. J., & Chang, H. I. (2024). Do primaries improve evaluations of public officials? Experimental evidence from Mexico. Political Behavior, 1-22.\nBaird, S., McIntosh, C., & Özler, B. (2011). Cash or condition? Evidence from a cash transfer experiment. The Quarterly journal of economics, 126(4), 1709-1753.\n\n* Banerjee, A., Duflo, E., Goldberg, N., Karlan, D., Osei, R., Parienté, W., Shapiro, J., Thuysbaert, B. & Udry, C. (2015). A multifaceted program causes lasting progress for the very poor: Evidence from six countries. Science, 348(6236), 1260799.\nBlattman, C., Emeriau, M., & Fiala, N. (2018). Do anti-poverty programs sway voters? Experimental evidence from Uganda. Review of Economics and Statistics, 100(5), 891-905.\n+ Bruhn, M., Karlan, D., & Schoar, A. (2018). The impact of consulting services on small and medium enterprises: Evidence from a randomized trial in Mexico. Journal of Political Economy, 126(2), 635-687.\n+ Davies, E., Deffebach, P., Iacovone, L., & Mckenzie, D. (2024). Training microentrepreneurs over Zoom: Experimental evidence from Mexico. Journal of Development Economics, 167, 103244.\n+ De La O, A. L., Fernández-Vázquez, P. & García, F. M. (2023). Federal and state audits do not increase compliance with a grant program to improve municipal infrastructure: A pre-registered field experiment. Journal of Development Economics, 162, 103043.\nDuflo, E., Dupas, P., & Kremer, M. (2015). Education, HIV, and early fertility: Experimental evidence from Kenya. American Economic Review, 105(9), 2757-97.\n\nDupas, P. (2011). Do teenagers respond to HIV risk information? Evidence from a field experiment in Kenya. American Economic Journal: Applied Economics, 3(1), 1-34.\n\n+ Gertler, P. (2004). Do conditional cash transfers improve child health? Evidence from PROGRESA’s control randomized experiment. American economic review, 94(2), 336-341.\n+ Hoyos, R. D., Attanasio, O., & Meghir, C. (2024). Targeting high school scholarships to the poor: the impact of a program in Mexico. Economic Development and Cultural Change, 72(4), 1747-1768.\nLondoño-Vélez, J., & Querubin, P. (2022). The Impact of Emergency Cash Assistance in a Pandemic: Experimental Evidence from Colombia. The Review of Economics and Statistics, 1-27\nMartínez A, C., Puentes, E., & Ruiz-Tagle, J. (2018). The effects of micro-entrepreneurship programs on labor market performance: experimental evidence from Chile. American Economic Journal: Applied Economics, 10(2), 101-24.\nMousa, S. (2020). Building social cohesion between Christians and Muslims through soccer in post-ISIS Iraq. Science, 369(6505), 866-870.\n\nPoertner, M. (2023). Does Political Representation Increase Participation? Evidence from Party Candidate Lotteries in Mexico. American Political Science Review, 117(2), 537-556.\n+ Sadka, J., Seira, E., & Woodruff, C. (2024). Information and Bargaining through Agents: Experimental Evidence from Mexico’s Labour Courts. Review of Economic Studies, rdae003.\n+ Seira, E., Elizondo, A., & Laguna-Müggenburg, E. (2017). Are information disclosures effective? evidence from the credit card market. American Economic Journal: Economic Policy, 9(1), 277-307.\n\n+ Tagliati, F. (2022). Welfare effects of an in-kind transfer program: Evidence from Mexico. Journal of Development Economics, 154, 102753.",
    "crumbs": [
      "Lecturas"
    ]
  },
  {
    "objectID": "lecturas.html#semana-5",
    "href": "lecturas.html#semana-5",
    "title": "Lecturas",
    "section": "Semana 5",
    "text": "Semana 5\n\nLATE y variables instrumentales\n\nCT, Capítulo 25, Sección 7\n\nGMPRV, Capítulo 5\n\nMHE, Capítulo 4 (Instrumental Variables in Action)\n\n* MM, Capítulo 3 (Instrumental Variables)\nMT, Capítulo 7 (Instrumental Variables)\n\nCorrección por prueba de múltiples hipótesis\n\n* Angelucci, M., Karlan, D., & Zinman, J. (2015). Microcredit impacts: Evidence from a randomized microcredit program placement experiment by Compartamos Banco. American Economic Journal: Applied Economics, 7(1), 151-82.\n* Benjamini, Y., & Hochberg, Y. (1995). Controlling the false discovery rate: a practical and powerful approach to multiple testing. Journal of the royal statistical society. Series B (Methodological), 289-300.\n\nBrodeur, A., Lé, M., Sangnier, M., & Zylberberg, Y. (2016). Star Wars: The empirics strike back. American Economic Journal: Applied Economics, 8(1), 1-32.\n\nSavin, N. E. (1984). Multiple hypothesis testing. Handbook of econometrics, 2, 827-879.\n\n* Shaffer, J. P. (1995). Multiple hypothesis testing. Annual review of psychology, 46(1), 561-584.\n\nANCOVA\n\n* McKenzie, D. (2012). Beyond baseline and follow-up: The case for more T in experiments. Journal of development Economics, 99(2), 210-221.\nRojas Valdes, R.I., Wydick, B., & Lybbert, T.J. (2021). Can Hope Elevate Microfinance? Evidence from Oaxaca, Mexico. Oxford Economic Papers.",
    "crumbs": [
      "Lecturas"
    ]
  },
  {
    "objectID": "lecturas.html#semana-6",
    "href": "lecturas.html#semana-6",
    "title": "Lecturas",
    "section": "Semana 6",
    "text": "Semana 6\n\nAplicaciones LATE\n\nAngrist, J. D. (1990). Lifetime earnings and the Vietnam era draft lottery: evidence from social security administrative records. The American Economic Review, 313-336.\n\n* Angrist, J. D. (2006). Instrumental variables methods in experimental criminological research: what, why and how. Journal of Experimental Criminology, 2(1), 23-44.\n\nAngrist, J. D., Imbens, G., & Rubin, D. B. (1996). Identification of causal effects using instrumental variables. Journal of the American statistical Association, 91(434), 444-455.\n\n* Crépon, B., Devoto, F., Duflo, E., & Parienté, W. (2015). Estimating the impact of microcredit on those who take it up: Evidence from a randomized experiment in Morocco. American Economic Journal: Applied Economics, 7(1), 123-50.\n\nDevoto, F., Duflo, E., Dupas, P., Parienté, W., & Pons, V. (2012). Happiness on tap: Piped water adoption in urban Morocco. American Economic Journal: Economic Policy, 4(4), 68-99.\n+ De La O, A. L. (2013). Do conditional cash transfers affect electoral behavior? Evidence from a randomized experiment in Mexico. American Journal of Political Science, 57(1), 1-14.\n\n+ Gonzalez-Navarro, M., & Quintana-Domeque, C. (2016). Paving streets for the poor: Experimental analysis of infrastructure effects. Review of Economics and Statistics, 98(2), 254-267.\nHeckman, J. J., & Vytlacil, E. J. (2007). Econometric evaluation of social programs, part II: Using the marginal treatment effect to organize alternative econometric estimators to evaluate social programs, and to forecast their effects in new environments. Handbook of econometrics, 6, 4875-5143.\n\nImbens, G. W., & Angrist, J. D. (1994). Identification and estimation of local average treatment effects. Econometrica (1986-1998), 62(2), 467.\nKling, J. R., Liebman, J. B., & Katz, L. F. (2007). Experimental analysis of neighborhood effects. Econometrica, 75(1), 83-119.\n\nDiferencia en diferencias\n\nCT, Capítulo 25, Sección 25.5\nGMPRV, Capítulo 7\n\n* MM, Capítulo 5 (Differences-in-differences)\nMT, Capítulo 9 (Difference in differences), secciones 1 a 5\n\nDID desfasado\n\n* MT, Capítulo 9 (Difference in differences), sección 9.6\nBaker, A. C., Larcker, D. F., & Wang, C. C. (2022). How much should we trust staggered difference-in-differences estimates?. Journal of Financial Economics, 144(2), 370-395.\nCallaway, B., & Sant’Anna, P. H. (2021). Difference-in-differences with multiple time periods. Journal of Econometrics, 225(2), 200-230.\nGoodman-Bacon, A. (2021). Difference-in-differences with variation in treatment timing. Journal of Econometrics, 225(2), 254-277.\nMarcus, M., & Sant’Anna, P. H. (2021). The role of parallel trends in event study settings: An application to environmental economics. Journal of the Association of Environmental and Resource Economists, 8(2), 235-275.\n* Roth, J., Sant’Anna, P. H., Bilinski, A., & Poe, J. (2023). What’s Trending in Difference-in-Differences? A Synthesis of the Recent Econometrics Literature. Journal of Econometrics, 235(2), 2218-2244.",
    "crumbs": [
      "Lecturas"
    ]
  },
  {
    "objectID": "lecturas.html#semana-8",
    "href": "lecturas.html#semana-8",
    "title": "Lecturas",
    "section": "Semana 8",
    "text": "Semana 8\n\nAplicaciones de DID\n\n* Bertrand, M., Duflo, E., & Mullainathan, S. (2004). How much should we trust differences-in-differences estimates? The Quarterly journal of economics, 119(1), 249-275.\n+ Boruchowicz, C., Parker, S. W., & Robbins, L. (2022). Time use of youth during a pandemic: Evidence from Mexico. World Development, 149, 105687.\n+ Cabrera-Hernández, F., Padilla-Romo, M., & Peluffo, C. (2023). Full-time schools and educational trajectories: Evidence from high-stakes exams. Economics of Education Review, 96, 102443.\nCampos, R. M., Esquivel, G., & Santillán, A. S. (2017). El impacto del salario mínimo en los ingresos y el empleo en México. Revista CEPAL.\n* Card, D. (1990). The impact of the Mariel boatlift on the Miami labor market. ILR Review, 43(2), 245-257.\n+ Chort, I., & Öktem, B. (2024). Agricultural shocks, coping policies and deforestation: Evidence from the coffee leaf rust epidemic in Mexico. American Journal of Agricultural Economics, 106(3), 1020-1057.\n+ Djourelova, M. (2023). Persuasion through Slanted Language: Evidence from the Media Coverage of Immigration. American Economic Review, 113(3), 800-835.\n+ Conti, G., & Ginja, R. (2023). Who Benefits from Free Health Insurance?: Evidence from Mexico. Journal of Human Resources, 58(1), 146-182.\n* Card, D., & Krueger, A. B. (2000). Minimum wages and employment: a case study of the fast-food industry in New Jersey and Pennsylvania: reply. American Economic Review, 0(5), 1397-1420.\nChen, H., Qian, W., & Wen, Q. (2021). The impact of the COVID-19 pandemic on consumption: Learning from high-frequency transaction data. AEA Papers and Proceedings, 111, 307-11.\n+ Clarke, D., & Mühlrad, H. (2021). Abortion laws and women’s health. Journal of Health Economics, 76, 102413.\n+ Gutiérrez Vázquez, E. Y., & Parrado, E. A. (2016). Abortion legalization and childbearing in Mexico. Studies in family planning, 47(2), 113-128.\n\nQian, N. (2008). Missing women and the price of tea in China: The effect of sex-specific earnings on sex imbalance. The Quarterly Journal of Economics, 123(3), 1251-1285.\nWolfers, J. (2006). Did unilateral divorce laws raise divorce rates? A reconciliation and new results. American Economic Review, 96(5), 1802-1820.\nZhang, R., Li, Y., Zhang, A. L., Wang, Y., & Molina, M. J. (2020). Identifying airborne transmission as the dominant route for the spread of COVID-19. Proceedings of the National Academy of Sciences.",
    "crumbs": [
      "Lecturas"
    ]
  },
  {
    "objectID": "lecturas.html#semana-9",
    "href": "lecturas.html#semana-9",
    "title": "Lecturas",
    "section": "Semana 9",
    "text": "Semana 9\n\nMétodos de pareamiento\n\nGMPRV, Capítulo 8\n* MH, Capítulo 3, Sección 3.3\n* MT, Capítulo 5\n\nDiseños con discontinuidades\n\nGMPRV, Capítulo 6\n\nDiscontinuidades nítidas y difusas\n\nMHE, Capítulo 6\n\n* MM, Capítulo 4\n* MT, Capítulo 6",
    "crumbs": [
      "Lecturas"
    ]
  },
  {
    "objectID": "lecturas.html#semana-10",
    "href": "lecturas.html#semana-10",
    "title": "Lecturas",
    "section": "Semana 10",
    "text": "Semana 10\n\nAplicaciones del PSM\n\nAbadie, A., & Imbens, G. W. (2016). Matching on the estimated propensity score. Econometrica, 84(2), 781-807.\n\nAngrist, J., Estimating the Labor Market Impact of Voluntary Military Service Using Social Security Data on Military Applicants, Econometrica 66(2), 1998, 249-288.\n+ Becerril, J., & Abdulai, A. (2010). The impact of improved maize varieties on poverty in Mexico: a propensity score-matching approach. World development, 38(7), 1024-1035.\n* Caliendo, M., & Kopeinig, S. (2008). Some practical guidance for the implementation of propensity score matching. Journal of economic surveys, 22(1), 31-72.\n\n+ Chang, A., Miranda-Moreno, L., Cao, J., & Welle, B. (2017). The effect of BRT implementation and streetscape redesign on physical activity: A case study of Mexico City. Transportation Research Part A: Policy and Practice, 100, 337-347.\n\n* Dehejia, R. H., & Wahba, S. (1999). Causal effects in nonexperimental studies: Reevaluating the evaluation of training programs. Journal of the American statistical Association, 94(448), 1053-1062.\n+ Diaz, J. J., & Handa, S. (2006). An assessment of propensity score matching as a nonexperimental impact estimator evidence from Mexico’s PROGRESA program. Journal of human resources, 41(2), 319-345.\n+ Espinosa, V., & Rubin, D. B. (2015). Did the military interventions in the Mexican drug war increase violence?. The American Statistician, 69(1), 17-27.\n+ García-Díaz, R., Sosa-Rubí, S. G., Serván-Mori, E., & Nigenda, G. (2018). Welfare effects of health insurance in Mexico: The case of Seguro Popular de Salud. PloS one, 13(7), e0199876.\n\n* LaLonde, R. J. (1986). Evaluating the econometric evaluations of training programs with experimental data. The American economic review, 604-620.\nWellalage, N. H., & Locke, S. (2020). Remittance and financial inclusion in refugee migrants: inverse probability of treatment weighting using the propensity score. Applied Economics, 52(9), 929-950.\n+ Stabridis, O., & Salgado-Viveros, C. (2023). Efectos de género y etnicidad en la brecha salarial entre jornaleros agrícolas del noroeste mexicano. Frontera Norte, 35.",
    "crumbs": [
      "Lecturas"
    ]
  },
  {
    "objectID": "lecturas.html#semana-11",
    "href": "lecturas.html#semana-11",
    "title": "Lecturas",
    "section": "Semana 11",
    "text": "Semana 11\n\nControl sintético\n\n* MT, Capítulo 10\n* Abadie, A. (2019). Using synthetic controls: Feasibility, data requirements, and methodological aspects. Journal of Economic Literature.\n* Abadie, A., Diamond, A., & Hainmueller, J. (2010). Synthetic control methods for comparative case studies: Estimating the effect of California’s tobacco control program. Journal of the American statistical Association, 105(490), 493-505.\n+ Abadie, A., Diamond, A., & Hainmueller, J. (2015). Comparative politics and the synthetic control method. American Journal of Political Science, 59(2), 495-510.",
    "crumbs": [
      "Lecturas"
    ]
  },
  {
    "objectID": "lecturas.html#semana-12",
    "href": "lecturas.html#semana-12",
    "title": "Lecturas",
    "section": "Semana 12",
    "text": "Semana 12\n\nAplicaciones de diseños con discontinuidades\n\nAbdulkadiroğlu, A., Angrist, J., & Pathak, P. (2014). The elite illusion: Achievement effects at Boston and New York exam schools. Econometrica, 82(1), 137-196.\n+ Aguilar, A., Gutierrez, E., & Seira, E. (2021). The effectiveness of sin food taxes: Evidence from Mexico. Journal of Health Economics, 77, 102455.\n+ Alix-Garcia, J., McIntosh, C., Sims, K. R., & Welch, J. R. (2013). The ecological footprint of poverty alleviation: evidence from Mexico’s Oportunidades program. Review of Economics and Statistics, 95(2), 417-435.\nAnagol, S., & Fujiwara, T. (2016). The runner-up effect. Journal of Political Economy, 124(4), 927-991.\nAngrist, J. D., & Lavy, V. (1999). Using Maimonides’ rule to estimate the effect of class size on scholastic achievement. The Quarterly Journal of Economics, 114(2), 533-575.\nBagues, M., & Campa, P. (2021). Can gender quotas in candidate lists empower women? Evidence from a regression discontinuity design. Journal of Public Economics, 194, 104315.\nBosch, M., & Schady, N. (2019). The effect of welfare payments on work: Regression discontinuity evidence from Ecuador. Journal of Development Economics, 139, 17-27.\n\nCalonico, S., Cattaneo, M. D., Farrell, M. H., & Titiunik, R. (2019). Regression discontinuity designs using covariates. Review of Economics and Statistics, 101(3), 442-451.\n\n+ Cañedo, A. P., Fabregas, R., & Gupta, P. (2023). Emergency cash transfers for informal workers: Impact evidence from Mexico. Journal of Public Economics, 219, 104820.\nCard, D., Dobkin, C., & Maestas, N. (2009). Does Medicare save lives? The quarterly journal of economics, 124(2), 597-636.\n\nCarpenter, C., & Dobkin, C. (2009). The effect of alcohol consumption on mortality: regression discontinuity evidence from the minimum drinking age. American Economic Journal: Applied Economics, 1(1), 164-82.\n\nCook, T. D., & Wong, V. C. (2008). Empirical tests of the validity of the regression discontinuity design. Annales d’Economie et de Statistique, 127-150.\n\n+ Davis, L. W. (2008). The effect of driving restrictions on air quality in Mexico City. Journal of Political Economy, 116(1), 38-81.\n\n+ Davis, L. W. (2017). Saturday driving restrictions fail to improve air quality in Mexico City. Scientific Reports, 7, 41652.\n+ Del Valle, A., de Janvry, A., & Sadoulet, E. (2020). Rules for recovery: Impact of indexed disaster funds on shock coping in Mexico. American Economic Journal: Applied Economics, 12(4), 164-95.\n+ Del Valle, A. (2024). Saving Lives with Indexed Disaster Funds: Evidence from Mexico. American Economic Journal: Economic Policy, 16(2), 442-479.\n+ Dell, M. (2015). Trafficking networks and the Mexican drug war. American Economic Review, 105(6), 1738-79.\n+ Goodwin, M. B., Gonzalez, F., & Fontenla, M. (2024). The impact of daylight saving time in Mexico. Applied Economics, 56(1), 22-32.\n* Lee, D. S., & Lemieux, T. (2010). Regression discontinuity designs in economics. Journal of economic literature, 48(2), 281-355.\nMacPherson, C., & Sterck, O. (2021). Empowering refugees through cash and agriculture: A regression discontinuity design. Journal of Development Economics, 149, 102614.\nMakarin, A., Pique, R., & Aragón, F. (2020). National or sub-national parties: Does party geographic scope matter? Journal of Development Economics, 102516.\n\n* Manacorda, M., Miguel, E., & Vigorito, A. (2011). Government transfers and political support. American Economic Journal: Applied Economics, 3(3), 1-28.\n\nMoussa, W., Salti, N., Irani, A., Al Mokdad, R., Jamaluddine, Z., Chaaban, J., & Ghattas, H. (2022). The impact of cash transfers on Syrian refugee children in Lebanon. World Development, 150, 105711.\n+ Sierra, G. D. R., Martínez, A. A. G., Cruz, M. Á. M., & Barrientos, L. G. Z. (2024). The impact of subsidies on house prices in Mexico’s mortgage market for low-income households 2008–2019. Journal of Housing Economics, 63, 101970.\nSohn, H., & Lee, S. W. (2019). Causal Impact of Having a College Degree on Women’s Fertility: Evidence From Regression Kink Designs. Demography, 56(3), 969-990.\nTakaku, R., & Yokoyama, I. (2021). What the COVID-19 school closure left in its wake: evidence from a regression discontinuity analysis in Japan. Journal of Public Economics, 195, 104364.\nTuttle, C. (2019). Snapping Back: Food Stamp Bans and Criminal Recidivism. American Economic Journal: Economic Policy, 11(2), 301-27.\n\nAplicaciones de discontinuidades geográficas\n\nGonzalez, R. M. (2021). Cell Phone Access and Election Fraud: Evidence from a Spatial Regression Discontinuity Design in Afghanistan. American Economic Journal: Applied Economics, 13(2), 1-51.\n* Keele, L. J., & Titiunik, R. (2015). Geographic boundaries as regression discontinuities. Political Analysis, 23(1), 127-155.\nKeele, L., & Titiunik, R. (2016). Natural experiments based on geography. Political Science Research and Methods, 4(1), 65-95.\n\nPliegues en la regresión\n\nGamba, S., Jakobsson, N., & Svensson, M. (2022). The impact of cost-sharing on prescription drug demand: evidence from a double-difference regression kink design. The European Journal of Health Economics, 1-9.\nCard, D., Lee, D. S., Pei, Z., & Weber, A. (2017). Regression kink design: Theory and practice. NBER Working Paper 22781.\n\nLurie, I. Z., Sacks, D. W., & Heim, B. (2021). Does the individual mandate affect insurance coverage? Evidence from tax returns. American Economic Journal: Economic Policy, 13(2), 378-407.",
    "crumbs": [
      "Lecturas"
    ]
  },
  {
    "objectID": "lecturas.html#semana-13",
    "href": "lecturas.html#semana-13",
    "title": "Lecturas",
    "section": "Semana 13",
    "text": "Semana 13\n\nAplicaciones de control sintético\n\nAbsher, S., Grier, K., & Grier, R. (2020). The economic consequences of durable left-populist regimes in Latin America. Journal of Economic Behavior & Organization, 177, 787-817.\n\n* Acemoglu, D., Johnson, S., Kermani, A., Kwak, J., & Mitton, T. (2016). The value of connections in turbulent times: Evidence from the United States. Journal of Financial Economics, 121(2), 368-391.\nAlfano, V., Ercolano, S., & Cicatiello, L. (2021). School openings and the COVID-19 outbreak in Italy. A provincial-level analysis using the synthetic control method. Health Policy.\nArkhangelsky, D., Athey, S., Hirshberg, D. A., Imbens, G. W., & Wager, S. (2021). Synthetic difference-in-differences. American Economic Review, 111(12), 4088-4118.\n+ Boly, M., & Sanou, A. (2022). Biofuels and food security: Evidence from Indonesia and Mexico. Energy Policy, 163, 112834.\nBotosaru, I., & Ferman, B. (2019). On the role of covariates in the synthetic control method. The Econometrics Journal, 22(2), 117-130.\n\nCalderón, G., Robles, G., Díaz-Cayeros, A., & Magaloni, B. (2015). The beheading of criminal organizations and the dynamics of violence in Mexico. Journal of Conflict Resolution, 59(8), 1455-1485.\n\n+ Campos-Vazquez, R. M., & Esquivel, G. (2020). The effect of doubling the minimum wage and decreasing taxes on inflation in Mexico. Economics Letters, 109051.\n\n+ Campos-Vazquez, R. M., & Esquivel, G. (2023). The Effect of the Minimum Wage on Poverty: Evidence from a Quasi-Experiment in Mexico. The Journal of Development Studies, 59(3), 360-380.\n+ Cepeda-Francese, C. A., & Ramírez-Álvarez, A. A. (2023). Reforming justice under a security crisis: The case of the criminal justice reform in Mexico. World Development, 163, 106148.\nGeloso, V., & Pavlik, J. B. (2021). The Cuban revolution and infant mortality: A synthetic control approach. Explorations in Economic History, 80, 101376.\nGrier, K., & Maynard, N. (2016). The economic consequences of Hugo Chavez: A synthetic control analysis. Journal of Economic Behavior & Organization, 125, 1-21.\n+ González-Rozada, M., & Ruffo, H. (2024). Do trade agreements contribute to the decline in labor share? Evidence from Latin American countries. World Development, 177, 106561.\nMitze, T., Kosfeld, R., Rode, J., & Wälde, K. (2020). Face masks considerably reduce COVID-19 cases in Germany. Proceedings of the National Academy of Sciences, 117(51), 32293-32301.\nPeri, G., & Yasenov, V. (2019). The Labor Market Effects of a Refugee Wave Synthetic Control Method Meets the Mariel Boatlift. Journal of Human Resources, 54(2), 267-309.",
    "crumbs": [
      "Lecturas"
    ]
  },
  {
    "objectID": "lecturas.html#semana-14",
    "href": "lecturas.html#semana-14",
    "title": "Lecturas",
    "section": "Semana 14",
    "text": "Semana 14\n\nAprendizaje automático y big data\n\nAthey, S. (2017). Beyond prediction: Using big data for policy problems. Science, 355(6324), 483-485.\n\n* Athey, S., & Imbens, G. W. (2019). Machine learning methods that economists should know about. Annual Review of Economics, 11.\n+ Baiardi, A., & Naghi, A. A. (2021). The value added of machine learning to causal inference: Evidence from revisited studies. arXiv preprint arXiv:2101.00878.\nChetty, R. (2021). Improving equality of opportunity: New insights from big data. Contemporary Economic Policy, 39(1), 7-41.\nChernozhukov, V., Chetverikov, D., Demirer, M., Duflo, E., Hansen, C., Newey, W., & Robins, J. (2018). Double/debiased machine learning for treatment and structural parameters. Econometrics Journal, 21(1), pp. C1–C68.\n+ Chernozhukov, V., Demirer, M., Duflo, E., & Fernandez-Val, I. (2018). Generic machine learning inference on heterogeneous treatment effects in randomized experiments, with an application to immunization in India. Woring Paper No. w24678. National Bureau of Economic Research.\nCole, M. A., Elliott, R. J., & Liu, B. (2020). The impact of the Wuhan Covid-19 lockdown on air pollution and health: a machine learning and augmented synthetic control approach. Environmental and Resource Economics, 76(4), 553-580.\nDell, M. (2024). Deep Learning for Economists. arXiv preprint arXiv:2407.15339.\nNaimi, A. I., Mishler, A. E., & Kennedy, E. H. (2017). Challenges in obtaining valid causal effect estimates with machine learning algorithms. ArXiv preprint 1711.07137.\nStorm, H., Baylis, K., & Heckelei, T. (2020). Machine learning in agricultural and applied economics. European Review of Agricultural Economics, 47(3), 849-892.\nTorrats-Espinosa, G. (2021). Using machine learning to estimate the effect of racial segregation on COVID-19 mortality in the United States. Proceedings of the National Academy of Sciences, 118(7).\n+ Wager, S., & Athey, S. (2018). Estimation and inference of heterogeneous treatment effects using random forests. Journal of the American Statistical Association, 113(523), 1228-1242.\n* Varian, H. R. (2014). Big data: New tricks for econometrics. Journal of Economic Perspectives, 28(2), 3-28",
    "crumbs": [
      "Lecturas"
    ]
  },
  {
    "objectID": "lecturas.html#otras-lecturas-sobre-temas-no-cubiertos-en-el-curso",
    "href": "lecturas.html#otras-lecturas-sobre-temas-no-cubiertos-en-el-curso",
    "title": "Lecturas",
    "section": "Otras lecturas sobre temas no cubiertos en el curso",
    "text": "Otras lecturas sobre temas no cubiertos en el curso\n\nMás allá de los experimentos\n\nBarrett, C. B., & Carter, M. R. (2010). The power and pitfalls of experiments in development economics: Some non-random reflections. Applied economic perspectives and policy, 32(4), 515-548.\n\nBarrett, C. B., & Carter, M. R. (2020). Finding our balance? Revisiting the randomization revolution in development economics ten years further on. World Development, 127, 104789.\n\nHjort, J., Moreira, D., Rao, G., & Santini, J. F. (2021). How research affects policy: Experimental evidence from 2,150 Brazilian municipalities. American Economic Review, 111(5), 1442-80.\nDeaton, A., Case. (2019). Randomization in the tropics revisited: a theme and eleven variations. In Randomized controlled trials in the field of development: A critical perspective. Oxford University Press. Forthcoming.\n\nRavallion, Martin. (2020). Should the randomistas (continue to) rule? National Bureau of Economic Research, Working Paper 27554.\n\nModelos estructurales en evaluación\n\nAbbring, J. H., & Heckman, J. J. (2007). Econometric evaluation of social programs, part III: Distributional treatment effects, dynamic treatment effects, dynamic discrete choice, and general equilibrium policy evaluation. Handbook of econometrics, 6, 5145-5303.\n\nAttanasio, O. P., Meghir, C., & Santiago, A. (2011). Education choices in Mexico: using a structural model and a randomized experiment to evaluate Progresa. The Review of Economic Studies, 79(1), 37-66.\n\nDuflo, E., Hanna, R., & Ryan, S. P. (2012). Incentives work: Getting teachers to come to school. American Economic Review, 102(4), 1241-78.}\nHamilton, B. H., Hincapié, A., Miller, R. A., & Papageorge, N. W. (2018). Innovation and Diffusion of Medical Treatment. National Bureau of Economic Working Paper 24577.\n\nKeane, M. P. (2010). A structural perspective on the experimentalist school. Journal of Economic Perspectives, 24(2), 47-58.\nKeane, M. P., Todd, P. E., & Wolpin, K. I. (2011). The structural estimation of behavioral models: Discrete choice dynamic programming methods and applications. In Handbook of labor economics (Vol. 4, pp. 331-461). Elsevier.\n\nLow, H., & Meghir, C. (2017). The use of structural models in econometrics. Journal of Economic Perspectives, 31(2), 33-58.\nMa, X., Lawell, C. Y. L., & Rozelle, S. (2020). Peer effects and the use of subsidized goods: A structural econometric model of a health promotion program in rural China. Working paper, Cornell University.\n\nNevo, A., & Whinston, M. D. (2010). Taking the dogma out of econometrics: Structural modeling and credible inference. Journal of Economic Perspectives, 24(2), 69-82.\n\nTodd, P. E., & Wolpin, K. I. (2010). Structural estimation and policy evaluation in developing countries. Annu. Rev. Econ., 2(1), 21-50.\nWolpin, K. I. (2013). The limits of inference without theory. MIT Press.\n\nEvaluaciones de impacto a nivel de economía local (LEWIE)\n\nTaylor, J. E., Dyer, G. A., Stewart, M., Yunez-Naude, A., & Ardila, S. (2003). The economics of ecotourism: A Galápagos Islands economy-wide perspective. Economic Development and Cultural Change, 51(4), 977-997.\nTaylor, J. E., & Filipski, M. J. (2014). Beyond experiments in development economics: Local economy-wide impact evaluation. Oxford University Press.\nTaylor, J. E., Filipski, M. J., Alloush, M., Gupta, A., Rojas Valdes, R.I., & Gonzalez-Estrada, E. (2016). Economic impact of refugees. Proceedings of the National Academy of Sciences, 201604566.\n\nCombinación de metodologías no experimentales\n\nCattaneo, M. D., Frandsen, B. R., & Titiunik, R. (2015). Randomization inference in the regression discontinuity design: An application to party advantages in the US Senate. Journal of Causal Inference, 3(1), 1-24.\n\nDonohue III, J. J., & Ho, D. E. (2007). The Impact of Damage Caps on Malpractice Claims: Randomization Inference with Difference‐in‐Differences. Journal of Empirical Legal Studies, 4(1), 69-102.\n\nKeele, L., Titiunik, R., & Zubizarreta, J. R. (2015). Enhancing a geographic regression discontinuity design through matching to estimate the effect of ballot initiatives on voter turnout. Journal of the Royal Statistical Society. Series A (Statistics in Society), 223-239.\n\nLevasseur, P. (2019). Can social programs break the vicious cycle between poverty and obesity? Evidence from urban Mexico. World Development, 113, 143-156.\n\nMacKinnon, J. G., & Webb, M. D. (2020). Randomization inference for difference-in-differences with few treated clusters. Journal of Econometrics.\n\nParker, S. W., Saenz, J., & Wong, R. (2018). Health insurance and the aging: Evidence from the Seguro Popular program in Mexico. Demography, 55(1), 361-386.\nSant’Anna, P. H., & Zhao, J. (2020). Doubly robust difference-in-differences estimators. Journal of Econometrics, 219(1), 101-122.\n\nImpactos de largo plazo\n\nAthey, S., Chetty, R., Imbens, G. W., & Kang, H. (2019). The surrogate index: Combining short-term proxies to estimate long-term treatment effects more rapidly and precisely, National Bureau of Economic Research, Working Paper 26463.\nHamory, J., Miguel, E., Walker, M., Kremer, M., & Baird, S. (2021). Twenty-year economic impacts of deworming. Proceedings of the National Academy of Sciences, 118(14).\nDupas, P., Duflo, E. & Kremer, M. (2021). The Impact of Free Secondary Education: Experimental Evidence from Ghana. Stanford University Working Paper.\n\nParker, S. W., & Vogl, T. (2018). Do conditional cash transfers improve economic outcomes in the next generation? Evidence from Mexico (No. w24303). National Bureau of Economic Research.\n\nEtica\n\nHumphreys, M. (2015). Reflections on the ethics of social experimentation. Journal of Globalization and Development, 6(1), 87-112.\nLewis, J. (2020). Experimental Design: Ethics, Integrity, and the Scientific Method. Handbook of Research Ethics and Scientific Integrity, 459-474.\nRayzberg, M. S. (2019). Fairness in the field: The ethics of resource allocation in randomized controlled field experiments. Science, Technology, & Human Values, 44(3), 371-398.\n\nCredibilidad e inferencia estadística\n\nAmrhein, V., Greenland, S., & McShane, B. (2019). Scientists rise up against statistical significance. Nature. 567, 305-307.\n\nAngrist, J. D., & Pischke, J. S. (2010). The credibility revolution in empirical economics: How better research design is taking the con out of econometrics. Journal of economic perspectives, 24(2), 3-30.\n\nGreenland, S., Senn, S. J., Rothman, K. J., Carlin, J. B., Poole, C., Goodman, S. N., & Altman, D. G. (2016). Statistical tests, P values, confidence intervals, and power: a guide to misinterpretations. European journal of epidemiology, 31(4), 337-350.\nLeamer, E. E. (1983). Let’s take the con out of econometrics. The American Economic Review, 73(1), 31-43.\nLeamer, E. E. (2010). Tantalus on the Road to Asymptopia. Journal of Economic Perspectives, 24(2), 31-46.\nNuzzo, R. (2014). Scientific method: statistical errors. Nature News, 506(7487), 150.\nSims, C. A. (2010). But economics is not an experimental science. Journal of Economic Perspectives, 24(2), 59-68.\nWasserstein, R. L., & Lazar, N. A. (2016). The ASA statement on p-values: context, process, and purpose. The American Statistician, 70(2), 129-133.\n\nInferencia por aleatorización\n\nAbadie, A., Athey, S., Imbens, G. W., & Wooldridge, J. M. (2020). Sampling‐Based versus Design‐Based Uncertainty in Regression Analysis. Econometrica, 88(1), 265-296.\n\nAthey, S., & Imbens, G. W. (2017). The econometrics of randomized experiments. In Handbook of economic field experiments (Vol. 1, pp. 73-140). North-Holland.\n\nHo, D. E., & Imai, K. (2006). Randomization inference with natural experiments: An analysis of ballot effects in the 2003 California recall election. Journal of the American Statistical Association, 101(475), 888-900.\n\nKerwin, J. T., & Thornton, R. L. (2020). Making the grade: The sensitivity of education program effectiveness to input choices and outcome measures. Review of Economics and Statistics, 1-45.",
    "crumbs": [
      "Lecturas"
    ]
  },
  {
    "objectID": "notas/index.html",
    "href": "notas/index.html",
    "title": "Notas",
    "section": "",
    "text": "LATE\nMúltiples hipótesis",
    "crumbs": [
      "Notas"
    ]
  },
  {
    "objectID": "notas/múltiples-hipótesis.html",
    "href": "notas/múltiples-hipótesis.html",
    "title": "Múltiples hipótesis",
    "section": "",
    "text": "En el contexto de evaluación, cometemos el error tipo I al concluir que hay un efecto de tratamiento cuando la \\(H_0\\) es verdadera, es decir, cuando \\(H_0:\\;\\beta_i=0\\). En una investigación fijamos \\(\\alpha\\), la probabilidad de rechazar \\(H_0\\) cuando \\(H_0\\) es cierta. Por ejemplo, en economía trabajamos con \\(\\alpha=0.05\\) o \\(\\alpha=0.01\\).\nEl problema con probar múltiples hipótesis es que inflamos la tasa de error tipo I. Por ejemplo, si tenemos 100 hipótesis y si usamos un valor estándar de \\(\\alpha=0.05\\), esperaríamos rechazar 5 hipótesis por suerte.\nSi realizamos una prueba, la probabilidad de cometer un error es \\(\\alpha\\) y la de no cometer un error es \\(1-\\alpha\\).\nSi realizamos \\(n\\) pruebas, la probabilidad de no cometer un error es \\((1-\\alpha)^n\\) y la probabilidad de cometer al menos un error es \\(1-(1-\\alpha)^n\\).\nEs decir, la probabilidad de cometer al menos un error se incrementa exponencialmente.\nVeamos esto gráficamente:\n\nalpha=0.05\nn &lt;- 1:1000\np &lt;- 1-(1-alpha)^n\n\nplot(p,n, xlab=\"n\", ylab=\"1-(1-alpha)^n\")\n\n\n\n\n\n\n\n\nPara enfrentar este problema seguimos dos estrategias:\n\nControlar o ajustar \\(\\alpha\\)\nCrear índices que agreguen varias variables\n\n\n\nSiguiendo a Popper (1995), definimos familias de variables y haremos el ajuste hacia adentro de estas familias. Por ejemplo, en el artículo que estudiamos de Banerjee et al. (2015), las familias son:\n\nSeguridad alimentaria\nConsumo\nActivos\nSalud mental\n\nDentro de cada familia tenemos \\(n\\) hipótesis \\(H_i\\), con un valor \\(p\\) asociado \\(p_i\\). Recordemos que \\(p_i\\) es la probabilidad de que el estadístico \\(T_i\\) exceda el valor teórico \\(t_i\\). Ordenemos las hipótesis de menor a mayor,con \\(p_1\\) siendo el valor más pequeño: \\(p_1\\leq p_2\\ldots \\leq p_n\\).\n\n\nEl método propuesto por Bonferroni controla la tasa de error por familia (FEWR por family-wise error rate) definida como la probabilidad de cometer al menos un error tipo I.\nEste método consiste en rechazar \\(H_i\\) si \\(p_i\\leq \\alpha_i\\), donde \\(\\alpha_i\\) se escoge de forma que \\(\\sum_i\\alpha_i=\\alpha\\). Usualmente se hace \\(\\alpha_i=\\frac{\\alpha}{n}\\).\nPor ejemplo, con dos tests y \\(\\alpha=0.05\\), \\(\\alpha_i^B=0.025\\).\nNoten que esta corrección es bastante conservadora.\nAlternativamente, podemos ver esta correción como crear unos valores \\(p^B\\) ajustados: \\(p_i^B=p_i\\times n\\).\n¿Por qué preocuparnos por la FWER?\nLa idea de la FWER tiene sentido si nos preocupa tener incluso un solo falso positivo. En la práctica, podemos vivir con algunos falsos positivos.\n\n\n\nEste método controla la tasa de falso descubrimiento. Si \\(V\\) es el número de falsos rechazos (cuando rechazamos la \\(H_0\\) que es verdadera) y si \\(R\\) es el número total de rechazos, entonces \\(Q=V/R\\) es la proporción de falsos rechazos.\nAl valor esperado de \\(Q\\) se le conoce como tasa de falsos rechazos (FDR por false discovery rate).\nSea \\(k\\) el más grande de los \\(i\\) tal que\n\\[p_i\\leq\\frac{i}{n}\\alpha\\] entonces la corrección consiste en rechazar todos los \\(H_i\\) para \\(i=1,2,\\ldots,k\\). En la práctica usamos R\n\n\n\nUsemos los datos del artículo de Benjamini & Hochberg (1995), que tienen 15 hipótesis y trabajan con \\(\\alpha=0.05\\):\n\ndata.pvalues&lt;-read_csv(\"../files/data_benjamini_hochberg.csv\",\n                       locale = locale(encoding = \"latin1\"))  \nn &lt;- 15\nalpha &lt;- 0.05\n\ndata.pvalues\n\n# A tibble: 15 × 2\n   poriginal hipotesis\n       &lt;dbl&gt;     &lt;dbl&gt;\n 1    0.0001         1\n 2    0.0004         2\n 3    0.0019         3\n 4    0.0095         4\n 5    0.0201         5\n 6    0.0278         6\n 7    0.0298         7\n 8    0.0344         8\n 9    0.0459         9\n10    0.324         10\n11    0.426         11\n12    0.572         12\n13    0.653         13\n14    0.759         14\n15    1             15\n\n\nSi hacemos la correción de Bonferroni:\n\ndata.bonferroni &lt;- data.pvalues %&gt;% \n  mutate(bonferroni_alpha=alpha/n) %&gt;% \n  mutate(bonferrini_rechazar=ifelse(poriginal&lt;=bonferroni_alpha,1,0))\n\ndata.bonferroni\n\n# A tibble: 15 × 4\n   poriginal hipotesis bonferroni_alpha bonferrini_rechazar\n       &lt;dbl&gt;     &lt;dbl&gt;            &lt;dbl&gt;               &lt;dbl&gt;\n 1    0.0001         1          0.00333                   1\n 2    0.0004         2          0.00333                   1\n 3    0.0019         3          0.00333                   1\n 4    0.0095         4          0.00333                   0\n 5    0.0201         5          0.00333                   0\n 6    0.0278         6          0.00333                   0\n 7    0.0298         7          0.00333                   0\n 8    0.0344         8          0.00333                   0\n 9    0.0459         9          0.00333                   0\n10    0.324         10          0.00333                   0\n11    0.426         11          0.00333                   0\n12    0.572         12          0.00333                   0\n13    0.653         13          0.00333                   0\n14    0.759         14          0.00333                   0\n15    1             15          0.00333                   0\n\n\nPero si ahora hacemos la de Benjamini & Hochberg\n\ndata.bh &lt;- data.pvalues %&gt;% \n  mutate(bh_alpha=alpha*hipotesis/n) %&gt;% \n  mutate(bh_rechazar=ifelse(poriginal&lt;=bh_alpha,1,0))\n\ndata.bh\n\n# A tibble: 15 × 4\n   poriginal hipotesis bh_alpha bh_rechazar\n       &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;       &lt;dbl&gt;\n 1    0.0001         1  0.00333           1\n 2    0.0004         2  0.00667           1\n 3    0.0019         3  0.01              1\n 4    0.0095         4  0.0133            1\n 5    0.0201         5  0.0167            0\n 6    0.0278         6  0.02              0\n 7    0.0298         7  0.0233            0\n 8    0.0344         8  0.0267            0\n 9    0.0459         9  0.03              0\n10    0.324         10  0.0333            0\n11    0.426         11  0.0367            0\n12    0.572         12  0.04              0\n13    0.653         13  0.0433            0\n14    0.759         14  0.0467            0\n15    1             15  0.05              0\n\n\n\n\n\n\nOtra forma comúnmente usada de evitar el problema de las múltiples hipótesis es crear índices. Kling, Liebmand y Katz (2007) proponen el siguiente promedio de los \\(z\\)-score para generar un solo índice. Para ello, se sigue el siguiente procedimiento:\n\nDefinir las familias y las variables que componen cada familia, donde \\(y_{ij}\\) es la \\(j\\)ésima variable en la familia con \\(J\\) variables.\nDefinir las varibles \\(y_{ij}\\) de tal forma que mayores valores se interpreten como mejora.\nCrear \\(z_{ij}\\) como \\(z_{ij}=\\frac{y_{ij}-\\bar{y_j}^C}{sd(y_j)^C}\\sim(0,1)\\), es decir, estandarizar cada una de las \\(J\\) variables usando al grupo de control como referencia.\nCrear \\(z_i\\), un solo índice para cada individuo que agregue los \\(J\\) índices creados antes\n\nEl procedimiento descrito en Banerjee et al. (2015) es bastante general, pues incluye el caso donde hay varias rondas de seguimiento y varios países.\nPodemos escribir el índice descrito como:\n\\[z_i=\\frac{(\\frac{1}{J}\\sum_j z_{ij})-\\bar{z}_j^C}{sd(z_j^C)}\\]\nEsta transformación tiene la ventaja de que en la siguiente regresión de efecto de tratamiento\n\\[z_i=\\alpha+\\beta T_i + X_i'\\gamma+\\varepsilon_i\\]\nel coeficiente \\(\\beta\\) se interpreta como el efecto del tratamiento medido en desviaciones estándar con respecto a la media del grupo de control.\nNoten que todos las variables dentro de la familia pesan igual. Quizás nos gustaría tomar en cuenta la correlación entre las variables dentro del índice\n\n\nAnderson (2008) propone el siguiente índice, que puede verse como una generalización del de Kling:\n\\[\\bar{s}_i=\\frac{1}{W_{i}}\\sum_{j\\in J} w_j z_{ij}\\]\nEn este índice, \\(w_j\\) es el peso para la variable \\(j\\) y \\(W_i=\\sum_{j\\in J}w_{j}\\). Los pesos son una función de la matriz de covarianzas entre las variables que conforman la familia. Diversos software ya incluyen funciones para obtener los índices de Anderson (2008)."
  },
  {
    "objectID": "notas/múltiples-hipótesis.html#control-del-error-tipo-i",
    "href": "notas/múltiples-hipótesis.html#control-del-error-tipo-i",
    "title": "Múltiples hipótesis",
    "section": "",
    "text": "Siguiendo a Popper (1995), definimos familias de variables y haremos el ajuste hacia adentro de estas familias. Por ejemplo, en el artículo que estudiamos de Banerjee et al. (2015), las familias son:\n\nSeguridad alimentaria\nConsumo\nActivos\nSalud mental\n\nDentro de cada familia tenemos \\(n\\) hipótesis \\(H_i\\), con un valor \\(p\\) asociado \\(p_i\\). Recordemos que \\(p_i\\) es la probabilidad de que el estadístico \\(T_i\\) exceda el valor teórico \\(t_i\\). Ordenemos las hipótesis de menor a mayor,con \\(p_1\\) siendo el valor más pequeño: \\(p_1\\leq p_2\\ldots \\leq p_n\\).\n\n\nEl método propuesto por Bonferroni controla la tasa de error por familia (FEWR por family-wise error rate) definida como la probabilidad de cometer al menos un error tipo I.\nEste método consiste en rechazar \\(H_i\\) si \\(p_i\\leq \\alpha_i\\), donde \\(\\alpha_i\\) se escoge de forma que \\(\\sum_i\\alpha_i=\\alpha\\). Usualmente se hace \\(\\alpha_i=\\frac{\\alpha}{n}\\).\nPor ejemplo, con dos tests y \\(\\alpha=0.05\\), \\(\\alpha_i^B=0.025\\).\nNoten que esta corrección es bastante conservadora.\nAlternativamente, podemos ver esta correción como crear unos valores \\(p^B\\) ajustados: \\(p_i^B=p_i\\times n\\).\n¿Por qué preocuparnos por la FWER?\nLa idea de la FWER tiene sentido si nos preocupa tener incluso un solo falso positivo. En la práctica, podemos vivir con algunos falsos positivos.\n\n\n\nEste método controla la tasa de falso descubrimiento. Si \\(V\\) es el número de falsos rechazos (cuando rechazamos la \\(H_0\\) que es verdadera) y si \\(R\\) es el número total de rechazos, entonces \\(Q=V/R\\) es la proporción de falsos rechazos.\nAl valor esperado de \\(Q\\) se le conoce como tasa de falsos rechazos (FDR por false discovery rate).\nSea \\(k\\) el más grande de los \\(i\\) tal que\n\\[p_i\\leq\\frac{i}{n}\\alpha\\] entonces la corrección consiste en rechazar todos los \\(H_i\\) para \\(i=1,2,\\ldots,k\\). En la práctica usamos R\n\n\n\nUsemos los datos del artículo de Benjamini & Hochberg (1995), que tienen 15 hipótesis y trabajan con \\(\\alpha=0.05\\):\n\ndata.pvalues&lt;-read_csv(\"../files/data_benjamini_hochberg.csv\",\n                       locale = locale(encoding = \"latin1\"))  \nn &lt;- 15\nalpha &lt;- 0.05\n\ndata.pvalues\n\n# A tibble: 15 × 2\n   poriginal hipotesis\n       &lt;dbl&gt;     &lt;dbl&gt;\n 1    0.0001         1\n 2    0.0004         2\n 3    0.0019         3\n 4    0.0095         4\n 5    0.0201         5\n 6    0.0278         6\n 7    0.0298         7\n 8    0.0344         8\n 9    0.0459         9\n10    0.324         10\n11    0.426         11\n12    0.572         12\n13    0.653         13\n14    0.759         14\n15    1             15\n\n\nSi hacemos la correción de Bonferroni:\n\ndata.bonferroni &lt;- data.pvalues %&gt;% \n  mutate(bonferroni_alpha=alpha/n) %&gt;% \n  mutate(bonferrini_rechazar=ifelse(poriginal&lt;=bonferroni_alpha,1,0))\n\ndata.bonferroni\n\n# A tibble: 15 × 4\n   poriginal hipotesis bonferroni_alpha bonferrini_rechazar\n       &lt;dbl&gt;     &lt;dbl&gt;            &lt;dbl&gt;               &lt;dbl&gt;\n 1    0.0001         1          0.00333                   1\n 2    0.0004         2          0.00333                   1\n 3    0.0019         3          0.00333                   1\n 4    0.0095         4          0.00333                   0\n 5    0.0201         5          0.00333                   0\n 6    0.0278         6          0.00333                   0\n 7    0.0298         7          0.00333                   0\n 8    0.0344         8          0.00333                   0\n 9    0.0459         9          0.00333                   0\n10    0.324         10          0.00333                   0\n11    0.426         11          0.00333                   0\n12    0.572         12          0.00333                   0\n13    0.653         13          0.00333                   0\n14    0.759         14          0.00333                   0\n15    1             15          0.00333                   0\n\n\nPero si ahora hacemos la de Benjamini & Hochberg\n\ndata.bh &lt;- data.pvalues %&gt;% \n  mutate(bh_alpha=alpha*hipotesis/n) %&gt;% \n  mutate(bh_rechazar=ifelse(poriginal&lt;=bh_alpha,1,0))\n\ndata.bh\n\n# A tibble: 15 × 4\n   poriginal hipotesis bh_alpha bh_rechazar\n       &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;       &lt;dbl&gt;\n 1    0.0001         1  0.00333           1\n 2    0.0004         2  0.00667           1\n 3    0.0019         3  0.01              1\n 4    0.0095         4  0.0133            1\n 5    0.0201         5  0.0167            0\n 6    0.0278         6  0.02              0\n 7    0.0298         7  0.0233            0\n 8    0.0344         8  0.0267            0\n 9    0.0459         9  0.03              0\n10    0.324         10  0.0333            0\n11    0.426         11  0.0367            0\n12    0.572         12  0.04              0\n13    0.653         13  0.0433            0\n14    0.759         14  0.0467            0\n15    1             15  0.05              0"
  },
  {
    "objectID": "notas/múltiples-hipótesis.html#creación-de-índices",
    "href": "notas/múltiples-hipótesis.html#creación-de-índices",
    "title": "Múltiples hipótesis",
    "section": "",
    "text": "Otra forma comúnmente usada de evitar el problema de las múltiples hipótesis es crear índices. Kling, Liebmand y Katz (2007) proponen el siguiente promedio de los \\(z\\)-score para generar un solo índice. Para ello, se sigue el siguiente procedimiento:\n\nDefinir las familias y las variables que componen cada familia, donde \\(y_{ij}\\) es la \\(j\\)ésima variable en la familia con \\(J\\) variables.\nDefinir las varibles \\(y_{ij}\\) de tal forma que mayores valores se interpreten como mejora.\nCrear \\(z_{ij}\\) como \\(z_{ij}=\\frac{y_{ij}-\\bar{y_j}^C}{sd(y_j)^C}\\sim(0,1)\\), es decir, estandarizar cada una de las \\(J\\) variables usando al grupo de control como referencia.\nCrear \\(z_i\\), un solo índice para cada individuo que agregue los \\(J\\) índices creados antes\n\nEl procedimiento descrito en Banerjee et al. (2015) es bastante general, pues incluye el caso donde hay varias rondas de seguimiento y varios países.\nPodemos escribir el índice descrito como:\n\\[z_i=\\frac{(\\frac{1}{J}\\sum_j z_{ij})-\\bar{z}_j^C}{sd(z_j^C)}\\]\nEsta transformación tiene la ventaja de que en la siguiente regresión de efecto de tratamiento\n\\[z_i=\\alpha+\\beta T_i + X_i'\\gamma+\\varepsilon_i\\]\nel coeficiente \\(\\beta\\) se interpreta como el efecto del tratamiento medido en desviaciones estándar con respecto a la media del grupo de control.\nNoten que todos las variables dentro de la familia pesan igual. Quizás nos gustaría tomar en cuenta la correlación entre las variables dentro del índice\n\n\nAnderson (2008) propone el siguiente índice, que puede verse como una generalización del de Kling:\n\\[\\bar{s}_i=\\frac{1}{W_{i}}\\sum_{j\\in J} w_j z_{ij}\\]\nEn este índice, \\(w_j\\) es el peso para la variable \\(j\\) y \\(W_i=\\sum_{j\\in J}w_{j}\\). Los pesos son una función de la matriz de covarianzas entre las variables que conforman la familia. Diversos software ya incluyen funciones para obtener los índices de Anderson (2008)."
  },
  {
    "objectID": "programa.html",
    "href": "programa.html",
    "title": "Programa",
    "section": "",
    "text": "Identificar las condiciones que permiten la implementación de una evaluación de impacto.\nConocer los fundamentos teóricos sobre los que se sustentan las metodologías de las evaluaciones de impacto.\nImplementar los métodos de evaluación empleando software, interpretar los resultados y reportar las conclusiones en forma de artículos científicos y/o reportes de política.\nConocer e implementar buenas prácticas en el uso de software, orientadas a la transparencia y la replicabilidad en la investigación.\nConocer los temas que conforman la literatura actual de evaluaciones de impacto.",
    "crumbs": [
      "Programa"
    ]
  },
  {
    "objectID": "programa.html#objetivos",
    "href": "programa.html#objetivos",
    "title": "Programa",
    "section": "",
    "text": "Identificar las condiciones que permiten la implementación de una evaluación de impacto.\nConocer los fundamentos teóricos sobre los que se sustentan las metodologías de las evaluaciones de impacto.\nImplementar los métodos de evaluación empleando software, interpretar los resultados y reportar las conclusiones en forma de artículos científicos y/o reportes de política.\nConocer e implementar buenas prácticas en el uso de software, orientadas a la transparencia y la replicabilidad en la investigación.\nConocer los temas que conforman la literatura actual de evaluaciones de impacto.",
    "crumbs": [
      "Programa"
    ]
  },
  {
    "objectID": "programa.html#referencias",
    "href": "programa.html#referencias",
    "title": "Programa",
    "section": "Referencias",
    "text": "Referencias\nEl curso se basa en los siguientes textos:\n\n(MHE) Angrist, J.D. & Pischke, J.S. (2013). Mostly Harmless Econometrics: An Empiricists Companion. Princeton University Press.\n(MM ) Angrist, J.D. & Pischke, J.S. (2014). Mastering ’Metrics: The Path from Cause to Effect. Princeton University Press.\n(CT) Cameron, A.C. & P.K. Trivedi. (2005). Microeconometrics: Methods and applications. Oxford University Press.\n(MT) Cunningham, S. (2021). Causal inference: The mixtape. Yale University Press. Disponible en línea.\nHuntington-Klein, N. (2021). The effect: An introduction to research design and causality. Chapman and Hall/CRC.\nDiNardo, J. & D.S. Lee. (2011). Program Evaluation and Research Designs. En Handbook of Labor Economics, 4A: 463-536.\n(GMPRV) Gertler, P.J., S. Martinez, P. Premand, L.B., Rawlings, & C.M.J. Vermeersch. (2011). La evaluación de impacto en la práctica. Banco Interamericano de Desarrollo y Banco Mundial, segunda edición. Disponible en línea.",
    "crumbs": [
      "Programa"
    ]
  },
  {
    "objectID": "programa.html#contenido-temático",
    "href": "programa.html#contenido-temático",
    "title": "Programa",
    "section": "Contenido temático",
    "text": "Contenido temático\nUnidad 1. Introducción\n\nFundamentos de la evaluación de impacto\n\nInferencia causal\nRevisión de métodos de regresión\n\nReplicabilidad y transparencia en la evaluación\n\nQuarto para la generación de reportes científicos\n\n\nUnidad 2. Métodos de evaluación\n\nEvaluación experimental\n\nAsignación aleatoria\nErrores estándar\nLATE y variables instrumentales\nCorrección por prueba de múltiples hipótesis\nAplicaciones de métodos experimentales\n\nDiferencia en diferencias\n\nSupuestos fundamentales\nEfectos fijos individuales\nDID desfasado\nANCOVA\nAplicaciones de DID\n\nMétodos de pareamiento\n\nSupuestos fundamentales\nPareamiento exacto\nPareamiento por puntaje de propensión (PSM)\nAplicaciones del PSM\n\nDiseños con discontinuidades\n\nSupuestos fundamentales\nDiscontinuidades nítidas y difusas\nDiscontinuidades geográficas\nPliegues en la regresión\nAplicaciones diseños con discontinuidades\n\nMétodo del control sintético\n\nSupuestos fundamentales\nInferencia basada en placebos\nAplicaciones de control sintético\n\n\nUnidad 3. Temas actuales de evaluación\n\nExtensiones I\n\nAprendizaje automatizado y big data en la evaluación de impacto",
    "crumbs": [
      "Programa"
    ]
  },
  {
    "objectID": "programa.html#evaluación-del-curso",
    "href": "programa.html#evaluación-del-curso",
    "title": "Programa",
    "section": "Evaluación del curso",
    "text": "Evaluación del curso\n\nExamen parcial: 20%\nExamen final: 30%\nProyecto final: 20%\nTareas (4): 20% (5% cada una)\nExposición: 10% (7% presentación y 3% resumen)",
    "crumbs": [
      "Programa"
    ]
  },
  {
    "objectID": "programa.html#tareas",
    "href": "programa.html#tareas",
    "title": "Programa",
    "section": "Tareas",
    "text": "Tareas\nCuatro tareas teórico-prácticas. Las tareas deben entregarse de manera individual, pero se recomienda ampliamente colaborar en grupos de estudio. Para evitar confusiones, escriban en su tarea con quiénes colaboraron. Las tareas deberán entregarse en Teams antes de la fecha y hora señalada. No se aceptarán tareas fuera de tiempo. Por favor, no comprima los archivos en carpetas comprimidas. Las tareas deberán contener dos archivos:\nUn primer documento de respuestas donde se incluyan las respuestas a las preguntas teóricas y conceptuales. Este documento debe estar en formato pdf y debe ser generado usando un software de procesamiento de textos científicos, por ejemplo, usando los leguajes LaTeX o Markdown. En este documento también se deben incluir las respuestas a preguntas sobre conclusiones que se desprenden de las secciones prácticas. Por ejemplo, si una pregunta pide obtener la media de la variable x en cierta base de datos, entonces el documento de respuestas debe incluir la pregunta y respuesta correspondiente: “la media de la variable x es 32.6”. En este documento también deberán incluirse las tablas y gráficas que se soliciten.\nUn segundo archivo deberá contener el código replicable usado para generar los resultados de la sección práctica. El código debe también crear las tablas y gráficas solicitadas. Los archivos de código se verificarán para comprobar su replicabilidad.",
    "crumbs": [
      "Programa"
    ]
  },
  {
    "objectID": "programa.html#software",
    "href": "programa.html#software",
    "title": "Programa",
    "section": "Software",
    "text": "Software\nR será el paquete standard usado en las sesiones prácticas. Más aún, el uso de cualquier software es aceptado siempre que se cumplan con los requisitos de replicabilidad y reportes de las tareas y exámenes. Habrá una sesión especial para introducir el uso de Quarto para la generación de reportes científicos.",
    "crumbs": [
      "Programa"
    ]
  },
  {
    "objectID": "programa.html#exámenes",
    "href": "programa.html#exámenes",
    "title": "Programa",
    "section": "Exámenes",
    "text": "Exámenes\n\nExamen parcial: martes 1 de octubre en el horario de clase.\nExamen final: por definir.",
    "crumbs": [
      "Programa"
    ]
  },
  {
    "objectID": "programa.html#exposiciones",
    "href": "programa.html#exposiciones",
    "title": "Programa",
    "section": "Exposiciones",
    "text": "Exposiciones\nCada alumno realizará una presentación de uno los artículos aplicados marcados con “+” en la lista de lecturas. Cada presentación deberá ser de máximo 15 minutos y debe incluir el contenido que el presentador considere relevante. La presentación deberá abordar, mínimamente: 1) el problema a investigar, 2) la metodología empleada, 3) la pertinencia de la metodología y la teoría vista en el curso, 4) los datos empleados, 5) los principales resultados, y 6) una crítica sobre la validez y las conclusiones del estudio. La presentación deberá acompañarse de un breve resumen de máximo una página de extensión que sintetice los puntos anteriores, para ser distribuido con el resto de la clase.",
    "crumbs": [
      "Programa"
    ]
  },
  {
    "objectID": "programa.html#proyecto-final",
    "href": "programa.html#proyecto-final",
    "title": "Programa",
    "section": "Proyecto final",
    "text": "Proyecto final\nEl proyecto final consistirá en un protocolo de investigación de una evaluación de impacto. El tema y la metodología es libre, pero se evaluará el potencial para realizarse en el corto plazo. Se aconseja seleccionar un tema para el que se empleen datos de libre acceso. El protocolo deberá incluir, mínimamente: 1) una revisión de literatura, 2) un bosquejo de las motivaciones teóricas del problema, 3) la metodología empírica a emplear, 4) la fuente de datos a usar, y 5) los resultados preliminares. El proyecto debe presentarse en formato escrito con una extensión máxima de 20 cuartillas. Se recomienda ampliamente dar seguimiento al proyecto en horas de oficina para recibir retroalimentación respecto a los avances y resolver posibles dudas y dificultades.\nEntrega: fecha por definir, a través de Teams.",
    "crumbs": [
      "Programa"
    ]
  },
  {
    "objectID": "programa.html#lista-de-lecturas",
    "href": "programa.html#lista-de-lecturas",
    "title": "Programa",
    "section": "Lista de lecturas",
    "text": "Lista de lecturas\nLas lecturas obligatorias (marcadas con “*”) permiten una discusión informada en la clase. Las lecturas que serán presentadas en exposiciones también son obligatorias y están marcadas con “+”. El resto de las lecturas no serán cubiertas en clase, pero son ampliamente recomendables. En las sesiones de exposiciones se espera que el resto de la clase tenga el conocimiento suficiente sobre el material presentado para participar en la discusión.\nLa lista de lecturas está disponible aquí.",
    "crumbs": [
      "Programa"
    ]
  },
  {
    "objectID": "schedule.html",
    "href": "schedule.html",
    "title": "Schedule",
    "section": "",
    "text": "Example schedule:\n\n\n\n\n\n\n\n\n\nMorning\nAfternoon\n\n\n\n\nL\nIntro + Data manipulation\ngit / GitHub\n\n\nM\nGeneralised Linear Models\nData visualisation\n\n\nX\nMixed models / GAM / Bayes\nFunctional programming + Students work\n\n\nJ\nMultivariate analyses\nReproducible workflows\n\n\nV\nUsing R as GIS + Students work\nProject presentations"
  },
  {
    "objectID": "tareas/tarea-1-respuestas.html",
    "href": "tareas/tarea-1-respuestas.html",
    "title": "Respuestas a la tarea 1",
    "section": "",
    "text": "Se diseñó una intervención que consistió en entregar zapatos a niños en cuatro áreas con altos niveles de pobreza de cierto país. Se sabe que los niños caminan bastante para ir a la escuela y realizan una serie de tareas domésticas después de la escuela. Por tanto, se tiene la hipótesis de que la entrega de zapatos tendrá impactos en el desarrollo de los niños. Se seleccionaron aleatoriamente localidades de control y localidades de tratamiento. Dentro de las localidades asignadas al tratamiento, todos los niños de entre 7 y 12 años de edad recibieron zapatos. Los investigadores deciden usar un \\(\\alpha=0.10\\) durante el estudio.\nLa tabla 1 presenta información sobre una serie de características de los niños que participaron en el estudio en la línea base.\n\n\n\n\n\n\n\n\nTabla 1. Covariables entre grupos de tratamiento y control (datos en la línea base)\n\n\n\n$$(1)$$\n$$(2)$$\n$$(3)$$\n\n\n\n\nVariables\nMedia control\nMedia tratamiento\n$$p$$\n\n\nEdad\n9.486\n9.332\n0.114\n\n\nSexo (masculino=1)\n0.545\n0.497\n0.073*\n\n\nJefe trabaja en agricultura\n0.462\n0.522\n0.435\n\n\nGrado máximo de estudios en el hogar\n5.836\n5.346\n0.406\n\n\nÍndice calidad de vivienda\n0.492\n0.593\n0.447\n\n\nÍndice de consumo de durables\n0.441\n0.467\n0.829\n\n\nNúmero de pares de zapatos que posee\n2.06\n1.825\n0.213\n\n\nHoras que pasa sin zapatos\n2.09\n1.963\n0.917\n\n\nDías que no fue a la escuela\n0.701\n0.886\n0.465\n\n\nHoras para dormir\n10.68\n9.98\n0.388\n\n\nHoras para comer\n1.931\n1.934\n0.986\n\n\nHoras para lavar\n0.732\n0.835\n0.228\n\n\nHoras en escuela\n4.613\n4.154\n0.168\n\n\nHoras para trabajar\n0.409\n0.572\n0.082*\n\n\nN\n666\n912\n1,578\n\n\n\nNota: Los valores \\(p\\) son de una prueba \\(t\\) simple. * \\(p &lt;0.10\\), ** \\(p &lt;0.05\\), *** \\(p &lt;0.01\\).\n\n\n\n\n\n\n\n\nLa tabla 2 muestra los resultados de estimar una regresión del tipo\n\\[y_i=\\alpha+X_i'\\beta+\\theta T_i+\\varepsilon_i\\]\ndonde \\(T_i\\) indica la pertenencia al grupo de tratamiento, \\(X_i\\) es un vector de características observables usadas como controles y \\(y_i\\) es cada una de las siguientes variables sobre las que se estima el impacto del programa: 1) número de zapatos que posee; 2) días que no fue a la escuela; y 3) horas para trabajar.\n\n\n\n\n\n\n\n\nTabla 2. Efectos del tratamiento en variables seleccionadas\n\n\n\n$$(1)$$\n$$(2)$$\n$$(3)$$\n\n\n\n\n\nNúmero de pares de zapatos que posee\nDías que no fue a la escuela\nHoras para trabajar\n\n\n$$\\hat{\\theta}$$\n0.075\n-0.165**\n0.348\n\n\n(e.e)\n(0.061)\n(0.057)\n(0.243)\n\n\nN\n1,302\n664\n556\n\n\n\nNota: * \\(p &lt;0.10\\), ** \\(p &lt;0.05\\), *** \\(p &lt;0.01\\). Todas las regresiones controlan por edad, sexo, ocupación del jefe del hogar y calidad de la vivienda. Errores estándar agrupados a nivel localidad entre paréntesis. \\(\\hat{{\\theta}}\\) se refiere al estimador de \\(\\theta\\).\n\n\n\n\n\n\n\n\n\n[2 puntos] ¿Qué representan los valores \\(p\\) reportados en la columna (3) en la tabla 1?\nPara cada característica, es el valor \\(p\\) asociado al estadístico \\(t\\) en la prueba de diferencia de medias. Indica la probabilidad de observar el estadístico \\(t\\) bajo la \\(H_0\\) de igualdad de medias. Por tanto, valores \\(p\\) por debajo del nivel de significacia \\(\\alpha\\) indican que el estadístico asociado es poco probable de observar bajo la \\(H_0\\).\n[3 puntos] Un donante está preocupado por los resultados de la intervención porque considera que los niños que tenían más zapatos antes de que iniciara el programa tuvieron una menor probabilidad de estar en el grupo que recibió zapatos por parte del programa. ¿Considera esto una preocupación válida sobre la integridad del experimento?\nSi bien los niños que están en el grupo de control tienen en promedio 2.06 pares de zapatos y los que están en el de tratamiento tienen en promedio 1.825 pares de zapatos, esta diferencia no es estadísticamente significativa. Esto queda en evidencia por el valor \\(p=0.213\\), por lo que la preocupación del donante no está justificada por los datos.\n[5 puntos] ¿Cómo se interpreta el asterisco al lado del valor \\(p\\) de 0.082 asociado a las horas para trabajar?\nDado que se trabaja con un \\(\\alpha=0.10\\), los asteriscos denotan los casos en los que las diferencias de medias tiene un valor \\(p\\) asociado menor a dicho \\(\\alpha\\). Es decir, el asterisco al lado del 0.082 indica que la diferencia en horas para trabajar entre los niños del grupo de tratamiento y de control es estadísticamente significativa.\n[5 puntos] ¿Cuál es el impacto del programa en el número de pares zapatos que los niños en promedio poseen? Mencione la magnitud y significancia estadística de dicho impacto.\nDe acuerdo a la columna (1) de la tabla 2, los niños que recibieron zapatos tienen en promedio 0.075 pares de zapatos más que los niños que no recibieron el programa. Sin embargo, esta diferencia no es estadísticamente significativa a los niveles de confianza típicamente usados en economía.\n[5 puntos] En columna (2) de la tabla 2, ¿qué interpretación tienen los dos asteriscos al lado de -0.165?\nLos asteriscos son una notación del nivel de confianza al que se rechaza la \\(H0\\). En el caso de los dos asteriscos al lado del -0.165, significa que el programa tuvo un efecto de reducir los días en que los niños no van a la escuela de 0.165 días y que este efecto es estadísticamente significativo al 5%.\n[5 puntos] ¿Cuántos días sin ir a la escuela esperaríamos observar después de la intervención en los niños que recibieron zapatos?\nSimplemente sumamos el efecto estimado a la media del grupo de control. Es decir, esperamos que el número de días que no van a la escuela en el caso de los niños que recibieron los zapatos sea de \\(0.701-0.165=0.536\\).\n[5 puntos] La nota al pie de la tabla 2 indica que se reportan errores estándar agrupados? ¿Por qué los investigadores realizan la estimación de los errores estándar de esta manera?\nEl programa fue aleatorizado a nivel localidad, por lo que existe una correlación entre las variables observadas y no observadas entre los individuos de los grupos de control y tratamiento. Los errores agrupados toman en cuenta esta correlación, asumiendo que existe una correlación arbitraria entre las observaciones de la misma localidad, pero independiencia entre observaciones de distintas localidades.\n\n\n\n\nSuponga que está interesado en conocer el impacto que tiene el acceso a las microfinanzas en un indicador de seguridad alimentaria \\(y_i\\) de las familias. La idea detrás es que el acceso al crédito podría mejorar la habilidad de los hogares para suavizar el consumo. Afortunadamente, usted tiene acceso a una encuesta representativa a nivel nacional que incluye un índice de seguridad alimentaria así como una variable indicadora o dummy, \\(T_i\\), que toma el valor de 1 si algún miembro del hogar tiene acceso a microfinanzas y de 0 en otro caso.\nSuponga que su asistente le sugiere que para evaluar el impacto de microfinanzas basta con estimar la siguiente regresión por MCO:\n\\[ y_i = \\alpha + \\beta T_i + \\varepsilon_i \\]\n\n[5 puntos] ¿Cómo valora la propuesta de su asistente? ¿Qué podemos esperar de una comparación observacional como la de la propuesta?\nEsto es lo que conocemos como una comparación observacional. Sabemos que en comparaciones observacionales es muy probable la presencia del sesgo de selección, es decr, que los hogares tratados con el acceso a microfinanzas sean diferentes a los que no tuvieron acceso. Las razones por las que los hogares tienen acceso a microfinanzas pueden estar correlacionadas también con tener una mejor o peor seguridad alimentaria, por lo que tenemos hay presencia de sesgo de selección. En general, el diseño de este estudio no permitiría obtener conclusiones sobre el efecto causal de tener acceso a microfinanzas.\n[5 puntos] Muestre si el estimador de MCO de \\(\\beta\\) es consistente o no para el efecto de tratamiento.\nEstimar una regresión por MCO produciría un estimador \\(\\hat{\\beta}\\) inconsistente para el verdadero efecto de tratamiento \\(\\beta\\). Para ver esto, recordemos que el estimador de MCO puede reescribirse como sigue:\n\\[\\hat{\\beta}=\\beta + \\left(N^{1-}\\sum x_i x_i'\\right)\\left(N^{-1}\\sum x_i u_i\\right)\\]\nSi podemos aplicar una LGN a \\(\\left(N^{1-}\\sum x_i x_i'\\right)\\), sabemos que el límite es una matriz finita y no nula. Entonces, para que \\(\\hat{\\beta} \\overset{p}{\\to} \\beta\\) se requiere que, al aplicar una LGN a \\(\\left(N^{-1}\\sum x_i u_i\\right)\\), la probabilidad límite sea 0. Esto ocurre si E(x_iu_i)=0, es decir, si no hay correlación entre los no observables y los regresores. Por los argumentos hechos arriba, esto es muy probable que se viole pues uno de los regresores es \\(T_i\\), que está correlacionado con no observables que hacen más o menos probable que un hogar tenga acceso a microfinanzas y que también determinan la seguridad alimentaria.\n\n\n\n\n\n[10 puntos] Replique el ejercicio en MHE que ejemplifica el teorema de la regresión de la FEC. Para esto use el archivo de datos muestra-enoe-123.csv, que contiene una muestra del primer trimestre de 2023 de la ENOE e incluye personas que trabajan y reciben un ingreso. lingreso es el log del ingreso mensual y escolaridad son los años de educación. Primero, estime una regresión de lingreso en función de escolaridad usando los microdatos. Luego, obtenga la media de lingreso para cada nivel de escolaridad y estime una regresión de las medias en función de escolaridad, pesando por el número de observaciones usadas para construir cada media. Compare los coeficientes estimados.\nCorramos la regresión con los microdatos:\n\ndf &lt;- read_csv(\"../files/muestra-enoe-123.csv\") \n\nsummary(lm(lingreso ~ escolaridad,\ndata = df))\n\n\nCall:\nlm(formula = lingreso ~ escolaridad, data = df)\n\nResiduals:\n    Min      1Q  Median      3Q     Max \n-5.6859 -0.3123  0.0462  0.4179  3.0679 \n\nCoefficients:\n            Estimate Std. Error t value Pr(&gt;|t|)    \n(Intercept) 8.216881   0.024243  338.94   &lt;2e-16 ***\nescolaridad 0.060347   0.002105   28.67   &lt;2e-16 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 0.6973 on 6554 degrees of freedom\nMultiple R-squared:  0.1115, Adjusted R-squared:  0.1113 \nF-statistic: 822.1 on 1 and 6554 DF,  p-value: &lt; 2.2e-16\n\n\nCada año de escolaridad se asocia con un incremento de 6% en el ingreso.\nAhora calculemos la media del ingreso por cada año de educación, asegurándonos de conservar también el número de observaciones empleada para hacer dicho cálculo:\n\ndf.agregada &lt;- df %&gt;% \n  group_by(escolaridad) %&gt;% \n  summarise(lingreso = mean(lingreso, na.rm=T),\n            n = n())\n\nCorremos la regresión con los datos agregados, pesando por el número de observaciones en cada grupo:\n\nsummary(lm(lingreso ~ escolaridad,\n              data = df.agregada,\n              weights = n))\n\n\nCall:\nlm(formula = lingreso ~ escolaridad, data = df.agregada, weights = n)\n\nWeighted Residuals:\n    Min      1Q  Median      3Q     Max \n-2.7905 -0.1961  0.3220  1.1960  3.8566 \n\nCoefficients:\n            Estimate Std. Error t value Pr(&gt;|t|)    \n(Intercept) 8.216881   0.056804  144.65  &lt; 2e-16 ***\nescolaridad 0.060347   0.004932   12.24 1.86e-10 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 1.634 on 19 degrees of freedom\nMultiple R-squared:  0.8874, Adjusted R-squared:  0.8815 \nF-statistic: 149.7 on 1 and 19 DF,  p-value: 1.861e-10\n\n\nEl coeficiente estimado de los años de escolaridad es exactamente el mismo.\n\n\n\n\nUse los datos del archivo STAR_public_use.csv para este problema. En este problema replicará la fila correspondiente a la variable High scool GPA (calificación en la preparatoria) de la Tabla 1 en Angrist et al. (2009).1\n\n[5 puntos] Obtenga la media y la desviación estándar de la edad, age en los datos, en el grupo de control (columna 1), restringiendo la muestra a aquellos individuos con noshow igual a 0.\nDespués de eliminar a lo sindividuos que tienen noshow igual a 1, obtenemos la media y desviación estándar reportadas en la tabla. Noten que deben restringir al grupo de control para obtener dichas cifras. La columna del tamaño de la muestra se obtiene sin restringir al grupo de control, aunque esto no se pedía en la pregunta.\n\ndata.angrist &lt;- read_csv(\"../files/STAR_public_use.csv\",\n                       locale = locale(encoding = \"latin1\"))   %&gt;% \n  clean_names() %&gt;% \n  filter(noshow==0)\n\n#Media y desviación estándar\ndata.angrist %&gt;% \n  filter(control==1) %&gt;% \n  summarize(media=mean(age),\n            desvest=sd(age))\n\n# A tibble: 1 × 2\n  media desvest\n  &lt;dbl&gt;   &lt;dbl&gt;\n1  18.3   0.616\n\n#N\ndata.angrist %&gt;% \n  summarize(n())\n\n# A tibble: 1 × 1\n  `n()`\n  &lt;int&gt;\n1  1571\n\n\n[10 puntos] Usando una regresión lineal, muestre que la edad no está correlacionada con la asignación a los tratamientos (ssp, sfp y sfsp). De nuevo, debe restringir la muestra quienes tienen noshow igual a 0. Reporte los coeficientes y los errores estándar (columnas 2 a 4).\nLa regresión es:\n\nsummary(balance &lt;- lm(age ~ ssp + sfp+ sfsp,\n            data = data.angrist))\n\n\nCall:\nlm(formula = age ~ ssp + sfp + sfsp, data = data.angrist)\n\nResiduals:\n    Min      1Q  Median      3Q     Max \n-1.2910 -0.2910 -0.2910 -0.2373  4.7090 \n\nCoefficients:\n            Estimate Std. Error t value Pr(&gt;|t|)    \n(Intercept) 18.29097    0.01985 921.363   &lt;2e-16 ***\nssp         -0.05368    0.04454  -1.205    0.228    \nsfp         -0.03277    0.04395  -0.746    0.456    \nsfsp         0.02558    0.05562   0.460    0.646    \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 0.6125 on 1567 degrees of freedom\nMultiple R-squared:  0.001438,   Adjusted R-squared:  -0.0004737 \nF-statistic: 0.7522 on 3 and 1567 DF,  p-value: 0.5211\n\n\n[5 puntos] Realice una prueba de significancia conjunta de los coeficientes obtenidos en el punto b. Reporte el estadístico \\(F\\) y el valor \\(p\\) asociado (columna 5).\nEl estadístico \\(F\\) ya es calculado con la regresión. Basta con pedirlo:\n\nsummary(balance)$fstatistic\n\n       value        numdf        dendf \n   0.7522152    3.0000000 1567.0000000 \n\n\n¿Pero cómo puedo calcular el valor \\(p\\)? Basta usar la definición, es la probabilidad de observar un valor más extremo que el estadístico, bajo la distribución teórica. En este caso, la distribución teórica es una \\(F\\) y debemos especificar los grados de libertad en el numerador y en el denominador:\n\npf(q = summary(balance)$fstatistic[1],\n   df1 = summary(balance)$fstatistic[2],\n   df2 = summary(balance)$fstatistic[3],\n   lower.tail=FALSE)\n\n    value \n0.5210527 \n\n\n[10 puntos] ¿Cuál es el propósito de la prueba F realizada en el punto c.? ¿Qué hipótesis nula prueban los autores?\nAquí se busca probar que la asignación a los tres tipos de tratamiento no está correlacionada con la edad. La \\(H_0\\) es que \\(\\beta_{SSP}=\\beta_{SFP}=\\beta_{SFSP}=0\\). Si rechazamos la hipótesis nula concluiríamos que hay diferencias entre grupos en la edad En este caso, el estadístico \\(F\\) es pequeño y su valor \\(p\\) indica que es muy probable de observarlo bajo la hipótesis nula por lo que no hay bases para rechazarla.\n\n\n\n\nNuevamente, use los datos del archivo STAR_public_use.csv para este problema. En este problema, replicará dos columnas del efecto de tratamiento de la Tabla 5. Note que de nuevo se deben usar solo las observaciones que tienen noshow igual a 0. Los autores también sustituyen los valores de gpa_year1 por NA cuando la variable grade_20059_fall es NA; y sustituyen grade_20059_fall por NA cuando la variable gpa_year1 es NA. Además, note que se usan las siguientes variables de control: sex, mtongue, hsgroup, numcourses_nov1, lastmin, mom_edn, y dad_edn, todas ellas categóricas.\n\n[10 puntos] Estime el efecto de cada tipo de tratamiento sobre el promedio o GPA, denotado gpa_year1 en los datos, para toda la muestra (Panel B, columna 1). Calcule correctamente los errores estándar. Interprete los resultados.\nHaciendo la sustitución sugerida por los autores, estimamos:\n\ndata.angrist &lt;- data.angrist %&gt;% \n      mutate(gpa_year1=ifelse(is.na(grade_20059_fall),NA,gpa_year1),\n             grade_20059_fall=ifelse(is.na(gpa_year1),NA,grade_20059_fall))\n\nreg1&lt;-lm(gpa_year1 ~ ssp + sfp+ sfsp+\n           factor(sex)+\n           factor(mtongue)+\n           factor(hsgroup)+\n           factor(numcourses_nov1)+\n           factor(lastmin)+\n           factor(mom_edn)+\n           factor(dad_edn),\n         data=data.angrist)\n\nNoten que los coeficientes estimados son correctos, pero no los errores estándar:\n\nsummary(reg1)$coef[1:4,]\n\n              Estimate Std. Error  t value     Pr(&gt;|t|)\n(Intercept) 1.60138378 0.46453145 3.447310 0.0005854449\nssp         0.07259427 0.06603498 1.099331 0.2718404422\nsfp         0.01025889 0.06515735 0.157448 0.8749178181\nsfsp        0.20971238 0.08554012 2.451626 0.0143604306\n\n\nLos errores estándar correctos son los robustos:\n\ncoeftest(reg1, vcov = vcovHC(reg1, \"HC1\"))[1:4,]\n\n              Estimate Std. Error   t value     Pr(&gt;|t|)\n(Intercept) 1.60138378 0.46059228 3.4767925 0.0005252628\nssp         0.07259427 0.06601070 1.0997349 0.2716642613\nsfp         0.01025889 0.06357889 0.1613569 0.8718389856\nsfsp        0.20971238 0.09221545 2.2741566 0.0231293441\n\n\nFinalmente, lo que se reporta en la tabla como la media del grupo de control no es la constante en la regresión, sino la media y desviación estándar. Noten que se usa la muestra que efectivamente se usa en la regresión, es decir, sin valores faltantes.\n\ndata.angrist %&gt;%\n    filter(!is.na(gpa_year1) & !is.na(grade_20059_fall)\n     & !is.na(ssp)\n     & !is.na(sfp)\n     & !is.na(sfsp)\n     & !is.na(sex)\n     & !is.na(mtongue)\n     & !is.na(hsgroup)\n     & !is.na(numcourses_nov1)\n     & !is.na(lastmin)\n     & !is.na(mom_edn)\n     & !is.na(dad_edn)\n     & control==1) %&gt;%\n  summarize(media=mean(gpa_year1,\n                       na.rm=TRUE),\n            desvest=sd(gpa_year1,\n                       na.rm=TRUE))\n\n# A tibble: 1 × 2\n  media desvest\n  &lt;dbl&gt;   &lt;dbl&gt;\n1  1.80   0.902\n\ndata.angrist %&gt;%\n  filter(!is.na(gpa_year1) & !is.na(grade_20059_fall)\n     & !is.na(ssp)\n     & !is.na(sfp)\n     & !is.na(sfsp)\n     & !is.na(sex)\n     & !is.na(mtongue)\n     & !is.na(hsgroup)\n     & !is.na(numcourses_nov1)\n     & !is.na(lastmin)\n     & !is.na(mom_edn)\n     & !is.na(dad_edn)) %&gt;%\n  summarize(numero=n())\n\n# A tibble: 1 × 1\n  numero\n   &lt;int&gt;\n1   1255\n\n\n[10 puntos] Estime el efecto sobre el GPA de recibir cada tipo de tratamiento, considerando los tratamientos SSP o SFP (de cualquier tipo) en los hombres de la muestra (Panel B, columna 5). Esto es, considere el tratamiento SSP como un primer tipo de tratamiento y, ya sea SFP o SFSP, como un segundo tipo de tratamiento. Calcule correctamente los errores estándar. Interprete sus resultados.\nDefinimos la variable de recibir el tratamiento SFP o SFSP. Luego estimamos:\n\ndata.angrist &lt;- data.angrist %&gt;%\n      mutate(sspany = ifelse(sfp == 1 | sfsp == 1, 1, \n    0))\n\nreg2&lt;-lm(gpa_year1 ~ ssp + sspany+\n           factor(mtongue)+\n           factor(hsgroup)+\n           factor(numcourses_nov1)+\n           factor(lastmin)+\n           factor(mom_edn)+\n           factor(dad_edn),\n         data=filter(data.angrist,\n                     female==0))\n\nLos coeficientes con los errores correctos son:\n\ncoeftest(reg2, vcov = vcovHC(reg2, \"HC1\"))[1:3,]\n\n                Estimate Std. Error     t value    Pr(&gt;|t|)\n(Intercept)  1.488578569 0.51919391  2.86709560 0.004319175\nssp          0.007920013 0.10719768  0.07388232 0.941133873\nsspany      -0.042402063 0.09476171 -0.44745989 0.654738783\n\n\nLa media en el control:\n\ndata.angrist %&gt;%\n  filter(!is.na(gpa_year1) & !is.na(grade_20059_fall)\n     & !is.na(ssp)\n     & !is.na(sfp)\n     & !is.na(sfsp)\n     & !is.na(sex)\n     & !is.na(mtongue)\n     & !is.na(hsgroup)\n     & !is.na(numcourses_nov1)\n     & !is.na(lastmin)\n     & !is.na(mom_edn)\n     & !is.na(dad_edn)\n     & control==1\n     & female==0) %&gt;%\n  summarize(media=mean(gpa_year1,\n                       na.rm=TRUE),\n            desvest=sd(gpa_year1,\n                       na.rm=TRUE))\n\n# A tibble: 1 × 2\n  media desvest\n  &lt;dbl&gt;   &lt;dbl&gt;\n1  1.91   0.908\n\ndata.angrist %&gt;%\n  filter(!is.na(gpa_year1) & !is.na(grade_20059_fall)\n     & !is.na(ssp)\n     & !is.na(sfp)\n     & !is.na(sfsp)\n     & !is.na(sex)\n     & !is.na(mtongue)\n     & !is.na(hsgroup)\n     & !is.na(numcourses_nov1)\n     & !is.na(lastmin)\n     & !is.na(mom_edn)\n     & !is.na(dad_edn)\n     & female==0) %&gt;%\n  summarize(numero=n())\n\n# A tibble: 1 × 1\n  numero\n   &lt;int&gt;\n1    526"
  },
  {
    "objectID": "tareas/tarea-1-respuestas.html#pregunta-1",
    "href": "tareas/tarea-1-respuestas.html#pregunta-1",
    "title": "Respuestas a la tarea 1",
    "section": "",
    "text": "Se diseñó una intervención que consistió en entregar zapatos a niños en cuatro áreas con altos niveles de pobreza de cierto país. Se sabe que los niños caminan bastante para ir a la escuela y realizan una serie de tareas domésticas después de la escuela. Por tanto, se tiene la hipótesis de que la entrega de zapatos tendrá impactos en el desarrollo de los niños. Se seleccionaron aleatoriamente localidades de control y localidades de tratamiento. Dentro de las localidades asignadas al tratamiento, todos los niños de entre 7 y 12 años de edad recibieron zapatos. Los investigadores deciden usar un \\(\\alpha=0.10\\) durante el estudio.\nLa tabla 1 presenta información sobre una serie de características de los niños que participaron en el estudio en la línea base.\n\n\n\n\n\n\n\n\nTabla 1. Covariables entre grupos de tratamiento y control (datos en la línea base)\n\n\n\n$$(1)$$\n$$(2)$$\n$$(3)$$\n\n\n\n\nVariables\nMedia control\nMedia tratamiento\n$$p$$\n\n\nEdad\n9.486\n9.332\n0.114\n\n\nSexo (masculino=1)\n0.545\n0.497\n0.073*\n\n\nJefe trabaja en agricultura\n0.462\n0.522\n0.435\n\n\nGrado máximo de estudios en el hogar\n5.836\n5.346\n0.406\n\n\nÍndice calidad de vivienda\n0.492\n0.593\n0.447\n\n\nÍndice de consumo de durables\n0.441\n0.467\n0.829\n\n\nNúmero de pares de zapatos que posee\n2.06\n1.825\n0.213\n\n\nHoras que pasa sin zapatos\n2.09\n1.963\n0.917\n\n\nDías que no fue a la escuela\n0.701\n0.886\n0.465\n\n\nHoras para dormir\n10.68\n9.98\n0.388\n\n\nHoras para comer\n1.931\n1.934\n0.986\n\n\nHoras para lavar\n0.732\n0.835\n0.228\n\n\nHoras en escuela\n4.613\n4.154\n0.168\n\n\nHoras para trabajar\n0.409\n0.572\n0.082*\n\n\nN\n666\n912\n1,578\n\n\n\nNota: Los valores \\(p\\) son de una prueba \\(t\\) simple. * \\(p &lt;0.10\\), ** \\(p &lt;0.05\\), *** \\(p &lt;0.01\\).\n\n\n\n\n\n\n\n\nLa tabla 2 muestra los resultados de estimar una regresión del tipo\n\\[y_i=\\alpha+X_i'\\beta+\\theta T_i+\\varepsilon_i\\]\ndonde \\(T_i\\) indica la pertenencia al grupo de tratamiento, \\(X_i\\) es un vector de características observables usadas como controles y \\(y_i\\) es cada una de las siguientes variables sobre las que se estima el impacto del programa: 1) número de zapatos que posee; 2) días que no fue a la escuela; y 3) horas para trabajar.\n\n\n\n\n\n\n\n\nTabla 2. Efectos del tratamiento en variables seleccionadas\n\n\n\n$$(1)$$\n$$(2)$$\n$$(3)$$\n\n\n\n\n\nNúmero de pares de zapatos que posee\nDías que no fue a la escuela\nHoras para trabajar\n\n\n$$\\hat{\\theta}$$\n0.075\n-0.165**\n0.348\n\n\n(e.e)\n(0.061)\n(0.057)\n(0.243)\n\n\nN\n1,302\n664\n556\n\n\n\nNota: * \\(p &lt;0.10\\), ** \\(p &lt;0.05\\), *** \\(p &lt;0.01\\). Todas las regresiones controlan por edad, sexo, ocupación del jefe del hogar y calidad de la vivienda. Errores estándar agrupados a nivel localidad entre paréntesis. \\(\\hat{{\\theta}}\\) se refiere al estimador de \\(\\theta\\).\n\n\n\n\n\n\n\n\n\n[2 puntos] ¿Qué representan los valores \\(p\\) reportados en la columna (3) en la tabla 1?\nPara cada característica, es el valor \\(p\\) asociado al estadístico \\(t\\) en la prueba de diferencia de medias. Indica la probabilidad de observar el estadístico \\(t\\) bajo la \\(H_0\\) de igualdad de medias. Por tanto, valores \\(p\\) por debajo del nivel de significacia \\(\\alpha\\) indican que el estadístico asociado es poco probable de observar bajo la \\(H_0\\).\n[3 puntos] Un donante está preocupado por los resultados de la intervención porque considera que los niños que tenían más zapatos antes de que iniciara el programa tuvieron una menor probabilidad de estar en el grupo que recibió zapatos por parte del programa. ¿Considera esto una preocupación válida sobre la integridad del experimento?\nSi bien los niños que están en el grupo de control tienen en promedio 2.06 pares de zapatos y los que están en el de tratamiento tienen en promedio 1.825 pares de zapatos, esta diferencia no es estadísticamente significativa. Esto queda en evidencia por el valor \\(p=0.213\\), por lo que la preocupación del donante no está justificada por los datos.\n[5 puntos] ¿Cómo se interpreta el asterisco al lado del valor \\(p\\) de 0.082 asociado a las horas para trabajar?\nDado que se trabaja con un \\(\\alpha=0.10\\), los asteriscos denotan los casos en los que las diferencias de medias tiene un valor \\(p\\) asociado menor a dicho \\(\\alpha\\). Es decir, el asterisco al lado del 0.082 indica que la diferencia en horas para trabajar entre los niños del grupo de tratamiento y de control es estadísticamente significativa.\n[5 puntos] ¿Cuál es el impacto del programa en el número de pares zapatos que los niños en promedio poseen? Mencione la magnitud y significancia estadística de dicho impacto.\nDe acuerdo a la columna (1) de la tabla 2, los niños que recibieron zapatos tienen en promedio 0.075 pares de zapatos más que los niños que no recibieron el programa. Sin embargo, esta diferencia no es estadísticamente significativa a los niveles de confianza típicamente usados en economía.\n[5 puntos] En columna (2) de la tabla 2, ¿qué interpretación tienen los dos asteriscos al lado de -0.165?\nLos asteriscos son una notación del nivel de confianza al que se rechaza la \\(H0\\). En el caso de los dos asteriscos al lado del -0.165, significa que el programa tuvo un efecto de reducir los días en que los niños no van a la escuela de 0.165 días y que este efecto es estadísticamente significativo al 5%.\n[5 puntos] ¿Cuántos días sin ir a la escuela esperaríamos observar después de la intervención en los niños que recibieron zapatos?\nSimplemente sumamos el efecto estimado a la media del grupo de control. Es decir, esperamos que el número de días que no van a la escuela en el caso de los niños que recibieron los zapatos sea de \\(0.701-0.165=0.536\\).\n[5 puntos] La nota al pie de la tabla 2 indica que se reportan errores estándar agrupados? ¿Por qué los investigadores realizan la estimación de los errores estándar de esta manera?\nEl programa fue aleatorizado a nivel localidad, por lo que existe una correlación entre las variables observadas y no observadas entre los individuos de los grupos de control y tratamiento. Los errores agrupados toman en cuenta esta correlación, asumiendo que existe una correlación arbitraria entre las observaciones de la misma localidad, pero independiencia entre observaciones de distintas localidades."
  },
  {
    "objectID": "tareas/tarea-1-respuestas.html#pregunta-2",
    "href": "tareas/tarea-1-respuestas.html#pregunta-2",
    "title": "Respuestas a la tarea 1",
    "section": "",
    "text": "Suponga que está interesado en conocer el impacto que tiene el acceso a las microfinanzas en un indicador de seguridad alimentaria \\(y_i\\) de las familias. La idea detrás es que el acceso al crédito podría mejorar la habilidad de los hogares para suavizar el consumo. Afortunadamente, usted tiene acceso a una encuesta representativa a nivel nacional que incluye un índice de seguridad alimentaria así como una variable indicadora o dummy, \\(T_i\\), que toma el valor de 1 si algún miembro del hogar tiene acceso a microfinanzas y de 0 en otro caso.\nSuponga que su asistente le sugiere que para evaluar el impacto de microfinanzas basta con estimar la siguiente regresión por MCO:\n\\[ y_i = \\alpha + \\beta T_i + \\varepsilon_i \\]\n\n[5 puntos] ¿Cómo valora la propuesta de su asistente? ¿Qué podemos esperar de una comparación observacional como la de la propuesta?\nEsto es lo que conocemos como una comparación observacional. Sabemos que en comparaciones observacionales es muy probable la presencia del sesgo de selección, es decr, que los hogares tratados con el acceso a microfinanzas sean diferentes a los que no tuvieron acceso. Las razones por las que los hogares tienen acceso a microfinanzas pueden estar correlacionadas también con tener una mejor o peor seguridad alimentaria, por lo que tenemos hay presencia de sesgo de selección. En general, el diseño de este estudio no permitiría obtener conclusiones sobre el efecto causal de tener acceso a microfinanzas.\n[5 puntos] Muestre si el estimador de MCO de \\(\\beta\\) es consistente o no para el efecto de tratamiento.\nEstimar una regresión por MCO produciría un estimador \\(\\hat{\\beta}\\) inconsistente para el verdadero efecto de tratamiento \\(\\beta\\). Para ver esto, recordemos que el estimador de MCO puede reescribirse como sigue:\n\\[\\hat{\\beta}=\\beta + \\left(N^{1-}\\sum x_i x_i'\\right)\\left(N^{-1}\\sum x_i u_i\\right)\\]\nSi podemos aplicar una LGN a \\(\\left(N^{1-}\\sum x_i x_i'\\right)\\), sabemos que el límite es una matriz finita y no nula. Entonces, para que \\(\\hat{\\beta} \\overset{p}{\\to} \\beta\\) se requiere que, al aplicar una LGN a \\(\\left(N^{-1}\\sum x_i u_i\\right)\\), la probabilidad límite sea 0. Esto ocurre si E(x_iu_i)=0, es decir, si no hay correlación entre los no observables y los regresores. Por los argumentos hechos arriba, esto es muy probable que se viole pues uno de los regresores es \\(T_i\\), que está correlacionado con no observables que hacen más o menos probable que un hogar tenga acceso a microfinanzas y que también determinan la seguridad alimentaria."
  },
  {
    "objectID": "tareas/tarea-1-respuestas.html#pregunta-3",
    "href": "tareas/tarea-1-respuestas.html#pregunta-3",
    "title": "Respuestas a la tarea 1",
    "section": "",
    "text": "[10 puntos] Replique el ejercicio en MHE que ejemplifica el teorema de la regresión de la FEC. Para esto use el archivo de datos muestra-enoe-123.csv, que contiene una muestra del primer trimestre de 2023 de la ENOE e incluye personas que trabajan y reciben un ingreso. lingreso es el log del ingreso mensual y escolaridad son los años de educación. Primero, estime una regresión de lingreso en función de escolaridad usando los microdatos. Luego, obtenga la media de lingreso para cada nivel de escolaridad y estime una regresión de las medias en función de escolaridad, pesando por el número de observaciones usadas para construir cada media. Compare los coeficientes estimados.\nCorramos la regresión con los microdatos:\n\ndf &lt;- read_csv(\"../files/muestra-enoe-123.csv\") \n\nsummary(lm(lingreso ~ escolaridad,\ndata = df))\n\n\nCall:\nlm(formula = lingreso ~ escolaridad, data = df)\n\nResiduals:\n    Min      1Q  Median      3Q     Max \n-5.6859 -0.3123  0.0462  0.4179  3.0679 \n\nCoefficients:\n            Estimate Std. Error t value Pr(&gt;|t|)    \n(Intercept) 8.216881   0.024243  338.94   &lt;2e-16 ***\nescolaridad 0.060347   0.002105   28.67   &lt;2e-16 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 0.6973 on 6554 degrees of freedom\nMultiple R-squared:  0.1115, Adjusted R-squared:  0.1113 \nF-statistic: 822.1 on 1 and 6554 DF,  p-value: &lt; 2.2e-16\n\n\nCada año de escolaridad se asocia con un incremento de 6% en el ingreso.\nAhora calculemos la media del ingreso por cada año de educación, asegurándonos de conservar también el número de observaciones empleada para hacer dicho cálculo:\n\ndf.agregada &lt;- df %&gt;% \n  group_by(escolaridad) %&gt;% \n  summarise(lingreso = mean(lingreso, na.rm=T),\n            n = n())\n\nCorremos la regresión con los datos agregados, pesando por el número de observaciones en cada grupo:\n\nsummary(lm(lingreso ~ escolaridad,\n              data = df.agregada,\n              weights = n))\n\n\nCall:\nlm(formula = lingreso ~ escolaridad, data = df.agregada, weights = n)\n\nWeighted Residuals:\n    Min      1Q  Median      3Q     Max \n-2.7905 -0.1961  0.3220  1.1960  3.8566 \n\nCoefficients:\n            Estimate Std. Error t value Pr(&gt;|t|)    \n(Intercept) 8.216881   0.056804  144.65  &lt; 2e-16 ***\nescolaridad 0.060347   0.004932   12.24 1.86e-10 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 1.634 on 19 degrees of freedom\nMultiple R-squared:  0.8874, Adjusted R-squared:  0.8815 \nF-statistic: 149.7 on 1 and 19 DF,  p-value: 1.861e-10\n\n\nEl coeficiente estimado de los años de escolaridad es exactamente el mismo."
  },
  {
    "objectID": "tareas/tarea-1-respuestas.html#pregunta-4",
    "href": "tareas/tarea-1-respuestas.html#pregunta-4",
    "title": "Respuestas a la tarea 1",
    "section": "",
    "text": "Use los datos del archivo STAR_public_use.csv para este problema. En este problema replicará la fila correspondiente a la variable High scool GPA (calificación en la preparatoria) de la Tabla 1 en Angrist et al. (2009).1\n\n[5 puntos] Obtenga la media y la desviación estándar de la edad, age en los datos, en el grupo de control (columna 1), restringiendo la muestra a aquellos individuos con noshow igual a 0.\nDespués de eliminar a lo sindividuos que tienen noshow igual a 1, obtenemos la media y desviación estándar reportadas en la tabla. Noten que deben restringir al grupo de control para obtener dichas cifras. La columna del tamaño de la muestra se obtiene sin restringir al grupo de control, aunque esto no se pedía en la pregunta.\n\ndata.angrist &lt;- read_csv(\"../files/STAR_public_use.csv\",\n                       locale = locale(encoding = \"latin1\"))   %&gt;% \n  clean_names() %&gt;% \n  filter(noshow==0)\n\n#Media y desviación estándar\ndata.angrist %&gt;% \n  filter(control==1) %&gt;% \n  summarize(media=mean(age),\n            desvest=sd(age))\n\n# A tibble: 1 × 2\n  media desvest\n  &lt;dbl&gt;   &lt;dbl&gt;\n1  18.3   0.616\n\n#N\ndata.angrist %&gt;% \n  summarize(n())\n\n# A tibble: 1 × 1\n  `n()`\n  &lt;int&gt;\n1  1571\n\n\n[10 puntos] Usando una regresión lineal, muestre que la edad no está correlacionada con la asignación a los tratamientos (ssp, sfp y sfsp). De nuevo, debe restringir la muestra quienes tienen noshow igual a 0. Reporte los coeficientes y los errores estándar (columnas 2 a 4).\nLa regresión es:\n\nsummary(balance &lt;- lm(age ~ ssp + sfp+ sfsp,\n            data = data.angrist))\n\n\nCall:\nlm(formula = age ~ ssp + sfp + sfsp, data = data.angrist)\n\nResiduals:\n    Min      1Q  Median      3Q     Max \n-1.2910 -0.2910 -0.2910 -0.2373  4.7090 \n\nCoefficients:\n            Estimate Std. Error t value Pr(&gt;|t|)    \n(Intercept) 18.29097    0.01985 921.363   &lt;2e-16 ***\nssp         -0.05368    0.04454  -1.205    0.228    \nsfp         -0.03277    0.04395  -0.746    0.456    \nsfsp         0.02558    0.05562   0.460    0.646    \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 0.6125 on 1567 degrees of freedom\nMultiple R-squared:  0.001438,   Adjusted R-squared:  -0.0004737 \nF-statistic: 0.7522 on 3 and 1567 DF,  p-value: 0.5211\n\n\n[5 puntos] Realice una prueba de significancia conjunta de los coeficientes obtenidos en el punto b. Reporte el estadístico \\(F\\) y el valor \\(p\\) asociado (columna 5).\nEl estadístico \\(F\\) ya es calculado con la regresión. Basta con pedirlo:\n\nsummary(balance)$fstatistic\n\n       value        numdf        dendf \n   0.7522152    3.0000000 1567.0000000 \n\n\n¿Pero cómo puedo calcular el valor \\(p\\)? Basta usar la definición, es la probabilidad de observar un valor más extremo que el estadístico, bajo la distribución teórica. En este caso, la distribución teórica es una \\(F\\) y debemos especificar los grados de libertad en el numerador y en el denominador:\n\npf(q = summary(balance)$fstatistic[1],\n   df1 = summary(balance)$fstatistic[2],\n   df2 = summary(balance)$fstatistic[3],\n   lower.tail=FALSE)\n\n    value \n0.5210527 \n\n\n[10 puntos] ¿Cuál es el propósito de la prueba F realizada en el punto c.? ¿Qué hipótesis nula prueban los autores?\nAquí se busca probar que la asignación a los tres tipos de tratamiento no está correlacionada con la edad. La \\(H_0\\) es que \\(\\beta_{SSP}=\\beta_{SFP}=\\beta_{SFSP}=0\\). Si rechazamos la hipótesis nula concluiríamos que hay diferencias entre grupos en la edad En este caso, el estadístico \\(F\\) es pequeño y su valor \\(p\\) indica que es muy probable de observarlo bajo la hipótesis nula por lo que no hay bases para rechazarla."
  },
  {
    "objectID": "tareas/tarea-1-respuestas.html#pregunta-5",
    "href": "tareas/tarea-1-respuestas.html#pregunta-5",
    "title": "Respuestas a la tarea 1",
    "section": "",
    "text": "Nuevamente, use los datos del archivo STAR_public_use.csv para este problema. En este problema, replicará dos columnas del efecto de tratamiento de la Tabla 5. Note que de nuevo se deben usar solo las observaciones que tienen noshow igual a 0. Los autores también sustituyen los valores de gpa_year1 por NA cuando la variable grade_20059_fall es NA; y sustituyen grade_20059_fall por NA cuando la variable gpa_year1 es NA. Además, note que se usan las siguientes variables de control: sex, mtongue, hsgroup, numcourses_nov1, lastmin, mom_edn, y dad_edn, todas ellas categóricas.\n\n[10 puntos] Estime el efecto de cada tipo de tratamiento sobre el promedio o GPA, denotado gpa_year1 en los datos, para toda la muestra (Panel B, columna 1). Calcule correctamente los errores estándar. Interprete los resultados.\nHaciendo la sustitución sugerida por los autores, estimamos:\n\ndata.angrist &lt;- data.angrist %&gt;% \n      mutate(gpa_year1=ifelse(is.na(grade_20059_fall),NA,gpa_year1),\n             grade_20059_fall=ifelse(is.na(gpa_year1),NA,grade_20059_fall))\n\nreg1&lt;-lm(gpa_year1 ~ ssp + sfp+ sfsp+\n           factor(sex)+\n           factor(mtongue)+\n           factor(hsgroup)+\n           factor(numcourses_nov1)+\n           factor(lastmin)+\n           factor(mom_edn)+\n           factor(dad_edn),\n         data=data.angrist)\n\nNoten que los coeficientes estimados son correctos, pero no los errores estándar:\n\nsummary(reg1)$coef[1:4,]\n\n              Estimate Std. Error  t value     Pr(&gt;|t|)\n(Intercept) 1.60138378 0.46453145 3.447310 0.0005854449\nssp         0.07259427 0.06603498 1.099331 0.2718404422\nsfp         0.01025889 0.06515735 0.157448 0.8749178181\nsfsp        0.20971238 0.08554012 2.451626 0.0143604306\n\n\nLos errores estándar correctos son los robustos:\n\ncoeftest(reg1, vcov = vcovHC(reg1, \"HC1\"))[1:4,]\n\n              Estimate Std. Error   t value     Pr(&gt;|t|)\n(Intercept) 1.60138378 0.46059228 3.4767925 0.0005252628\nssp         0.07259427 0.06601070 1.0997349 0.2716642613\nsfp         0.01025889 0.06357889 0.1613569 0.8718389856\nsfsp        0.20971238 0.09221545 2.2741566 0.0231293441\n\n\nFinalmente, lo que se reporta en la tabla como la media del grupo de control no es la constante en la regresión, sino la media y desviación estándar. Noten que se usa la muestra que efectivamente se usa en la regresión, es decir, sin valores faltantes.\n\ndata.angrist %&gt;%\n    filter(!is.na(gpa_year1) & !is.na(grade_20059_fall)\n     & !is.na(ssp)\n     & !is.na(sfp)\n     & !is.na(sfsp)\n     & !is.na(sex)\n     & !is.na(mtongue)\n     & !is.na(hsgroup)\n     & !is.na(numcourses_nov1)\n     & !is.na(lastmin)\n     & !is.na(mom_edn)\n     & !is.na(dad_edn)\n     & control==1) %&gt;%\n  summarize(media=mean(gpa_year1,\n                       na.rm=TRUE),\n            desvest=sd(gpa_year1,\n                       na.rm=TRUE))\n\n# A tibble: 1 × 2\n  media desvest\n  &lt;dbl&gt;   &lt;dbl&gt;\n1  1.80   0.902\n\ndata.angrist %&gt;%\n  filter(!is.na(gpa_year1) & !is.na(grade_20059_fall)\n     & !is.na(ssp)\n     & !is.na(sfp)\n     & !is.na(sfsp)\n     & !is.na(sex)\n     & !is.na(mtongue)\n     & !is.na(hsgroup)\n     & !is.na(numcourses_nov1)\n     & !is.na(lastmin)\n     & !is.na(mom_edn)\n     & !is.na(dad_edn)) %&gt;%\n  summarize(numero=n())\n\n# A tibble: 1 × 1\n  numero\n   &lt;int&gt;\n1   1255\n\n\n[10 puntos] Estime el efecto sobre el GPA de recibir cada tipo de tratamiento, considerando los tratamientos SSP o SFP (de cualquier tipo) en los hombres de la muestra (Panel B, columna 5). Esto es, considere el tratamiento SSP como un primer tipo de tratamiento y, ya sea SFP o SFSP, como un segundo tipo de tratamiento. Calcule correctamente los errores estándar. Interprete sus resultados.\nDefinimos la variable de recibir el tratamiento SFP o SFSP. Luego estimamos:\n\ndata.angrist &lt;- data.angrist %&gt;%\n      mutate(sspany = ifelse(sfp == 1 | sfsp == 1, 1, \n    0))\n\nreg2&lt;-lm(gpa_year1 ~ ssp + sspany+\n           factor(mtongue)+\n           factor(hsgroup)+\n           factor(numcourses_nov1)+\n           factor(lastmin)+\n           factor(mom_edn)+\n           factor(dad_edn),\n         data=filter(data.angrist,\n                     female==0))\n\nLos coeficientes con los errores correctos son:\n\ncoeftest(reg2, vcov = vcovHC(reg2, \"HC1\"))[1:3,]\n\n                Estimate Std. Error     t value    Pr(&gt;|t|)\n(Intercept)  1.488578569 0.51919391  2.86709560 0.004319175\nssp          0.007920013 0.10719768  0.07388232 0.941133873\nsspany      -0.042402063 0.09476171 -0.44745989 0.654738783\n\n\nLa media en el control:\n\ndata.angrist %&gt;%\n  filter(!is.na(gpa_year1) & !is.na(grade_20059_fall)\n     & !is.na(ssp)\n     & !is.na(sfp)\n     & !is.na(sfsp)\n     & !is.na(sex)\n     & !is.na(mtongue)\n     & !is.na(hsgroup)\n     & !is.na(numcourses_nov1)\n     & !is.na(lastmin)\n     & !is.na(mom_edn)\n     & !is.na(dad_edn)\n     & control==1\n     & female==0) %&gt;%\n  summarize(media=mean(gpa_year1,\n                       na.rm=TRUE),\n            desvest=sd(gpa_year1,\n                       na.rm=TRUE))\n\n# A tibble: 1 × 2\n  media desvest\n  &lt;dbl&gt;   &lt;dbl&gt;\n1  1.91   0.908\n\ndata.angrist %&gt;%\n  filter(!is.na(gpa_year1) & !is.na(grade_20059_fall)\n     & !is.na(ssp)\n     & !is.na(sfp)\n     & !is.na(sfsp)\n     & !is.na(sex)\n     & !is.na(mtongue)\n     & !is.na(hsgroup)\n     & !is.na(numcourses_nov1)\n     & !is.na(lastmin)\n     & !is.na(mom_edn)\n     & !is.na(dad_edn)\n     & female==0) %&gt;%\n  summarize(numero=n())\n\n# A tibble: 1 × 1\n  numero\n   &lt;int&gt;\n1    526"
  },
  {
    "objectID": "tareas/tarea-1-respuestas.html#footnotes",
    "href": "tareas/tarea-1-respuestas.html#footnotes",
    "title": "Respuestas a la tarea 1",
    "section": "Notas",
    "text": "Notas\n\n\nAngrist, J., Lang, D., y Oreopoulos, P. (2009). Incentives and services for college achievement: Evidence from a randomized trial. American Economic Journal: Applied Economics, 1(1), 136-63.↩︎"
  },
  {
    "objectID": "tareas/tarea-2-respuestas.html",
    "href": "tareas/tarea-2-respuestas.html",
    "title": "Respuestas a la tarea 2",
    "section": "",
    "text": "En esta pregunta usaremos un ejemplo de el estudio con asignación experimental de Banerjee et al. (2015)1 para fijar algunas ideas referentes al análisis de una intervención de este tipo. A diferencia de otros ejemplos vistos en clase, este es un experimento a gran escala. Por favor, utilice la versión publicada, así como el material suplementario.\n\n[5 puntos] Describa brevemente en qué consiste la intervención que se discute en el artículo.\nLa intervención que se reporta en el artículo es descrita como una intervención holística. Se trata de un paquete de intervenciones que incluyen una transferencia monetaria periódica, la dotación de activos productivos, un instrumento de acceso a ahorro, así como servicios de salud y educación básicos.\nLa idea es inducir un fuerte impulso para el ingreso y las oportunidades de generar ingreso de los hogares pobres. El programa tiene un enfoque de graduación, es decir, busca que, a partir de cierto momento, los hogares ya no requieran el apoyo del programa para sostener unas condiciones de vida mejores.\n[5 puntos] Describa brevemente en qué consiste el diseño experimental, es decir, ¿cómo se construye la variación que permite identificar el efecto del tratamiento? ¿Cómo se construyen los grupos de tratamiento y control?\nEl experimento se desarrolló en seis países. En cada uno, un proceso participativo permitió identificar a los hogares elegibles. En tres de los países del experimento, la asignación del tratamiento fue aleatorizada de manera simple, es decir, aproximadamente la mitad de los hogares fueron asignados al azar a ser tratados y la otra parte no.\nEn los otros tres países, la asignación fue mediante una aleatorización por grupos, con una primera asignación aleatoria del tratamiento a nivel localidad y una segunda asignación aleatoria a nivel hogar. Es decir, en estos tres países existieron localidades de tratamiento y de control. En las localidades de control nadie recibió el tratamiento. En las localidades de tratamiento, sin embargo, algunos hogares recibieron la intervención y algunos no.\n[5 puntos] En la página 1260799-7 se presenta una subsección denominada Atrition. Describa brevemente el propósito de este análisis y qué se concluye al respecto.\nEste análisis tiene el objetivo de demostrar que los hogares que abandonaron el programa no eran diferentes de aquellos que permanecieron en el mismo. Esto es importante porque podría ser que los hogares que dejan el programa sean distintos que los que se quedan, ocasionando un problema de selección. Por ejemplo, si los hogares más pobres dejan el programa en una mayor proporción que los hogares menos pobres, el grupo final con el que se estima el impacto tendrá una composición relativamente menos pobre, con lo que es probable que se sobre estime el impacto del programa.\nEn este experimento, la atrición fue, en promedio, de 6% en la encuesta de seguimiento después de 24 meses, y de 9% en la encuesta de seguimiento después de 36 meses.\nLos autores concluyen que la atrición no dio lugar a un sesgo porla composición del grupo de personas que tomaron las dos encuestas de seguimiento (ver tabla S1f del material suplementario).\n[5 puntos] En la página 1260799-7, la subsección Compliance with treatment assignment concluye que los efectos estimados en el artículo se refieren a un efecto de intención a tratar o intent-to-treat o ITT. ¿Por qué?\nLos autores reportan que en cinco de los seis países la adopción del tratamiento fue perfecta: ninguno de los hogares asignados al grupo de control recibió el tratamiento y todos los hogares asignados a ser tratados recibieron la intervención. Son embargo, en India esto no fue así. Solo el 52% de los hogares asignados al tratamiento lo recibieron, por razones que van desde cuestiones religiosas hasta normas sociales.\nPor esta razón, los investigadores reconocen que el efecto estimado es un efecto de intención a tratar o ITT, que compara los resultados entre los grupos de asignación, ignorando la decisión de adoptar o no.\nLos autores pudieron haber decidido estimar aquí el LATE. Aunque en el caso de los cinco países con cumplimiento perfecto, el resultado se mantendría inalterado.\n[5 puntos] En la página 1260799-8 se discuten dos métodos para tomar en cuenta la prueba de hipótesis múltiples. Describa brevemente por qué puede ser problemático probar múltiples hipótesis y cuáles son las dos formas en que los autores enfrentan este problema.\nProbar múltiples hipótesis incrementa exponencialmente la probabilidad de obtener un efecto estadísticamente signficativo por suerte. Para tomar en cuenta este problema, los autores emplean dos métodos que son los vistos en clase.\nPrimero, se emplean índices para agregar las variables que pertenecen a una familia en un solo indicador. De hecho, los impactos sobre los índices de la tabla 3 del artículo son los que se consideran los resultados principales del trabajo.\nSegundo, se emplea la corrección de Benjamini & Hochberg, descrita en clase. Esto se describe en la página 5 del material suplementario. Los autores realizan un procedimiento un poco más general. Realizan el mismo procedimiento que vimos en clase pero para todos los posibles valores de \\(\\alpha\\), el nivel de significancia. Por ejemplo, primero se fija \\(\\alpha=1.000\\) y se realiza el procedimiento de Benjamini & Hochberg. Luego se toma \\(\\alpha=0.0999\\) y se realiza lo mismo. Así sucesivamente hasta llegar a fijar \\(\\alpha=0.000\\). Así, para cada hipótesis, los autores son capaces de identificar el valor de \\(\\alpha\\) más pequeño tal que se rechace la hipótesis nula y a dicho valor le llaman valor \\(q\\). Este valor se reporta en la columna 5 de la tabla 3 y se puede interpretar como interpretamos el valor \\(p\\).\nNOTA: El procedimiento de Benjamini & Hochberg es tedioso y lo es más el cálculo de los valores \\(q\\). No es algo que se pediría hacer en un examen, aunque sí es importante entender el concepto y la idea detrás de la corrección.\n[5 puntos] En la página 1260799-12 se discute la posible presencia de efectos de derramamiento o spillovers. Describa brevemente en qué consisten dichos efectos de derramamiento y cómo los autores muestran la presencia o ausencia de dichos efectos usando regresiones.\nLos efectos de derramamiento ocurren cuando hogares asignados al grupo de control se benefician indirectamente del tratamiento. Podría ocurrir, por ejemplo, que los hogares tratados le donaran parte de los recursos de su transferencia monetaria a hogares del grupo de control. Otra forma de efecto de derramamiento ocurre son los efectos de equilibrio general, por ejemplo, cuando la intervención genera inflación a nivel local, afectando el nivel de ingreso real de los hogares tratados y no tratados por igual.\nEl diseño experimental de este estudio permite probar empíricamente la presencia de efectos de derramamiento al explotar la variación entre localidades en los tres países con aleatorización por grupos. En particular, se pueden comparar a los hogares en las localidades de control (controles puros) con los hogares no tratados en localidades de tratamiento, que son los que pudieron estar expuestos a los efectos de derramamiento.\nDado que no existen diferencias estadísticamente significativas en las variables de impacto (ver tabla S6a del material suplementario), se descarta la presencia de efectos de derramamiento.\n\n\n\n\nEn Crepon et al. (2015)2 se estudia una intervención en Marruecos en la que se analiza el efecto de la adopción de microfinanzas, a través de un experimento de campo. En 81 de 162 localidades estudiadas se introdujo aleatoriamente una empresa de microfinanzas. Para seleccionar las localidades de tratamiento, primero se emparejaron localidades de acuerdo a características observables y, para cada pareja se asignó a tratamiento y otra a control. La variable que identifica a las parejas es paire. La base de datos crepon_morocco_balance.csv contiene los datos de este estudio usados para mostrar la integridad del diseño. La variable treatment es la variable de asignación aleatoria, mientras que la variable client es la variable de adopción\n\n[3 puntos] Primero recordaremos cómo mostrar que el tratamiento efectivamente fue asignado de manera aleatoria. El siguiente código lee los datos que debemos usar y se queda con las observaciones de la línea base. Con estos datos, mostraremos que la variable members_resid_bl, que indica el número de personas que viven en cada hogar está balanceado entre los grupos asignados a tratamiento y control. Noten que la media del número de personas que viven en el hogar en el grupo de control es 5.14 (d.e. 2.70) y que hay 2,266 hogares en dicho grupo de control. Esto es exactamente lo que se reporta en la fila correspondiente a Number members en la tabla 1 del artículo.\n\n  data.morocco&lt;-read_csv(\"../files/crepon_morocco_balance.csv\",\n                         locale = locale(encoding = \"latin1\")) %&gt;% \n    clean_names() %&gt;% \n    filter(merge_indicator!=1)\n\n  data.morocco %&gt;% \n    group_by(treatment) %&gt;%\n    summarize(mean=mean(members_resid_bl, na.rm=T),\n              std=sd(members_resid_bl, na.rm=T),\n              n=n()) %&gt;% \n    ungroup()\n\n# A tibble: 2 × 4\n  treatment  mean   std     n\n      &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt;\n1         0  5.14  2.69  2266\n2         1  5.19  2.76  2199\n\n\nObtenga ahora el valor de la diferencia entre el grupo de tratamiento y el de control, así como su valor \\(p\\) (últimas dos columnas). Para ello, estime una regresión en la que la variable dependiente sea número de personas que vive en el hogar members_resid_bl, en función de la variable de asignación treatment y variables dummy de pareja de localidad (la variable paire indica cuáles son las parejas). La regresión permite recuperar la diferencia de 0.04 personas que se reporta en la fila correspondiente en la tabla 1. Para recuperar el valor \\(p\\), estime errores agrupados usando la variable demi_paire, que es la clave de las distintas localidades, como variable de agrupación. Una forma de realizar esto es con la función coef_test del paquete clubSandwich.3\nEstimamos la regresión con el número de personas como variable dependiente en función de la asignación al tratamiento y de las parejas:\n\ndif_members &lt;- lm(members_resid_bl ~ treatment + factor(paire),\n   data=data.morocco)\n\nsummary(dif_members)$coef[1:7,]\n\n                  Estimate Std. Error    t value     Pr(&gt;|t|)\n(Intercept)     4.06166091  0.3047365 13.3284357 9.311212e-40\ntreatment       0.04334484  0.0707258  0.6128576 5.400023e-01\nfactor(paire)2  1.78431373  0.4152704  4.2967514 1.770771e-05\nfactor(paire)3  1.06107184  0.4356350  2.4356902 1.490300e-02\nfactor(paire)4 -3.08333333  0.4594672 -6.7106719 2.184193e-11\nfactor(paire)5  1.85814080  0.4442115  4.1830089 2.933028e-05\nfactor(paire)6  2.88352450  0.4262934  6.7641779 1.517259e-11\n\nnobs(dif_members)\n\n[1] 4465\n\ncoef_test(dif_members,\n          vcov = \"CR1S\", \n          cluster = data.morocco$demi_paire)[1:2,]\n\n       Coef. Estimate     SE t-stat d.f. (Satt) p-val (Satt) Sig.\n (Intercept)   4.0617 0.0647  62.80        1.03      0.00911   **\n   treatment   0.0433 0.0787   0.55       76.54      0.58361     \n\n\nObtenemos un coeficiente de 0.04334484, que se redondea a 0.04 en la tabla. El valor \\(p\\) de 0.583 es exactamente el reportado en la última columna. Aquí lo clave es calcular los errores agrupados.\n[2 puntos] Ahora mostremos que efectivamente este es un ejemplo de una intervención con cumplimiento imperfecto. Genere un cuadro que indique: 1) cuántas personas que fueron asignadas a recibir el tratamiento efectivamente fueron clientes; 2) cuántas personas que fueron asignadas a recibir el tratamiento no se convirtieron en clientes; 3) cuántas personas que no fueron asignadas a recibir el tratamiento sí se convirtieron en clientes; y 4) cuántas personas que no fueron asignadas a recibir el tratamiento tampoco se convirtieron en clientes.\n\ndata.morocco %&gt;%\n  mutate(treatment=factor(treatment, levels=c(0,1),labels=c(\"Control\", \"Tratamiento\"))) %&gt;%\n      mutate(client=factor(client, levels=c(0,1),labels=c(\"No cliente\", \"Cliente\"))) %&gt;% \n  tabyl(treatment, client,\n        show_na = F)\n\n   treatment No cliente Cliente\n     Control       2101       0\n Tratamiento       1753     251\n\n\nEste es un ejemplo de una intervención con incumplimiento de un solo lado. De aquellos asignados al tratamiento, 251 se convirtieron en clientes y 1,753 no. De aquellos asignados al control, ninguno tuvo acceso a microfinanzas. En otras palabras, podemos descartar la presencia de siempre cumplidores (always-takers). Por tanto, en este tipo de aplicaciones, el efecto del tratamiento en los tratados (támbien llamado TOT, ATET o TT) es igual al LATE.\n[5 puntos] Ahora mostraremos que la adopción, es decir, convertirse en cliente, no es independiente de las características de los hogares. Considere las variables members_resid_bl y act_number_bl, que indican el número de miembros del hogar y el número de actividades económicas del hogar. Para cada una de estas dos variables, utilice la misma especificación que en la parte a., pero ahora usando la variable cliente como regresor. ¿Qué concluye?\nPara el número de miembros del hogar:\n\nr1 &lt;- lm(members_resid_bl ~ client + factor(paire),\n                         data=data.morocco)\ncoef_test(r1,\n          vcov = \"CR1S\", \n          cluster = data.morocco$demi_paire)[1:2,]\n\n       Coef. Estimate    SE t-stat d.f. (Satt) p-val (Satt) Sig.\n (Intercept)     4.18 0.128  32.70         1.0       0.0195    *\n      client     0.43 0.180   2.38        45.4       0.0214    *\n\n\nPara el número de actividades económicas del hogar:\n\nr2 &lt;- lm(act_number_bl ~ client + factor(paire),\n                            data=data.morocco)\ncoef_test(r2,\n          vcov = \"CR1S\", \n          cluster = data.morocco$demi_paire)[1:2,]\n\n       Coef. Estimate     SE t-stat d.f. (Satt) p-val (Satt) Sig.\n (Intercept)    1.109 0.2330   4.76         1.0      0.13185     \n      client    0.191 0.0687   2.78        45.4      0.00787   **\n\n\nLa adopción no es independiente de las características de los hogares. Parece ser que los hogares que se convierten en clientes son más grandes y tienen más actividades económicas. Por tanto, comparar las variables de impacto entre quienes adoptarony no adoptaron implicaría un sesgo de selección.\n[5 puntos] Con estos elementos estamos convencidos de que es necesario emplear lo que sabemos sobre cumplimiento imperfecto. Usaremos ahora los datos en crepon_morocco_analysis.csv, que contiene los datos empleados para evaluar el impacto de la adopción. Estos datos están listos para analizarse. Estime la forma reducida del efecto de ser asignado al tratamiento sobre gasto total, expense_total. Comente los resultados, en particular, comente sobre la magnitud y la significancia estadística de la variable treatment. Aquí y en adelante, incluya los siguientes controles en la regresión: members_resid_bl, nadults_resid_bl, head_age_bl, act_livestock_bl, act_business_bl, borrowed_total_bl, members_resid_d_bl, nadults_resid_d_bl, head_age_d_bl, act_livestock_d_bl, act_business_d_bl, borrowed_total_d_bl, ccm_resp_activ, other_resp_activ, ccm_resp_activ_d y other_resp_activ_d. Además, incluya efectos fijos por pareja introduciendo la variable paire como factor. Use los mismos errores estándar que en la parte a. Con esto deberá poder recuperar el coeficiente y el error estándar de la columna (3) de la tabla 3.\nLa forma reducida estima la relación causal entre la variable de gasto y la asignación aleatoria. Se estima un efecto de 4057 unidades monetarias en el gasto, estadísticamente significativo al 5%. Este es el efecto de ser asignado al tratamiento o ITT.\n\ndata.morocco&lt;-read_csv(\"../files/crepon_morocco_analysis.csv\")   %&gt;% \n  clean_names() \n\nres_fr&lt;- lm(expense_total ~ treatment +\n              members_resid_bl + nadults_resid_bl +\n              head_age_bl + act_livestock_bl + act_business_bl +\n              borrowed_total_bl + members_resid_d_bl +\n              nadults_resid_d_bl + head_age_d_bl + act_livestock_d_bl +\n              act_business_d_bl + borrowed_total_d_bl +\n              ccm_resp_activ + other_resp_activ + ccm_resp_activ_d + \n              other_resp_activ_d + factor(paire),\n            data=data.morocco)\n\ncoef_test(res_fr,\n          vcov = \"CR1S\",\n          cluster = data.morocco$demi_paire)[1:2,]\n\n       Coef. Estimate   SE t-stat d.f. (Satt) p-val (Satt) Sig.\n (Intercept)   -18493 6735  -2.75         2.1        0.105     \n   treatment     4057 1721   2.36        74.4        0.021    *\n\n\nEste efecto estimado tiene una interpretación causal. Sin embargo, lo que nos está diciendo es la diferencia en el gasto en hogares donde el programa fue ofrecido y donde no. Pero no la diferencia en el efectivamente usar microfinanzas, que puede ser el parámetro de mayor interés. En otras palabras, el ITT es como un efecto del tratamiento, diluido por el no cumplimiento.\n[5 puntos] Estime ahora la primera etapa, es decir, estime por MCO el efecto causal de la asignación sobre la adopción. Comente sobre la magnitud, la significancia estadística y la interpretación de la variable treatment en términos del comportamiento de los cumplidores. Debería poder replicar el coeficiente y el error estándar de la columna 1 en la tabla 2 del artículo.\nLa primera etapa muestra un aumento de 16.7% en la probabilidad de ser cliente debido al tratamiento. Este efecto es estadísticamente significativo al 10%. En otras palabras, 16.7% de los individuos en la muestra son cumplidores, es decir, se vuelven clientes solo porque se les ofreció el tratamiento.\n\nres_fs&lt;- lm(client ~ treatment +\n              members_resid_bl + nadults_resid_bl +\n                head_age_bl + act_livestock_bl + act_business_bl +\n                borrowed_total_bl + members_resid_d_bl +\n                nadults_resid_d_bl + head_age_d_bl + act_livestock_d_bl +\n                act_business_d_bl + borrowed_total_d_bl +\n                ccm_resp_activ + other_resp_activ + ccm_resp_activ_d + \n                other_resp_activ_d + factor(paire),\n            data=data.morocco)\n\ncoef_test(res_fs,\n          vcov = \"CR1S\", \n          cluster = data.morocco$demi_paire)[1:2,]\n\n       Coef. Estimate     SE t-stat d.f. (Satt) p-val (Satt) Sig.\n (Intercept)  -0.0988 0.0549   -1.8         2.1        0.208     \n   treatment   0.1672 0.0118   14.2        74.4       &lt;0.001  ***\n\n\n[5 puntos] Considere la columna 3 del panel A en la Tabla 9 del artículo. Aquí se reporta la estimación por MCO de la relación entre client y gasto total, con los mismos controles y tipo de errores que antes. Replique este resultado. ¿Se puede interpretar de forma causal el coeficiente sobre client?\nNoten que para replicar la entrada la clave está en condicionar a aquellos asignados al tratamiento (como se indica en la tabla del artículo). No se puede interpretar de manera causal la relación de 11934 unidades monetarias más en el gasto en los clientes con respecto a los no clientes pues es muy posible que haya sesgo de selección. Por ejemplo, si los hogares más educados deciden adoptar en mayor medida los productos de microfinanzas, es posible pensar que esos mismos hogares hubieran tenido mayor gasto incluso sin microfinanzas. Estaríamos entonces sobreestimando el efecto del tratamiento.\n\nres_mco &lt;- lm(expense_total ~ client +\n                members_resid_bl + nadults_resid_bl +\n                head_age_bl + act_livestock_bl + act_business_bl +\n                borrowed_total_bl + members_resid_d_bl +\n                nadults_resid_d_bl + head_age_d_bl + act_livestock_d_bl +\n                act_business_d_bl + borrowed_total_d_bl +\n                ccm_resp_activ + other_resp_activ + ccm_resp_activ_d + \n                other_resp_activ_d + factor(paire),\n              data=filter(data.morocco,treatment==1))\n\ncoef_test(res_mco,\n          vcov = \"CR1S\", \n          cluster =filter(data.morocco,treatment==1)$demi_paire)[1:2,]\n\n       Coef. Estimate   SE t-stat d.f. (Satt) p-val (Satt) Sig.\n (Intercept)   -12718 9447  -1.35        65.8       0.1828     \n      client    11934 5580   2.14        41.1       0.0384    *\n\n\n[5 puntos] ¿Cuáles son los dos supuestos econométricos que permiten la estimación del Local Average Treatment Effect (LATE) en el contexto de este problema? Comente sobre la evidencia que respalda el supuesto de que los instrumentos no son débiles en este problema.\nLos supuestos necesarios son:\nRelevancia del instrumento. Se requiere que la asignación aleatoria del tratamiento efectivamente afecte la probabilidad de ser cliente. La evidencia que respalda este requerimiento es el resultado de la primera etapa. El estadístico \\(F\\) de la primera etapa es 10.86, apenas arriba de la regla de dedo de 10 que comúnmente se usa para decir que no hay presencia de instrumentos débiles.\nExclusión. Se requiere que el instrumento no pertenezca a la ecuación estructural. Esto se garantiza por la asignación aleatoria del tratamiento.\n[5 puntos] Estime el efecto del cumplimiento sobre el gasto total, usando la asignación aleatoria como instrumento del cumplimiento. Es decir, estime el LATE. Use los mismos controles y tipo de errores que en c. Este resultado se reporta en la columna 3 del panel B en la Tabla 9. ¿Cuál es la interpretación del coeficiente de la variable client? En R, la función ivreg del paquete AER le permite hacer la estimación de MC2E.\nEl LATE estimado es de 24263 monetarias adicionales de gasto debido a ser cliente. Esta cifra es considerablemente mayor que las 4057 unidades monetarias estimada en la forma reducida. Este es un efecto local pues solo considera el cambio en el gasto debido a ser cliente de la microfinanciera, en aquellos individuos que cambiaron su comportamiento debido a la asignación aleatoria del tratamiento. Noten también que en todas las regresiones se incluye errores agrupados a nivel pareja o paire.\n\nres_iv &lt;- ivreg(expense_total ~ client + members_resid_bl + nadults_resid_bl\n     + head_age_bl + act_livestock_bl + act_business_bl \n     + borrowed_total_bl + members_resid_d_bl + nadults_resid_d_bl\n     + head_age_d_bl + act_livestock_d_bl + act_business_d_bl \n     + borrowed_total_d_bl + ccm_resp_activ + other_resp_activ \n     + ccm_resp_activ_d  + other_resp_activ_d + factor(paire) |\n       treatment +  members_resid_bl + nadults_resid_bl\n     + head_age_bl + act_livestock_bl + act_business_bl \n     + borrowed_total_bl + members_resid_d_bl + nadults_resid_d_bl\n     + head_age_d_bl + act_livestock_d_bl + act_business_d_bl \n     + borrowed_total_d_bl + ccm_resp_activ + other_resp_activ \n     + ccm_resp_activ_d  + other_resp_activ_d + factor(paire),\n     data=data.morocco)\n\nsummary(res_iv)$coefficients[1:2,]\n\n             Estimate Std. Error   t value   Pr(&gt;|t|)\n(Intercept) -16095.68   11033.49 -1.458802 0.14468442\nclient       24263.46   12419.55  1.953651 0.05080007\n\ncoef_test(res_iv,\n          vcov = \"CR1S\", \n          cluster = data.morocco$demi_paire)[1:2,]\n\n       Coef. Estimate   SE t-stat d.f. (Satt) p-val (Satt) Sig.\n (Intercept)   -16096 7144  -2.25        2.11       0.1464     \n      client    24263 9944   2.44       74.45       0.0171    *\n\n\n\n\n\n\nSea una variable de resultados \\(y_i\\), una variable de asignación aleatoria \\(Z_i\\) y una variable de adopción \\(D_i\\). El estimador de Wald se define como:\n\\[\\hat{\\beta}_{Wald}=\\frac{\\bar{Y}_{Z_i=1}-\\bar{Y}_{Z_i=0}}{\\bar{D}_{Z_i=1}-\\bar{D}_{Z_i=0}}\\]\nEn esta pregunta mostraremos cómo el estimador de Wald es equivalente al estimador de VI cuando no hay controles. Use nuevamente los datos en crepon_morocco_analysis.csv.\n\n[5 puntos] Obtenga el estimador de Wald como el cociente de la diferencia en gasto total promedio entre los hogares asignados a tratamiento y control dividido por la diferencia en la probabilidad de adopción entre los hogares asignados a tratamiento y control. Recuerde que la variable del gasto total es expense_total.\nObtenemos el estadístico de Wald, usando la definición:\n\ndata.morocco&lt;-read_csv(\"../files/crepon_morocco_analysis.csv\")   %&gt;% \n  clean_names() \n\nmean_cliente&lt;-data.morocco %&gt;%\n  group_by(treatment) %&gt;% \n  summarize(p_cliente=mean(client, na.rm=F)) %&gt;% \n  ungroup()\n\nmean_gasto&lt;-data.morocco %&gt;%\n  group_by(treatment) %&gt;% \n  summarize(m_gasto=mean(expense_total, na.rm=F)) %&gt;% \n  ungroup()\n\n#Neceistamos la diferencia de gastos y de probabilidad de ser cliente\ndif_gasto &lt;- mean_gasto[2,2]-mean_gasto[1,2]\ndif_cliente &lt;- mean_cliente[2,2]-mean_cliente[1,2]\n\nWald &lt;- as.numeric(dif_gasto / dif_cliente)\nWald\n\n[1] 22869.23\n\n\n[5 puntos] Ahora estime por MC2E el efecto de la adopción sobre el gasto total, usando la variable de asignación como instrumento para la adopción. ¿Qué ventaja observa con respecto al estimador de Wald?\nNotemos que obtenemos lo mismo al hacer una estimación de variables instrumentales. El coeficiente sobre la variable client es igual al estadístico de Wald. El estadístico de Wald es idéntico al estimador de variables instrumentales cuando el instrumento es binario. La mayor ventaja de realizar la estimación de esta manera es que podemos obtener errores estándar, lo cual nos permite hacer inferencia estadística sobre el tamaño del efecto de ser cliente en el gasto.\n\nWald_vi &lt;- ivreg(expense_total ~ client  | treatment,\n                data=data.morocco)\n\n#Notemos que obtenemos directamente el error estándar\nsummary(Wald_vi)\n\n\nCall:\nivreg(formula = expense_total ~ client | treatment, data = data.morocco)\n\nResiduals:\n    Min      1Q  Median      3Q     Max \n -44264  -21394  -17064   -4804 1305816 \n\nCoefficients:\n            Estimate Std. Error t value Pr(&gt;|t|)    \n(Intercept)    21395       1496  14.298   &lt;2e-16 ***\nclient         22869      12684   1.803   0.0714 .  \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 74610 on 4932 degrees of freedom\nMultiple R-Squared: 0.00651, Adjusted R-squared: 0.006309 \nWald test: 3.251 on 1 and 4932 DF,  p-value: 0.07144 \n\n\nMás aún, podríamos obtener el mismo coeficiente haciendo MC2E a mano, lo cual nunca es recomendable debido a que la inferencia sobre el coeficiente de la segunda etapa es incorrecta. Sin embargo, nos deja ver cómo podemos entender el proceso de estimación conceptualmente.\nEstimamos la primera etapa y obtenemos los valores ajustados:\n\np.e &lt;- lm(client ~ treatment,\n                data=data.morocco)\n\ndata.morocco &lt;- data.morocco %&gt;% \n  mutate(client_hat = predict(p.e))\n\nAhora usamos los valores ajustados en la regresión de la segunda etapa:\n\ns.e &lt;- lm(expense_total ~ client_hat,\n                data=data.morocco)\n\nsummary(s.e)\n\n\nCall:\nlm(formula = expense_total ~ client_hat, data = data.morocco)\n\nResiduals:\n    Min      1Q  Median      3Q     Max \n -25225  -21394  -17879   -5647 1305816 \n\nCoefficients:\n            Estimate Std. Error t value Pr(&gt;|t|)    \n(Intercept)    21395       1501  14.256   &lt;2e-16 ***\nclient_hat     22869      12721   1.798   0.0723 .  \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 74830 on 4932 degrees of freedom\nMultiple R-squared:  0.0006549,  Adjusted R-squared:  0.0004522 \nF-statistic: 3.232 on 1 and 4932 DF,  p-value: 0.07228\n\n\nY obtenemos de nuevo 22,869 unidades monetarias como impacto estimado.\n\n\n\n\nConsidere nuevamente la base STAR_public_use.csv usada en la Tarea 1 del artículo Angrist, Lang y Oreopoulos (2009)4. En esta pregunta nos concentraremos en los efectos de la intervención en el año 2, mostrados en la columna (4) de la Tabla 6, sobre dos variables, el promedio de calificaciones gpa_year2 y los créditos completados credits_earned2.\nEl propósito de esta pregunta es mostrar la función de los \\(z\\)-scores en el análisis de efectos de tratamiento. De nuevo, puede quedarse solo con las observaciones que tienen noshow igual a 0. Antes de comenzar su análisis, sustituya por NA los valores en credits_earned2 para aquellas observaciones que tienen \\(NA\\) en la variable prob_year1.\n\n[5 puntos] Para tener un punto de comparación, estime la ecuación del efecto de tratamiento para gpa_year2 usando la misma especificación que en la pregunta 5 de la Tarea 1. Use también errores robustos. Deberá poder replicar los coeficientes y errores estándar del panel A, columna (4). ¿Cómo se interpretan el coeficiente sobre la variable ssp?\nUsando la misma especificación que usamos en la Tarea 1, obtenemos los coeficientes en el artículo.\n\ndata.angrist&lt;-read_csv(\"../files/STAR_public_use.csv\",\n                 locale = locale(encoding = \"latin1\"))   %&gt;% \n  clean_names()\n\ndata.angrist&lt;-data.angrist %&gt;% \n  filter(noshow==0) %&gt;% \n  mutate(credits_earned2=ifelse(is.na(prob_year1),NA,credits_earned2)) \n\n\nr1 &lt;-lm(gpa_year2 ~ ssp + sfp+ sfsp+\n             factor(sex)+\n             factor(mtongue)+\n             factor(hsgroup)+\n             factor(numcourses_nov1)+\n             factor(lastmin)+\n             factor(mom_edn)+\n             factor(dad_edn),\n           data.angrist)\ncoeftest(r1, vcov = vcovHC(r1, \"HC1\"))[1:4,]\n\n               Estimate Std. Error    t value     Pr(&gt;|t|)\n(Intercept)  2.87240513 0.45314003  6.3388908 3.261488e-10\nssp          0.05018813 0.07423854  0.6760388 4.991454e-01\nsfp         -0.01807372 0.06618352 -0.2730848 7.848347e-01\nsfsp         0.07158763 0.09081195  0.7883063 4.306722e-01\n\n\n[5 puntos] Genere un \\(z\\)-score para la variable gpa_year2 al que llame gpa_year2_sd. Para ello, calcule la media y desviación estándar de gpa_year2 para el grupo de control y luego genere gpa_year2_sd restándole a gpa_year2 la media obtenida y dividiendo esta diferencia por la desviación estándar obtenida. Compruebe que si calcula la media y la desviación estándar de gpa_year2_sd, en el grupo de control estas deberían ser 0 y 1, respectivamente.\nCreamos un z-score:\n\ngpa_year2_stats &lt;- data.angrist %&gt;% \n    filter(control==1) %&gt;% \n    summarize(media=mean(gpa_year2,na.rm=T),\n              desvest=sd(gpa_year2,na.rm=T))\n\ndata.angrist &lt;- data.angrist %&gt;% \n    mutate(gpa_year2_sd=(gpa_year2-gpa_year2_stats$media)/gpa_year2_stats$desvest)\n\nTiene media igual a 0:\n\ndata.angrist %&gt;%\n  filter(control==1) %&gt;% \n  summarize(media=mean(gpa_year2_sd,na.rm=T))\n\n# A tibble: 1 × 1\n     media\n     &lt;dbl&gt;\n1 1.60e-16\n\n\nY desviación estándar igual a 1:\n\ndata.angrist %&gt;%\n  filter(control==1) %&gt;% \n  summarize(desvest=sd(gpa_year2_sd,na.rm=T)) \n\n# A tibble: 1 × 1\n  desvest\n    &lt;dbl&gt;\n1       1\n\n\n[5 puntos] Realice la misma estimación que en la parte a., pero ahora use como variable dependiente gpa_year2_sd. ¿Cómo se interpreta el coeficiente sobre ssp? ¿Qué es diferente y qué es igual entre los resultados obtenidos en esta parte y los obtenidos en la parte a.?\nRealizamos la estimación, pero con la variable dependiente estandarizada:\n\nr2 &lt;-lm(gpa_year2_sd ~ ssp + sfp+ sfsp+\n             factor(sex)+\n             factor(mtongue)+\n             factor(hsgroup)+\n             factor(numcourses_nov1)+\n             factor(lastmin)+\n             factor(mom_edn)+\n             factor(dad_edn),\n           data.angrist)\n\ncoeftest(r2, vcov = vcovHC(r2, \"HC1\"))[1:4,]\n\n               Estimate Std. Error    t value   Pr(&gt;|t|)\n(Intercept)  0.94640721 0.50806908  1.8627530 0.06273961\nssp          0.05627187 0.08323764  0.6760388 0.49914542\nsfp         -0.02026459 0.07420621 -0.2730848 0.78483470\nsfsp         0.08026539 0.10182006  0.7883063 0.43067220\n\n\nLos coeficientes estimados son diferentes. Ahora el coeficiente sobre ssp es el efecto que tiene el programa en el z-score del promedio de calificaciones, es decir, el SSP tiene un efecto de 0.056 desviaciones estándar en el z-score del promedio de calificaciones, aunque este efecto no es estadísticamente significativo. La magnitud del error estándar también es diferente, pues ahora las variables están en distintas unidades. Noten, en cambio, que el estadístico t asociado a SSP es exactamente igual al de la parte a., por lo que en ambos casos no se rechaza la \\(H_0\\).\n\ncoeftest(r1, vcov = vcovHC(r1, \"HC1\"))[1:4,]\n\n               Estimate Std. Error    t value     Pr(&gt;|t|)\n(Intercept)  2.87240513 0.45314003  6.3388908 3.261488e-10\nssp          0.05018813 0.07423854  0.6760388 4.991454e-01\nsfp         -0.01807372 0.06618352 -0.2730848 7.848347e-01\nsfsp         0.07158763 0.09081195  0.7883063 4.306722e-01\n\n\n[5 puntos] Ahora realizaremos un índice de mejora en educación, al agregar los resultados de estos dos indicadores en una sola variable, como se describe en Banerjee et al. (2015)5. Para ello, primero genere credits_earned2_sd, que será la versión estandarizada de credits_earned2, siguiendo el mismo procedimiento que en la parte b. En seguida, genere una nueva variable llamada indice_escolar, que será el promedio de credits_earned2_sd y gpa_year2_sd. Luego, calcule la media y la desviación estándar de indice_escolar en el grupo de control. Finalmente, genere una nueva variable indice_escolar_sd restándole a indice_escolar la media antes calculada y dividiendo esta diferencia por la desviación estándar antes calculada. Muestre que la variable indice_escolar_sd tiene media 0 y desviación estándar 1 en el grupo de control.\nPrimero creamos la versión estandarizada de la variable de créditos:\n\ncredits_earned2_stats &lt;- data.angrist %&gt;% \n  filter(control==1) %&gt;% \n  summarize(media=mean(credits_earned2,na.rm=T),\n            desvest=sd(credits_earned2,na.rm=T))\n\ndata.angrist &lt;- data.angrist %&gt;% \n  mutate(credits_earned2_sd=(credits_earned2-credits_earned2_stats$media)/credits_earned2_stats$desvest)\n\nLuego calculamos la media de las dos variables estandarizadas:\n\ndata.angrist &lt;- data.angrist %&gt;% \n  mutate(indice_escolar=rowMeans(select(.,credits_earned2_sd,gpa_year2_sd)))\n\nAhora obtenemos la media y la desviación estándar en el grupo de control del promedio antes calculado:\n\nindice_escolar_stats &lt;- data.angrist %&gt;% \n  filter(control==1) %&gt;% \n  summarize(media=mean(indice_escolar,na.rm=T),\n            desvest=sd(indice_escolar,na.rm=T))\n\ndata.angrist &lt;- data.angrist %&gt;% \n  mutate(indice_escolar_sd=(indice_escolar-indice_escolar_stats$media)/indice_escolar_stats$desvest)\n\nEfectivamente tiene media igual a 0:\n\ndata.angrist %&gt;%\n  filter(control==1) %&gt;% \n  summarize(media=mean(indice_escolar_sd,na.rm=T))\n\n# A tibble: 1 × 1\n      media\n      &lt;dbl&gt;\n1 -1.33e-17\n\n\nY desviación estándar igual a 1:\n\ndata.angrist %&gt;%\n  filter(control==1) %&gt;% \n  summarize(desvest=sd(indice_escolar_sd,na.rm=T)) \n\n# A tibble: 1 × 1\n  desvest\n    &lt;dbl&gt;\n1       1\n\n\n[5 puntos] Estime ahora el efecto de tratamiento sobre indice_escolar_sd, siguiendo la misma especificación econométrica que en la parte a. y usando errores robustos. ¿Qué concluye?\nEstimamos usando la misma especificación, pero ahora con el índice compuesto como variable de impacto:\n\nr3 &lt;-lm(indice_escolar_sd ~ ssp + sfp+ sfsp+\n                             factor(sex)+\n                             factor(mtongue)+\n                             factor(hsgroup)+\n                             factor(numcourses_nov1)+\n                             factor(lastmin)+\n                             factor(mom_edn)+\n                             factor(dad_edn),\n                           data.angrist)\n\ncoeftest(r3, vcov = vcovHC(r3, \"HC1\"))[1:4,]\n\n               Estimate Std. Error    t value  Pr(&gt;|t|)\n(Intercept)  0.49452306 0.46650249  1.0600652 0.2893277\nssp          0.02805373 0.08261358  0.3395778 0.7342338\nsfp         -0.02543190 0.07385703 -0.3443396 0.7306511\nsfsp         0.03404990 0.09616572  0.3540753 0.7233445\n\n\nLa ventaja de este procedimiento es que solo probamos una hipótesis en lugar de dos. Si tuviéramos muchas variables de impacto, tendríamos que probar múltiples hipótesis, incrementando la probabilidad de falsos rechazos. La construcción de índices es una alternativa para enfrentar este problema."
  },
  {
    "objectID": "tareas/tarea-2-respuestas.html#pregunta-1",
    "href": "tareas/tarea-2-respuestas.html#pregunta-1",
    "title": "Respuestas a la tarea 2",
    "section": "",
    "text": "En esta pregunta usaremos un ejemplo de el estudio con asignación experimental de Banerjee et al. (2015)1 para fijar algunas ideas referentes al análisis de una intervención de este tipo. A diferencia de otros ejemplos vistos en clase, este es un experimento a gran escala. Por favor, utilice la versión publicada, así como el material suplementario.\n\n[5 puntos] Describa brevemente en qué consiste la intervención que se discute en el artículo.\nLa intervención que se reporta en el artículo es descrita como una intervención holística. Se trata de un paquete de intervenciones que incluyen una transferencia monetaria periódica, la dotación de activos productivos, un instrumento de acceso a ahorro, así como servicios de salud y educación básicos.\nLa idea es inducir un fuerte impulso para el ingreso y las oportunidades de generar ingreso de los hogares pobres. El programa tiene un enfoque de graduación, es decir, busca que, a partir de cierto momento, los hogares ya no requieran el apoyo del programa para sostener unas condiciones de vida mejores.\n[5 puntos] Describa brevemente en qué consiste el diseño experimental, es decir, ¿cómo se construye la variación que permite identificar el efecto del tratamiento? ¿Cómo se construyen los grupos de tratamiento y control?\nEl experimento se desarrolló en seis países. En cada uno, un proceso participativo permitió identificar a los hogares elegibles. En tres de los países del experimento, la asignación del tratamiento fue aleatorizada de manera simple, es decir, aproximadamente la mitad de los hogares fueron asignados al azar a ser tratados y la otra parte no.\nEn los otros tres países, la asignación fue mediante una aleatorización por grupos, con una primera asignación aleatoria del tratamiento a nivel localidad y una segunda asignación aleatoria a nivel hogar. Es decir, en estos tres países existieron localidades de tratamiento y de control. En las localidades de control nadie recibió el tratamiento. En las localidades de tratamiento, sin embargo, algunos hogares recibieron la intervención y algunos no.\n[5 puntos] En la página 1260799-7 se presenta una subsección denominada Atrition. Describa brevemente el propósito de este análisis y qué se concluye al respecto.\nEste análisis tiene el objetivo de demostrar que los hogares que abandonaron el programa no eran diferentes de aquellos que permanecieron en el mismo. Esto es importante porque podría ser que los hogares que dejan el programa sean distintos que los que se quedan, ocasionando un problema de selección. Por ejemplo, si los hogares más pobres dejan el programa en una mayor proporción que los hogares menos pobres, el grupo final con el que se estima el impacto tendrá una composición relativamente menos pobre, con lo que es probable que se sobre estime el impacto del programa.\nEn este experimento, la atrición fue, en promedio, de 6% en la encuesta de seguimiento después de 24 meses, y de 9% en la encuesta de seguimiento después de 36 meses.\nLos autores concluyen que la atrición no dio lugar a un sesgo porla composición del grupo de personas que tomaron las dos encuestas de seguimiento (ver tabla S1f del material suplementario).\n[5 puntos] En la página 1260799-7, la subsección Compliance with treatment assignment concluye que los efectos estimados en el artículo se refieren a un efecto de intención a tratar o intent-to-treat o ITT. ¿Por qué?\nLos autores reportan que en cinco de los seis países la adopción del tratamiento fue perfecta: ninguno de los hogares asignados al grupo de control recibió el tratamiento y todos los hogares asignados a ser tratados recibieron la intervención. Son embargo, en India esto no fue así. Solo el 52% de los hogares asignados al tratamiento lo recibieron, por razones que van desde cuestiones religiosas hasta normas sociales.\nPor esta razón, los investigadores reconocen que el efecto estimado es un efecto de intención a tratar o ITT, que compara los resultados entre los grupos de asignación, ignorando la decisión de adoptar o no.\nLos autores pudieron haber decidido estimar aquí el LATE. Aunque en el caso de los cinco países con cumplimiento perfecto, el resultado se mantendría inalterado.\n[5 puntos] En la página 1260799-8 se discuten dos métodos para tomar en cuenta la prueba de hipótesis múltiples. Describa brevemente por qué puede ser problemático probar múltiples hipótesis y cuáles son las dos formas en que los autores enfrentan este problema.\nProbar múltiples hipótesis incrementa exponencialmente la probabilidad de obtener un efecto estadísticamente signficativo por suerte. Para tomar en cuenta este problema, los autores emplean dos métodos que son los vistos en clase.\nPrimero, se emplean índices para agregar las variables que pertenecen a una familia en un solo indicador. De hecho, los impactos sobre los índices de la tabla 3 del artículo son los que se consideran los resultados principales del trabajo.\nSegundo, se emplea la corrección de Benjamini & Hochberg, descrita en clase. Esto se describe en la página 5 del material suplementario. Los autores realizan un procedimiento un poco más general. Realizan el mismo procedimiento que vimos en clase pero para todos los posibles valores de \\(\\alpha\\), el nivel de significancia. Por ejemplo, primero se fija \\(\\alpha=1.000\\) y se realiza el procedimiento de Benjamini & Hochberg. Luego se toma \\(\\alpha=0.0999\\) y se realiza lo mismo. Así sucesivamente hasta llegar a fijar \\(\\alpha=0.000\\). Así, para cada hipótesis, los autores son capaces de identificar el valor de \\(\\alpha\\) más pequeño tal que se rechace la hipótesis nula y a dicho valor le llaman valor \\(q\\). Este valor se reporta en la columna 5 de la tabla 3 y se puede interpretar como interpretamos el valor \\(p\\).\nNOTA: El procedimiento de Benjamini & Hochberg es tedioso y lo es más el cálculo de los valores \\(q\\). No es algo que se pediría hacer en un examen, aunque sí es importante entender el concepto y la idea detrás de la corrección.\n[5 puntos] En la página 1260799-12 se discute la posible presencia de efectos de derramamiento o spillovers. Describa brevemente en qué consisten dichos efectos de derramamiento y cómo los autores muestran la presencia o ausencia de dichos efectos usando regresiones.\nLos efectos de derramamiento ocurren cuando hogares asignados al grupo de control se benefician indirectamente del tratamiento. Podría ocurrir, por ejemplo, que los hogares tratados le donaran parte de los recursos de su transferencia monetaria a hogares del grupo de control. Otra forma de efecto de derramamiento ocurre son los efectos de equilibrio general, por ejemplo, cuando la intervención genera inflación a nivel local, afectando el nivel de ingreso real de los hogares tratados y no tratados por igual.\nEl diseño experimental de este estudio permite probar empíricamente la presencia de efectos de derramamiento al explotar la variación entre localidades en los tres países con aleatorización por grupos. En particular, se pueden comparar a los hogares en las localidades de control (controles puros) con los hogares no tratados en localidades de tratamiento, que son los que pudieron estar expuestos a los efectos de derramamiento.\nDado que no existen diferencias estadísticamente significativas en las variables de impacto (ver tabla S6a del material suplementario), se descarta la presencia de efectos de derramamiento."
  },
  {
    "objectID": "tareas/tarea-2-respuestas.html#pregunta-2",
    "href": "tareas/tarea-2-respuestas.html#pregunta-2",
    "title": "Respuestas a la tarea 2",
    "section": "",
    "text": "En Crepon et al. (2015)2 se estudia una intervención en Marruecos en la que se analiza el efecto de la adopción de microfinanzas, a través de un experimento de campo. En 81 de 162 localidades estudiadas se introdujo aleatoriamente una empresa de microfinanzas. Para seleccionar las localidades de tratamiento, primero se emparejaron localidades de acuerdo a características observables y, para cada pareja se asignó a tratamiento y otra a control. La variable que identifica a las parejas es paire. La base de datos crepon_morocco_balance.csv contiene los datos de este estudio usados para mostrar la integridad del diseño. La variable treatment es la variable de asignación aleatoria, mientras que la variable client es la variable de adopción\n\n[3 puntos] Primero recordaremos cómo mostrar que el tratamiento efectivamente fue asignado de manera aleatoria. El siguiente código lee los datos que debemos usar y se queda con las observaciones de la línea base. Con estos datos, mostraremos que la variable members_resid_bl, que indica el número de personas que viven en cada hogar está balanceado entre los grupos asignados a tratamiento y control. Noten que la media del número de personas que viven en el hogar en el grupo de control es 5.14 (d.e. 2.70) y que hay 2,266 hogares en dicho grupo de control. Esto es exactamente lo que se reporta en la fila correspondiente a Number members en la tabla 1 del artículo.\n\n  data.morocco&lt;-read_csv(\"../files/crepon_morocco_balance.csv\",\n                         locale = locale(encoding = \"latin1\")) %&gt;% \n    clean_names() %&gt;% \n    filter(merge_indicator!=1)\n\n  data.morocco %&gt;% \n    group_by(treatment) %&gt;%\n    summarize(mean=mean(members_resid_bl, na.rm=T),\n              std=sd(members_resid_bl, na.rm=T),\n              n=n()) %&gt;% \n    ungroup()\n\n# A tibble: 2 × 4\n  treatment  mean   std     n\n      &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt;\n1         0  5.14  2.69  2266\n2         1  5.19  2.76  2199\n\n\nObtenga ahora el valor de la diferencia entre el grupo de tratamiento y el de control, así como su valor \\(p\\) (últimas dos columnas). Para ello, estime una regresión en la que la variable dependiente sea número de personas que vive en el hogar members_resid_bl, en función de la variable de asignación treatment y variables dummy de pareja de localidad (la variable paire indica cuáles son las parejas). La regresión permite recuperar la diferencia de 0.04 personas que se reporta en la fila correspondiente en la tabla 1. Para recuperar el valor \\(p\\), estime errores agrupados usando la variable demi_paire, que es la clave de las distintas localidades, como variable de agrupación. Una forma de realizar esto es con la función coef_test del paquete clubSandwich.3\nEstimamos la regresión con el número de personas como variable dependiente en función de la asignación al tratamiento y de las parejas:\n\ndif_members &lt;- lm(members_resid_bl ~ treatment + factor(paire),\n   data=data.morocco)\n\nsummary(dif_members)$coef[1:7,]\n\n                  Estimate Std. Error    t value     Pr(&gt;|t|)\n(Intercept)     4.06166091  0.3047365 13.3284357 9.311212e-40\ntreatment       0.04334484  0.0707258  0.6128576 5.400023e-01\nfactor(paire)2  1.78431373  0.4152704  4.2967514 1.770771e-05\nfactor(paire)3  1.06107184  0.4356350  2.4356902 1.490300e-02\nfactor(paire)4 -3.08333333  0.4594672 -6.7106719 2.184193e-11\nfactor(paire)5  1.85814080  0.4442115  4.1830089 2.933028e-05\nfactor(paire)6  2.88352450  0.4262934  6.7641779 1.517259e-11\n\nnobs(dif_members)\n\n[1] 4465\n\ncoef_test(dif_members,\n          vcov = \"CR1S\", \n          cluster = data.morocco$demi_paire)[1:2,]\n\n       Coef. Estimate     SE t-stat d.f. (Satt) p-val (Satt) Sig.\n (Intercept)   4.0617 0.0647  62.80        1.03      0.00911   **\n   treatment   0.0433 0.0787   0.55       76.54      0.58361     \n\n\nObtenemos un coeficiente de 0.04334484, que se redondea a 0.04 en la tabla. El valor \\(p\\) de 0.583 es exactamente el reportado en la última columna. Aquí lo clave es calcular los errores agrupados.\n[2 puntos] Ahora mostremos que efectivamente este es un ejemplo de una intervención con cumplimiento imperfecto. Genere un cuadro que indique: 1) cuántas personas que fueron asignadas a recibir el tratamiento efectivamente fueron clientes; 2) cuántas personas que fueron asignadas a recibir el tratamiento no se convirtieron en clientes; 3) cuántas personas que no fueron asignadas a recibir el tratamiento sí se convirtieron en clientes; y 4) cuántas personas que no fueron asignadas a recibir el tratamiento tampoco se convirtieron en clientes.\n\ndata.morocco %&gt;%\n  mutate(treatment=factor(treatment, levels=c(0,1),labels=c(\"Control\", \"Tratamiento\"))) %&gt;%\n      mutate(client=factor(client, levels=c(0,1),labels=c(\"No cliente\", \"Cliente\"))) %&gt;% \n  tabyl(treatment, client,\n        show_na = F)\n\n   treatment No cliente Cliente\n     Control       2101       0\n Tratamiento       1753     251\n\n\nEste es un ejemplo de una intervención con incumplimiento de un solo lado. De aquellos asignados al tratamiento, 251 se convirtieron en clientes y 1,753 no. De aquellos asignados al control, ninguno tuvo acceso a microfinanzas. En otras palabras, podemos descartar la presencia de siempre cumplidores (always-takers). Por tanto, en este tipo de aplicaciones, el efecto del tratamiento en los tratados (támbien llamado TOT, ATET o TT) es igual al LATE.\n[5 puntos] Ahora mostraremos que la adopción, es decir, convertirse en cliente, no es independiente de las características de los hogares. Considere las variables members_resid_bl y act_number_bl, que indican el número de miembros del hogar y el número de actividades económicas del hogar. Para cada una de estas dos variables, utilice la misma especificación que en la parte a., pero ahora usando la variable cliente como regresor. ¿Qué concluye?\nPara el número de miembros del hogar:\n\nr1 &lt;- lm(members_resid_bl ~ client + factor(paire),\n                         data=data.morocco)\ncoef_test(r1,\n          vcov = \"CR1S\", \n          cluster = data.morocco$demi_paire)[1:2,]\n\n       Coef. Estimate    SE t-stat d.f. (Satt) p-val (Satt) Sig.\n (Intercept)     4.18 0.128  32.70         1.0       0.0195    *\n      client     0.43 0.180   2.38        45.4       0.0214    *\n\n\nPara el número de actividades económicas del hogar:\n\nr2 &lt;- lm(act_number_bl ~ client + factor(paire),\n                            data=data.morocco)\ncoef_test(r2,\n          vcov = \"CR1S\", \n          cluster = data.morocco$demi_paire)[1:2,]\n\n       Coef. Estimate     SE t-stat d.f. (Satt) p-val (Satt) Sig.\n (Intercept)    1.109 0.2330   4.76         1.0      0.13185     \n      client    0.191 0.0687   2.78        45.4      0.00787   **\n\n\nLa adopción no es independiente de las características de los hogares. Parece ser que los hogares que se convierten en clientes son más grandes y tienen más actividades económicas. Por tanto, comparar las variables de impacto entre quienes adoptarony no adoptaron implicaría un sesgo de selección.\n[5 puntos] Con estos elementos estamos convencidos de que es necesario emplear lo que sabemos sobre cumplimiento imperfecto. Usaremos ahora los datos en crepon_morocco_analysis.csv, que contiene los datos empleados para evaluar el impacto de la adopción. Estos datos están listos para analizarse. Estime la forma reducida del efecto de ser asignado al tratamiento sobre gasto total, expense_total. Comente los resultados, en particular, comente sobre la magnitud y la significancia estadística de la variable treatment. Aquí y en adelante, incluya los siguientes controles en la regresión: members_resid_bl, nadults_resid_bl, head_age_bl, act_livestock_bl, act_business_bl, borrowed_total_bl, members_resid_d_bl, nadults_resid_d_bl, head_age_d_bl, act_livestock_d_bl, act_business_d_bl, borrowed_total_d_bl, ccm_resp_activ, other_resp_activ, ccm_resp_activ_d y other_resp_activ_d. Además, incluya efectos fijos por pareja introduciendo la variable paire como factor. Use los mismos errores estándar que en la parte a. Con esto deberá poder recuperar el coeficiente y el error estándar de la columna (3) de la tabla 3.\nLa forma reducida estima la relación causal entre la variable de gasto y la asignación aleatoria. Se estima un efecto de 4057 unidades monetarias en el gasto, estadísticamente significativo al 5%. Este es el efecto de ser asignado al tratamiento o ITT.\n\ndata.morocco&lt;-read_csv(\"../files/crepon_morocco_analysis.csv\")   %&gt;% \n  clean_names() \n\nres_fr&lt;- lm(expense_total ~ treatment +\n              members_resid_bl + nadults_resid_bl +\n              head_age_bl + act_livestock_bl + act_business_bl +\n              borrowed_total_bl + members_resid_d_bl +\n              nadults_resid_d_bl + head_age_d_bl + act_livestock_d_bl +\n              act_business_d_bl + borrowed_total_d_bl +\n              ccm_resp_activ + other_resp_activ + ccm_resp_activ_d + \n              other_resp_activ_d + factor(paire),\n            data=data.morocco)\n\ncoef_test(res_fr,\n          vcov = \"CR1S\",\n          cluster = data.morocco$demi_paire)[1:2,]\n\n       Coef. Estimate   SE t-stat d.f. (Satt) p-val (Satt) Sig.\n (Intercept)   -18493 6735  -2.75         2.1        0.105     \n   treatment     4057 1721   2.36        74.4        0.021    *\n\n\nEste efecto estimado tiene una interpretación causal. Sin embargo, lo que nos está diciendo es la diferencia en el gasto en hogares donde el programa fue ofrecido y donde no. Pero no la diferencia en el efectivamente usar microfinanzas, que puede ser el parámetro de mayor interés. En otras palabras, el ITT es como un efecto del tratamiento, diluido por el no cumplimiento.\n[5 puntos] Estime ahora la primera etapa, es decir, estime por MCO el efecto causal de la asignación sobre la adopción. Comente sobre la magnitud, la significancia estadística y la interpretación de la variable treatment en términos del comportamiento de los cumplidores. Debería poder replicar el coeficiente y el error estándar de la columna 1 en la tabla 2 del artículo.\nLa primera etapa muestra un aumento de 16.7% en la probabilidad de ser cliente debido al tratamiento. Este efecto es estadísticamente significativo al 10%. En otras palabras, 16.7% de los individuos en la muestra son cumplidores, es decir, se vuelven clientes solo porque se les ofreció el tratamiento.\n\nres_fs&lt;- lm(client ~ treatment +\n              members_resid_bl + nadults_resid_bl +\n                head_age_bl + act_livestock_bl + act_business_bl +\n                borrowed_total_bl + members_resid_d_bl +\n                nadults_resid_d_bl + head_age_d_bl + act_livestock_d_bl +\n                act_business_d_bl + borrowed_total_d_bl +\n                ccm_resp_activ + other_resp_activ + ccm_resp_activ_d + \n                other_resp_activ_d + factor(paire),\n            data=data.morocco)\n\ncoef_test(res_fs,\n          vcov = \"CR1S\", \n          cluster = data.morocco$demi_paire)[1:2,]\n\n       Coef. Estimate     SE t-stat d.f. (Satt) p-val (Satt) Sig.\n (Intercept)  -0.0988 0.0549   -1.8         2.1        0.208     \n   treatment   0.1672 0.0118   14.2        74.4       &lt;0.001  ***\n\n\n[5 puntos] Considere la columna 3 del panel A en la Tabla 9 del artículo. Aquí se reporta la estimación por MCO de la relación entre client y gasto total, con los mismos controles y tipo de errores que antes. Replique este resultado. ¿Se puede interpretar de forma causal el coeficiente sobre client?\nNoten que para replicar la entrada la clave está en condicionar a aquellos asignados al tratamiento (como se indica en la tabla del artículo). No se puede interpretar de manera causal la relación de 11934 unidades monetarias más en el gasto en los clientes con respecto a los no clientes pues es muy posible que haya sesgo de selección. Por ejemplo, si los hogares más educados deciden adoptar en mayor medida los productos de microfinanzas, es posible pensar que esos mismos hogares hubieran tenido mayor gasto incluso sin microfinanzas. Estaríamos entonces sobreestimando el efecto del tratamiento.\n\nres_mco &lt;- lm(expense_total ~ client +\n                members_resid_bl + nadults_resid_bl +\n                head_age_bl + act_livestock_bl + act_business_bl +\n                borrowed_total_bl + members_resid_d_bl +\n                nadults_resid_d_bl + head_age_d_bl + act_livestock_d_bl +\n                act_business_d_bl + borrowed_total_d_bl +\n                ccm_resp_activ + other_resp_activ + ccm_resp_activ_d + \n                other_resp_activ_d + factor(paire),\n              data=filter(data.morocco,treatment==1))\n\ncoef_test(res_mco,\n          vcov = \"CR1S\", \n          cluster =filter(data.morocco,treatment==1)$demi_paire)[1:2,]\n\n       Coef. Estimate   SE t-stat d.f. (Satt) p-val (Satt) Sig.\n (Intercept)   -12718 9447  -1.35        65.8       0.1828     \n      client    11934 5580   2.14        41.1       0.0384    *\n\n\n[5 puntos] ¿Cuáles son los dos supuestos econométricos que permiten la estimación del Local Average Treatment Effect (LATE) en el contexto de este problema? Comente sobre la evidencia que respalda el supuesto de que los instrumentos no son débiles en este problema.\nLos supuestos necesarios son:\nRelevancia del instrumento. Se requiere que la asignación aleatoria del tratamiento efectivamente afecte la probabilidad de ser cliente. La evidencia que respalda este requerimiento es el resultado de la primera etapa. El estadístico \\(F\\) de la primera etapa es 10.86, apenas arriba de la regla de dedo de 10 que comúnmente se usa para decir que no hay presencia de instrumentos débiles.\nExclusión. Se requiere que el instrumento no pertenezca a la ecuación estructural. Esto se garantiza por la asignación aleatoria del tratamiento.\n[5 puntos] Estime el efecto del cumplimiento sobre el gasto total, usando la asignación aleatoria como instrumento del cumplimiento. Es decir, estime el LATE. Use los mismos controles y tipo de errores que en c. Este resultado se reporta en la columna 3 del panel B en la Tabla 9. ¿Cuál es la interpretación del coeficiente de la variable client? En R, la función ivreg del paquete AER le permite hacer la estimación de MC2E.\nEl LATE estimado es de 24263 monetarias adicionales de gasto debido a ser cliente. Esta cifra es considerablemente mayor que las 4057 unidades monetarias estimada en la forma reducida. Este es un efecto local pues solo considera el cambio en el gasto debido a ser cliente de la microfinanciera, en aquellos individuos que cambiaron su comportamiento debido a la asignación aleatoria del tratamiento. Noten también que en todas las regresiones se incluye errores agrupados a nivel pareja o paire.\n\nres_iv &lt;- ivreg(expense_total ~ client + members_resid_bl + nadults_resid_bl\n     + head_age_bl + act_livestock_bl + act_business_bl \n     + borrowed_total_bl + members_resid_d_bl + nadults_resid_d_bl\n     + head_age_d_bl + act_livestock_d_bl + act_business_d_bl \n     + borrowed_total_d_bl + ccm_resp_activ + other_resp_activ \n     + ccm_resp_activ_d  + other_resp_activ_d + factor(paire) |\n       treatment +  members_resid_bl + nadults_resid_bl\n     + head_age_bl + act_livestock_bl + act_business_bl \n     + borrowed_total_bl + members_resid_d_bl + nadults_resid_d_bl\n     + head_age_d_bl + act_livestock_d_bl + act_business_d_bl \n     + borrowed_total_d_bl + ccm_resp_activ + other_resp_activ \n     + ccm_resp_activ_d  + other_resp_activ_d + factor(paire),\n     data=data.morocco)\n\nsummary(res_iv)$coefficients[1:2,]\n\n             Estimate Std. Error   t value   Pr(&gt;|t|)\n(Intercept) -16095.68   11033.49 -1.458802 0.14468442\nclient       24263.46   12419.55  1.953651 0.05080007\n\ncoef_test(res_iv,\n          vcov = \"CR1S\", \n          cluster = data.morocco$demi_paire)[1:2,]\n\n       Coef. Estimate   SE t-stat d.f. (Satt) p-val (Satt) Sig.\n (Intercept)   -16096 7144  -2.25        2.11       0.1464     \n      client    24263 9944   2.44       74.45       0.0171    *"
  },
  {
    "objectID": "tareas/tarea-2-respuestas.html#pregunta-3",
    "href": "tareas/tarea-2-respuestas.html#pregunta-3",
    "title": "Respuestas a la tarea 2",
    "section": "",
    "text": "Sea una variable de resultados \\(y_i\\), una variable de asignación aleatoria \\(Z_i\\) y una variable de adopción \\(D_i\\). El estimador de Wald se define como:\n\\[\\hat{\\beta}_{Wald}=\\frac{\\bar{Y}_{Z_i=1}-\\bar{Y}_{Z_i=0}}{\\bar{D}_{Z_i=1}-\\bar{D}_{Z_i=0}}\\]\nEn esta pregunta mostraremos cómo el estimador de Wald es equivalente al estimador de VI cuando no hay controles. Use nuevamente los datos en crepon_morocco_analysis.csv.\n\n[5 puntos] Obtenga el estimador de Wald como el cociente de la diferencia en gasto total promedio entre los hogares asignados a tratamiento y control dividido por la diferencia en la probabilidad de adopción entre los hogares asignados a tratamiento y control. Recuerde que la variable del gasto total es expense_total.\nObtenemos el estadístico de Wald, usando la definición:\n\ndata.morocco&lt;-read_csv(\"../files/crepon_morocco_analysis.csv\")   %&gt;% \n  clean_names() \n\nmean_cliente&lt;-data.morocco %&gt;%\n  group_by(treatment) %&gt;% \n  summarize(p_cliente=mean(client, na.rm=F)) %&gt;% \n  ungroup()\n\nmean_gasto&lt;-data.morocco %&gt;%\n  group_by(treatment) %&gt;% \n  summarize(m_gasto=mean(expense_total, na.rm=F)) %&gt;% \n  ungroup()\n\n#Neceistamos la diferencia de gastos y de probabilidad de ser cliente\ndif_gasto &lt;- mean_gasto[2,2]-mean_gasto[1,2]\ndif_cliente &lt;- mean_cliente[2,2]-mean_cliente[1,2]\n\nWald &lt;- as.numeric(dif_gasto / dif_cliente)\nWald\n\n[1] 22869.23\n\n\n[5 puntos] Ahora estime por MC2E el efecto de la adopción sobre el gasto total, usando la variable de asignación como instrumento para la adopción. ¿Qué ventaja observa con respecto al estimador de Wald?\nNotemos que obtenemos lo mismo al hacer una estimación de variables instrumentales. El coeficiente sobre la variable client es igual al estadístico de Wald. El estadístico de Wald es idéntico al estimador de variables instrumentales cuando el instrumento es binario. La mayor ventaja de realizar la estimación de esta manera es que podemos obtener errores estándar, lo cual nos permite hacer inferencia estadística sobre el tamaño del efecto de ser cliente en el gasto.\n\nWald_vi &lt;- ivreg(expense_total ~ client  | treatment,\n                data=data.morocco)\n\n#Notemos que obtenemos directamente el error estándar\nsummary(Wald_vi)\n\n\nCall:\nivreg(formula = expense_total ~ client | treatment, data = data.morocco)\n\nResiduals:\n    Min      1Q  Median      3Q     Max \n -44264  -21394  -17064   -4804 1305816 \n\nCoefficients:\n            Estimate Std. Error t value Pr(&gt;|t|)    \n(Intercept)    21395       1496  14.298   &lt;2e-16 ***\nclient         22869      12684   1.803   0.0714 .  \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 74610 on 4932 degrees of freedom\nMultiple R-Squared: 0.00651, Adjusted R-squared: 0.006309 \nWald test: 3.251 on 1 and 4932 DF,  p-value: 0.07144 \n\n\nMás aún, podríamos obtener el mismo coeficiente haciendo MC2E a mano, lo cual nunca es recomendable debido a que la inferencia sobre el coeficiente de la segunda etapa es incorrecta. Sin embargo, nos deja ver cómo podemos entender el proceso de estimación conceptualmente.\nEstimamos la primera etapa y obtenemos los valores ajustados:\n\np.e &lt;- lm(client ~ treatment,\n                data=data.morocco)\n\ndata.morocco &lt;- data.morocco %&gt;% \n  mutate(client_hat = predict(p.e))\n\nAhora usamos los valores ajustados en la regresión de la segunda etapa:\n\ns.e &lt;- lm(expense_total ~ client_hat,\n                data=data.morocco)\n\nsummary(s.e)\n\n\nCall:\nlm(formula = expense_total ~ client_hat, data = data.morocco)\n\nResiduals:\n    Min      1Q  Median      3Q     Max \n -25225  -21394  -17879   -5647 1305816 \n\nCoefficients:\n            Estimate Std. Error t value Pr(&gt;|t|)    \n(Intercept)    21395       1501  14.256   &lt;2e-16 ***\nclient_hat     22869      12721   1.798   0.0723 .  \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 74830 on 4932 degrees of freedom\nMultiple R-squared:  0.0006549,  Adjusted R-squared:  0.0004522 \nF-statistic: 3.232 on 1 and 4932 DF,  p-value: 0.07228\n\n\nY obtenemos de nuevo 22,869 unidades monetarias como impacto estimado."
  },
  {
    "objectID": "tareas/tarea-2-respuestas.html#pregunta-4",
    "href": "tareas/tarea-2-respuestas.html#pregunta-4",
    "title": "Respuestas a la tarea 2",
    "section": "",
    "text": "Considere nuevamente la base STAR_public_use.csv usada en la Tarea 1 del artículo Angrist, Lang y Oreopoulos (2009)4. En esta pregunta nos concentraremos en los efectos de la intervención en el año 2, mostrados en la columna (4) de la Tabla 6, sobre dos variables, el promedio de calificaciones gpa_year2 y los créditos completados credits_earned2.\nEl propósito de esta pregunta es mostrar la función de los \\(z\\)-scores en el análisis de efectos de tratamiento. De nuevo, puede quedarse solo con las observaciones que tienen noshow igual a 0. Antes de comenzar su análisis, sustituya por NA los valores en credits_earned2 para aquellas observaciones que tienen \\(NA\\) en la variable prob_year1.\n\n[5 puntos] Para tener un punto de comparación, estime la ecuación del efecto de tratamiento para gpa_year2 usando la misma especificación que en la pregunta 5 de la Tarea 1. Use también errores robustos. Deberá poder replicar los coeficientes y errores estándar del panel A, columna (4). ¿Cómo se interpretan el coeficiente sobre la variable ssp?\nUsando la misma especificación que usamos en la Tarea 1, obtenemos los coeficientes en el artículo.\n\ndata.angrist&lt;-read_csv(\"../files/STAR_public_use.csv\",\n                 locale = locale(encoding = \"latin1\"))   %&gt;% \n  clean_names()\n\ndata.angrist&lt;-data.angrist %&gt;% \n  filter(noshow==0) %&gt;% \n  mutate(credits_earned2=ifelse(is.na(prob_year1),NA,credits_earned2)) \n\n\nr1 &lt;-lm(gpa_year2 ~ ssp + sfp+ sfsp+\n             factor(sex)+\n             factor(mtongue)+\n             factor(hsgroup)+\n             factor(numcourses_nov1)+\n             factor(lastmin)+\n             factor(mom_edn)+\n             factor(dad_edn),\n           data.angrist)\ncoeftest(r1, vcov = vcovHC(r1, \"HC1\"))[1:4,]\n\n               Estimate Std. Error    t value     Pr(&gt;|t|)\n(Intercept)  2.87240513 0.45314003  6.3388908 3.261488e-10\nssp          0.05018813 0.07423854  0.6760388 4.991454e-01\nsfp         -0.01807372 0.06618352 -0.2730848 7.848347e-01\nsfsp         0.07158763 0.09081195  0.7883063 4.306722e-01\n\n\n[5 puntos] Genere un \\(z\\)-score para la variable gpa_year2 al que llame gpa_year2_sd. Para ello, calcule la media y desviación estándar de gpa_year2 para el grupo de control y luego genere gpa_year2_sd restándole a gpa_year2 la media obtenida y dividiendo esta diferencia por la desviación estándar obtenida. Compruebe que si calcula la media y la desviación estándar de gpa_year2_sd, en el grupo de control estas deberían ser 0 y 1, respectivamente.\nCreamos un z-score:\n\ngpa_year2_stats &lt;- data.angrist %&gt;% \n    filter(control==1) %&gt;% \n    summarize(media=mean(gpa_year2,na.rm=T),\n              desvest=sd(gpa_year2,na.rm=T))\n\ndata.angrist &lt;- data.angrist %&gt;% \n    mutate(gpa_year2_sd=(gpa_year2-gpa_year2_stats$media)/gpa_year2_stats$desvest)\n\nTiene media igual a 0:\n\ndata.angrist %&gt;%\n  filter(control==1) %&gt;% \n  summarize(media=mean(gpa_year2_sd,na.rm=T))\n\n# A tibble: 1 × 1\n     media\n     &lt;dbl&gt;\n1 1.60e-16\n\n\nY desviación estándar igual a 1:\n\ndata.angrist %&gt;%\n  filter(control==1) %&gt;% \n  summarize(desvest=sd(gpa_year2_sd,na.rm=T)) \n\n# A tibble: 1 × 1\n  desvest\n    &lt;dbl&gt;\n1       1\n\n\n[5 puntos] Realice la misma estimación que en la parte a., pero ahora use como variable dependiente gpa_year2_sd. ¿Cómo se interpreta el coeficiente sobre ssp? ¿Qué es diferente y qué es igual entre los resultados obtenidos en esta parte y los obtenidos en la parte a.?\nRealizamos la estimación, pero con la variable dependiente estandarizada:\n\nr2 &lt;-lm(gpa_year2_sd ~ ssp + sfp+ sfsp+\n             factor(sex)+\n             factor(mtongue)+\n             factor(hsgroup)+\n             factor(numcourses_nov1)+\n             factor(lastmin)+\n             factor(mom_edn)+\n             factor(dad_edn),\n           data.angrist)\n\ncoeftest(r2, vcov = vcovHC(r2, \"HC1\"))[1:4,]\n\n               Estimate Std. Error    t value   Pr(&gt;|t|)\n(Intercept)  0.94640721 0.50806908  1.8627530 0.06273961\nssp          0.05627187 0.08323764  0.6760388 0.49914542\nsfp         -0.02026459 0.07420621 -0.2730848 0.78483470\nsfsp         0.08026539 0.10182006  0.7883063 0.43067220\n\n\nLos coeficientes estimados son diferentes. Ahora el coeficiente sobre ssp es el efecto que tiene el programa en el z-score del promedio de calificaciones, es decir, el SSP tiene un efecto de 0.056 desviaciones estándar en el z-score del promedio de calificaciones, aunque este efecto no es estadísticamente significativo. La magnitud del error estándar también es diferente, pues ahora las variables están en distintas unidades. Noten, en cambio, que el estadístico t asociado a SSP es exactamente igual al de la parte a., por lo que en ambos casos no se rechaza la \\(H_0\\).\n\ncoeftest(r1, vcov = vcovHC(r1, \"HC1\"))[1:4,]\n\n               Estimate Std. Error    t value     Pr(&gt;|t|)\n(Intercept)  2.87240513 0.45314003  6.3388908 3.261488e-10\nssp          0.05018813 0.07423854  0.6760388 4.991454e-01\nsfp         -0.01807372 0.06618352 -0.2730848 7.848347e-01\nsfsp         0.07158763 0.09081195  0.7883063 4.306722e-01\n\n\n[5 puntos] Ahora realizaremos un índice de mejora en educación, al agregar los resultados de estos dos indicadores en una sola variable, como se describe en Banerjee et al. (2015)5. Para ello, primero genere credits_earned2_sd, que será la versión estandarizada de credits_earned2, siguiendo el mismo procedimiento que en la parte b. En seguida, genere una nueva variable llamada indice_escolar, que será el promedio de credits_earned2_sd y gpa_year2_sd. Luego, calcule la media y la desviación estándar de indice_escolar en el grupo de control. Finalmente, genere una nueva variable indice_escolar_sd restándole a indice_escolar la media antes calculada y dividiendo esta diferencia por la desviación estándar antes calculada. Muestre que la variable indice_escolar_sd tiene media 0 y desviación estándar 1 en el grupo de control.\nPrimero creamos la versión estandarizada de la variable de créditos:\n\ncredits_earned2_stats &lt;- data.angrist %&gt;% \n  filter(control==1) %&gt;% \n  summarize(media=mean(credits_earned2,na.rm=T),\n            desvest=sd(credits_earned2,na.rm=T))\n\ndata.angrist &lt;- data.angrist %&gt;% \n  mutate(credits_earned2_sd=(credits_earned2-credits_earned2_stats$media)/credits_earned2_stats$desvest)\n\nLuego calculamos la media de las dos variables estandarizadas:\n\ndata.angrist &lt;- data.angrist %&gt;% \n  mutate(indice_escolar=rowMeans(select(.,credits_earned2_sd,gpa_year2_sd)))\n\nAhora obtenemos la media y la desviación estándar en el grupo de control del promedio antes calculado:\n\nindice_escolar_stats &lt;- data.angrist %&gt;% \n  filter(control==1) %&gt;% \n  summarize(media=mean(indice_escolar,na.rm=T),\n            desvest=sd(indice_escolar,na.rm=T))\n\ndata.angrist &lt;- data.angrist %&gt;% \n  mutate(indice_escolar_sd=(indice_escolar-indice_escolar_stats$media)/indice_escolar_stats$desvest)\n\nEfectivamente tiene media igual a 0:\n\ndata.angrist %&gt;%\n  filter(control==1) %&gt;% \n  summarize(media=mean(indice_escolar_sd,na.rm=T))\n\n# A tibble: 1 × 1\n      media\n      &lt;dbl&gt;\n1 -1.33e-17\n\n\nY desviación estándar igual a 1:\n\ndata.angrist %&gt;%\n  filter(control==1) %&gt;% \n  summarize(desvest=sd(indice_escolar_sd,na.rm=T)) \n\n# A tibble: 1 × 1\n  desvest\n    &lt;dbl&gt;\n1       1\n\n\n[5 puntos] Estime ahora el efecto de tratamiento sobre indice_escolar_sd, siguiendo la misma especificación econométrica que en la parte a. y usando errores robustos. ¿Qué concluye?\nEstimamos usando la misma especificación, pero ahora con el índice compuesto como variable de impacto:\n\nr3 &lt;-lm(indice_escolar_sd ~ ssp + sfp+ sfsp+\n                             factor(sex)+\n                             factor(mtongue)+\n                             factor(hsgroup)+\n                             factor(numcourses_nov1)+\n                             factor(lastmin)+\n                             factor(mom_edn)+\n                             factor(dad_edn),\n                           data.angrist)\n\ncoeftest(r3, vcov = vcovHC(r3, \"HC1\"))[1:4,]\n\n               Estimate Std. Error    t value  Pr(&gt;|t|)\n(Intercept)  0.49452306 0.46650249  1.0600652 0.2893277\nssp          0.02805373 0.08261358  0.3395778 0.7342338\nsfp         -0.02543190 0.07385703 -0.3443396 0.7306511\nsfsp         0.03404990 0.09616572  0.3540753 0.7233445\n\n\nLa ventaja de este procedimiento es que solo probamos una hipótesis en lugar de dos. Si tuviéramos muchas variables de impacto, tendríamos que probar múltiples hipótesis, incrementando la probabilidad de falsos rechazos. La construcción de índices es una alternativa para enfrentar este problema."
  },
  {
    "objectID": "tareas/tarea-2-respuestas.html#footnotes",
    "href": "tareas/tarea-2-respuestas.html#footnotes",
    "title": "Respuestas a la tarea 2",
    "section": "Notas",
    "text": "Notas\n\n\nBanerjee, A. et al. (2015). A multifaceted program causes lasting progress for the very poor: Evidence from six countries. Science, 348(6236).↩︎\nPor ejemplo, suponga que estima un modelo al que llame modelo1. Entonces, si ejecuta\n\ncoef_test(modelo1,\n          vcov=\"CR1S\",\n          cluster=mis_datos$demi_paire)[1:2,]\n\nobtendrá los coeficientes con los errores agrupados requeridos. La opción CR1S toma en cuenta el número de grupos o clusters para realizar inferencia. Puede leer más al respecto en la ayuda al ejecutar ?vcovCR. Este es el tipo de ajuste de muestras finitas que usan los autores. Esta corrección consiste en multiplicar la matriz de sándwich agrupada CR0 por \\(\\frac{G(N-1)}{(G-1)(N-p)}\\), donde \\(G\\) es el número de grupos, \\(N\\) es el número total de observaciones y \\(p\\) es el número de regresores.↩︎\nCrépon, B., Devoto, F., Duflo, E., & Parienté, W. (2015). Estimating the impact of microcredit on those who take it up: Evidence from a randomized experiment in Morocco. American Economic Journal: Applied Economics, 7(1), 123-50.↩︎\nAngrist, J., Lang, D., y Oreopoulos, P. (2009). Incentives and services for college achievement: Evidence from a randomized trial. American Economic Journal: Applied Economics, 1(1), 136-63.↩︎\nBanerjee, A. et al. (2015). A multifaceted program causes lasting progress for the very poor: Evidence from six countries. Science, 348(6236).↩︎"
  },
  {
    "objectID": "diapositivas/emparejamiento.html#sesgo-de-selección",
    "href": "diapositivas/emparejamiento.html#sesgo-de-selección",
    "title": "Métodos de emparejamiento",
    "section": "Sesgo de selección",
    "text": "Sesgo de selección\nLas razones que determinan la asignación del tratamiento pueden también determinar el valor de \\(Y\\). Entonces, una comparación observacional nos da el efecto del tratamiento más el sesgo de selección:\n\\[\n\\begin{aligned}\nE(y_i|D_i=1)-E(y_i|D_i=0)=&\\overbrace{ E(y_{1i}|D_i=1)-E(y_{0i}|D_i=1)}^{\\text{Efecto promedio en los tratados}}+\\\\& \\underbrace{E(y_{0i}|D_i=1)-E(y_{oi}|D_i=0)}_{\\text{Sesgo de selección}}\n\\end{aligned}\n\\]\nUna forma de eliminar el sesgo de selección es mediante la asignación aleatoria del tratamiento, sin embargo, esto no siempre es posible por lo que recurrimos a supuestos para eliminar el sesgo de selección."
  },
  {
    "objectID": "diapositivas/emparejamiento.html#supuesto-de-independencia",
    "href": "diapositivas/emparejamiento.html#supuesto-de-independencia",
    "title": "Métodos de emparejamiento",
    "section": "Supuesto de independencia",
    "text": "Supuesto de independencia\nEl supuesto de independencia condicional dice que al controlar por una serie de características \\(X_i\\), el tratamiento es como si fuera aleatorio:\n\\[\nE(Y(1)|D=1,X)=E(Y(1)|D=0,X)\n\\]\n\\[\nE(Y(0)|D=1,X)=E(Y(0)|D=0,X)\n\\]\nEsto es, los valores esperados de \\(Y(1)\\) y \\(Y(0)\\) son iguales cuando nos fijamos en cada valor de \\(X\\)."
  },
  {
    "objectID": "diapositivas/emparejamiento.html#matching-exacto",
    "href": "diapositivas/emparejamiento.html#matching-exacto",
    "title": "Métodos de emparejamiento",
    "section": "Matching exacto",
    "text": "Matching exacto\nUn estimador de matching exacto consiste en emparejar individuos tratados y no tratados para cada valor específico de las \\(X\\) y luego tomar el promedio ponderado de las diferencias.\nTenemos datos observacionales de individuos que recibieron y no recibieron un tratamiento y tenemos una serie de características discretizadas en \\(X_i\\).\nAsumimos que controlando por las características \\(X_i\\) podemos obtener diferencias causales y luego hacemos un promedio de dichas diferencias."
  },
  {
    "objectID": "diapositivas/emparejamiento.html#ejemplo-programa-hipotético-de-empleo",
    "href": "diapositivas/emparejamiento.html#ejemplo-programa-hipotético-de-empleo",
    "title": "Métodos de emparejamiento",
    "section": "Ejemplo: programa hipotético de empleo",
    "text": "Ejemplo: programa hipotético de empleo\nUsemos el ejemplo de MT (The Mixtape):\n\n\nread_data &lt;- function(df)\n{\n  full_path &lt;- paste(\"https://raw.github.com/scunning1975/mixtape/master/\", \n                     df, sep = \"\")\n  df &lt;- read_dta(full_path)\n  return(df)\n}\n\ntraining_example &lt;- read_data(\"training_example.dta\") %&gt;% \n  slice(1:20)\n\ndata.treat &lt;- training_example %&gt;% \n  select(unit_treat, age_treat, earnings_treat) %&gt;% \n  slice(1:10) %&gt;% \n  mutate(earnings_treat=as.numeric(earnings_treat))\n\ndata.control &lt;- training_example %&gt;% \n  select(unit_control, age_control, earnings_control)\n\ndata.matched &lt;- training_example %&gt;% \n  select(unit_matched, age_matched, earnings_matched) %&gt;% \n  slice(1:10)"
  },
  {
    "objectID": "diapositivas/emparejamiento.html#ejemplo-programa-hipotético-de-empleo-1",
    "href": "diapositivas/emparejamiento.html#ejemplo-programa-hipotético-de-empleo-1",
    "title": "Métodos de emparejamiento",
    "section": "Ejemplo: programa hipotético de empleo",
    "text": "Ejemplo: programa hipotético de empleo\n\n\nLos individuos tratados:\n\ndata.treat\n\n# A tibble: 10 × 3\n   unit_treat age_treat earnings_treat\n        &lt;dbl&gt;     &lt;dbl&gt;          &lt;dbl&gt;\n 1          1        18           9500\n 2          2        29          12250\n 3          3        24          11000\n 4          4        27          11750\n 5          5        33          13250\n 6          6        22          10500\n 7          7        19           9750\n 8          8        20          10000\n 9          9        21          10250\n10         10        30          12500\n\n\n\nMientras que los no tratados:\n\ndata.control\n\n# A tibble: 20 × 3\n   unit_control age_control earnings_control\n          &lt;dbl&gt;       &lt;dbl&gt;            &lt;dbl&gt;\n 1            1          20             8500\n 2            2          27            10075\n 3            3          21             8725\n 4            4          39            12775\n 5            5          38            12550\n 6            6          29            10525\n 7            7          39            12775\n 8            8          33            11425\n 9            9          24             9400\n10           10          30            10750\n11           11          33            11425\n12           12          36            12100\n13           13          22             8950\n14           14          18             8050\n15           15          43            13675\n16           16          39            12775\n17           17          19             8275\n18           18          30             9000\n19           19          51            15475\n20           20          48            14800"
  },
  {
    "objectID": "diapositivas/emparejamiento.html#comparación-observacional",
    "href": "diapositivas/emparejamiento.html#comparación-observacional",
    "title": "Métodos de emparejamiento",
    "section": "Comparación observacional",
    "text": "Comparación observacional\nSi hiciéramos diferencias simples obtendríamos:\n\nmean(data.treat$earnings_treat)\n\n[1] 11075\n\nmean(data.control$earnings_control)\n\n[1] 11101.25\n\n#Diferencia\nmean(data.treat$earnings_treat)- mean(data.control$earnings_control)\n\n[1] -26.25\n\n\nParece que en el grupo de control ganan más (efecto de tratamiento negativo).\nEl principal problema con esta diferencia es que sabemos que los ingresos crecen con la edad. Pero notemos que la muestra de no tratados tiene mayor edad promedio:\n\nmean(data.treat$age_treat)\n\n[1] 24.3\n\nmean(data.control$age_control)\n\n[1] 31.95\n\n#Diferencia\nmean(data.treat$age_treat)- mean(data.control$age_control)\n\n[1] -7.65\n\n\nEs decir, estaríamos confundido el efecto de la edad."
  },
  {
    "objectID": "diapositivas/emparejamiento.html#muestra-emparejada",
    "href": "diapositivas/emparejamiento.html#muestra-emparejada",
    "title": "Métodos de emparejamiento",
    "section": "Muestra emparejada",
    "text": "Muestra emparejada\nConstruyamos la muestra apareada: para cada individuo en el grupo tratado, buscaremos uno en el de control que tenga la misma edad. Cuando le encontramos un individuo no tratado al tratado con la misma edad decimos que esa pareja hizo match.\nPor ejemplo, la primera unidad tratada, con 18 años y un ingreso de 9500 estaría emparejada con la unidad 14 del grupo de control, que tiene también 18 años y un ingreso de 8050.\nPara dicho individuo de 18 años, su ingreso contrafactual sería 8050.\nCuando hay varias unidades en el grupo de control que pueden ser empatadas con la de tratamiento, podemos construir el ingreso contrafactual calulando el promedio.\nDel grupo de control, los individuos 10 y 18 tienen 30 años, con ingresos 10750 y 9000, por lo que usamos el promedio (9875) para crear el contrafactual del individuo tratado de 30 años de la fila 10."
  },
  {
    "objectID": "diapositivas/emparejamiento.html#estimador-de-matching-exacto",
    "href": "diapositivas/emparejamiento.html#estimador-de-matching-exacto",
    "title": "Métodos de emparejamiento",
    "section": "Estimador de matching exacto",
    "text": "Estimador de matching exacto\nLo anterior nos permite definir el estimador de matching exacto del TOT como:\n\\[\\hat{\\delta}_{TOT}=\\frac{1}{N_T}\\sum_{D_i=1}\\left(Y_i-\\left(\\frac{1}{M}\\sum_{m=1}^{M}Y_{jm(i)}\\right)\\right)\\]"
  },
  {
    "objectID": "diapositivas/emparejamiento.html#importancia-del-soporte-común",
    "href": "diapositivas/emparejamiento.html#importancia-del-soporte-común",
    "title": "Métodos de emparejamiento",
    "section": "Importancia del soporte común",
    "text": "Importancia del soporte común\nObservemos lo que ocurre con la distribución de edades en ambos grupos:\n\n\nPara los tratados:\n\nggplot(training_example, aes(x=age_treat)) +\n  stat_bin(bins = 10, na.rm = TRUE)\n\n\n\n\n\n\n\n\n\nMientras que para los no tratados:\n\nggplot(training_example, aes(x=age_control)) +\n  geom_histogram(bins = 10, na.rm = TRUE)\n\n\n\n\n\n\n\n\n\n\nEl supuesto de traslape débil para identificar el TOT significa que para cada unidad tratada, hay al menos un no tratado. De otra forma, no podemos hacer la comparación."
  },
  {
    "objectID": "diapositivas/emparejamiento.html#muestra-emparejada-1",
    "href": "diapositivas/emparejamiento.html#muestra-emparejada-1",
    "title": "Métodos de emparejamiento",
    "section": "Muestra emparejada",
    "text": "Muestra emparejada\nLa muestra emparejada o contrafactual será:\n\n\ndata.matched\n\n\n# A tibble: 10 × 3\n   unit_matched age_matched earnings_matched\n          &lt;dbl&gt;       &lt;dbl&gt;            &lt;dbl&gt;\n 1            1          18             8050\n 2            2          29            10525\n 3            3          24             9400\n 4            4          27            10075\n 5            5          33            11425\n 6            6          22             8950\n 7            7          19             8275\n 8            8          20             8500\n 9            9          21             8725\n10           10          30             9875"
  },
  {
    "objectID": "diapositivas/emparejamiento.html#muestra-emparejada-2",
    "href": "diapositivas/emparejamiento.html#muestra-emparejada-2",
    "title": "Métodos de emparejamiento",
    "section": "Muestra emparejada",
    "text": "Muestra emparejada\nNoten que la edad es la misma entre los tratados y la muestra apareada:\n\n\nMuestra de tratados:\n\nmean(data.treat$age_treat)\n\n[1] 24.3\n\n\n\nMuestra emparejada:\n\nmean(data.matched$age_matched)\n\n[1] 24.3\n\n\n\n\nEn este caso, decimos que la edad está balanceada.\nY entonces podemos calcular el efecto de tratamiento como la diferencia de ingresos entre los tratados y los no tratados en la muestra emparejada:\n\n#Diferencia\nmean(data.treat$earnings_treat)- mean(data.matched$earnings_matched)\n\n[1] 1695\n\n\nEn este caso, encontramos un efecto positivo del programa de 1695 unidades monetarias."
  },
  {
    "objectID": "diapositivas/emparejamiento.html#matching-exacto-1",
    "href": "diapositivas/emparejamiento.html#matching-exacto-1",
    "title": "Métodos de emparejamiento",
    "section": "Matching exacto",
    "text": "Matching exacto\nUn estimador de matching exacto consiste en emparejar individuos tratados y no tratados para cada valor específico de las \\(X\\) y luego tomar el promedio ponderado de las diferencias.\nTenemos datos observacionales de individuos que recibieron y no recibieron un tratamiento y tenemos una serie de características discretizadas en \\(X_i\\).\nAsumimos que controlando por las características \\(X_i\\) podemos obtener diferencias causales y luego hacemos un promedio de dichas diferencias."
  },
  {
    "objectID": "diapositivas/emparejamiento.html#ejemplo-de-la-vida-real",
    "href": "diapositivas/emparejamiento.html#ejemplo-de-la-vida-real",
    "title": "Métodos de emparejamiento",
    "section": "Ejemplo de la vida real",
    "text": "Ejemplo de la vida real\n\nTenemos varias características en \\(X_i\\), no solo la edad\nEsto hace que cada valor \\(X_i=x_i\\) este representado por una celda\n\\(X_i\\) incluye, por ejemplo, raza, año de solicitud de ingreso al programa, escolaridad, calificación en examen de aptitud, año de nacimiento (son las características del ejemplo que vermeos más adelante)\nEstas características definen celdas y dentro de cada celda tenemos tratados y no tratados"
  },
  {
    "objectID": "diapositivas/emparejamiento.html#efecto-del-tratamiento-con-matching-exacto",
    "href": "diapositivas/emparejamiento.html#efecto-del-tratamiento-con-matching-exacto",
    "title": "Métodos de emparejamiento",
    "section": "Efecto del tratamiento con matching exacto",
    "text": "Efecto del tratamiento con matching exacto\n\nEl TOT asumiendo inconfundibilidad:\n\n\\[\n\\begin{aligned}\n\\delta^M=TOT&=E\\left\\{ E(y_{1i}|X_i,D_i=1)-E(y_{0i}|X_i,D_i=0)|D_i=1\\right\\} \\\\\n&=E\\left\\{\\delta_X | D_i=1\\right\\}\n\\end{aligned}\n\\]\n\n\\(\\delta_X\\) es la diferencia de ingresos promedio entre estados de tratamiento para cada valor de \\(X_i\\)\nCon \\(X_i\\) discreta y con una muestra disponible:\n\n\\[\n\\delta^M=\\sum_{x} \\delta_x P(X_i=x|D_i=1)\n\\]"
  },
  {
    "objectID": "diapositivas/emparejamiento.html#ejemplo-veteranos-de-guerra-en-estados-unidos",
    "href": "diapositivas/emparejamiento.html#ejemplo-veteranos-de-guerra-en-estados-unidos",
    "title": "Métodos de emparejamiento",
    "section": "Ejemplo: veteranos de guerra en Estados Unidos",
    "text": "Ejemplo: veteranos de guerra en Estados Unidos\n\nAngrist (1998), Estimating the Labor Market Impact of Voluntary Military Service Using Social Security Data on Military Applicants\nEl tratamiento es haber servido en el ejercito, algo que claramente tiene autoselección\nSe trata de estimar el efecto en el ingreso\nLos autores construyen celdas de acuerdo a las características antes mencionadas\n\nRaza, año de solicitud de ingreso al programa, escolaridad, calificación en examen de aptitud, año de nacimiento"
  },
  {
    "objectID": "diapositivas/emparejamiento.html#ejemplo-veteranos-de-guerra-en-estados-unidos-1",
    "href": "diapositivas/emparejamiento.html#ejemplo-veteranos-de-guerra-en-estados-unidos-1",
    "title": "Métodos de emparejamiento",
    "section": "Ejemplo: veteranos de guerra en Estados Unidos",
    "text": "Ejemplo: veteranos de guerra en Estados Unidos\n\nEfectos estimados usando distintas metodologías\nLos impactos estimados usando el matching exacto se encuentran bajo la columna Controlled contrast"
  },
  {
    "objectID": "diapositivas/emparejamiento.html#ejemplo-veteranos-de-guerra-en-estados-unidos-2",
    "href": "diapositivas/emparejamiento.html#ejemplo-veteranos-de-guerra-en-estados-unidos-2",
    "title": "Métodos de emparejamiento",
    "section": "Ejemplo: veteranos de guerra en Estados Unidos",
    "text": "Ejemplo: veteranos de guerra en Estados Unidos\n\nNoten que la columna (2) muestra lo que se hubiera concluido si solo se comparan diferencias de medias\nAntes de 1980, las diferencias eran muy pequeñas (cero en términos prácticos)\nEn esta aplicación esta comparación llevaría a conclusiones incorrectas\nAdemás, las diferencias para no-blancos y blancos son distintas\nHay un pico en los afectos alrededor de 1982\nEn esta aplicación, los resultados por matching y regresión son muy parecidos hasta 1984\nLa conclusión es que existe evidencia de efectos negativos en los ingresos por haber servido en el ejército en los blancos y efectos positivos para los individuos de otras razas"
  },
  {
    "objectID": "diapositivas/emparejamiento.html#ejemplo-veteranos-de-guerra-en-estados-unidos-3",
    "href": "diapositivas/emparejamiento.html#ejemplo-veteranos-de-guerra-en-estados-unidos-3",
    "title": "Métodos de emparejamiento",
    "section": "Ejemplo: veteranos de guerra en Estados Unidos",
    "text": "Ejemplo: veteranos de guerra en Estados Unidos\n\n\nPara personas identificadas como blancas:\n\n\n\n\n\n\n\n\n\n\nPara personas identificadas como no blancas:"
  },
  {
    "objectID": "diapositivas/emparejamiento.html#métodos-de-apareamiento-o-matching",
    "href": "diapositivas/emparejamiento.html#métodos-de-apareamiento-o-matching",
    "title": "Métodos de emparejamiento",
    "section": "Métodos de apareamiento o matching",
    "text": "Métodos de apareamiento o matching\n\nLos métodos apareamiento o matching recaen en el supuesto de independencia condicional\nAl controlar por una serie de características \\(X_i\\), el tratamiento es como si fuera aleatorio\nPodemos escribir\n\n\\[\nE(Y(1)|D=1,X)=E(Y(1)|D=0,X)\n\\]\n\\[\nE(Y(0)|D=1,X)=E(Y(0)|D=0,X)\n\\]\n\nEsto es, los valores esperados de \\(Y(1)\\) y \\(Y(0)\\) son iguales cuando nos fijamos en cada valor de \\(X\\)"
  },
  {
    "objectID": "diapositivas/emparejamiento.html#supuestos-de-identificación-del-tot",
    "href": "diapositivas/emparejamiento.html#supuestos-de-identificación-del-tot",
    "title": "Métodos de emparejamiento",
    "section": "Supuestos de identificación del TOT",
    "text": "Supuestos de identificación del TOT\nSupuesto 1. Inconfundibilidad\n\\[\nY(0), Y(1) \\perp  D|X\n\\]\n\nDado un conjunto de variables \\(X\\), los resultados potenciales son independientes del tratamiento\n\\(X\\) debe incluir todas las variables que determinan el tratamiento y los resultados potenciales\n\nSupuesto 2: Traslape\n\\[\n0&lt; P(D=1|X) &lt; 1\n\\]\n\n\\(X\\) no predice \\(D\\) perfectamente\nPersonas con el mismo \\(X\\) tienen probabilidad positiva de ser tratados y no tratados"
  },
  {
    "objectID": "diapositivas/emparejamiento.html#supuestos-de-identificación-del-tot-1",
    "href": "diapositivas/emparejamiento.html#supuestos-de-identificación-del-tot-1",
    "title": "Métodos de emparejamiento",
    "section": "Supuestos de identificación del TOT",
    "text": "Supuestos de identificación del TOT\n\nCuando se cumple Supuesto 1 \\(+\\) Supuesto 2 se conoce como ignorabilidad fuerte\nHeckman (1998) muestra que estás condiciones son demasiado estrictas\nPara identificar el \\(TOT\\) es suficiente:\nSupuesto 1a. Inconfundibilidad en el control\n\n\\[\nY(0) \\perp  D | X\n\\]\n\nSupuesto 2a. Traslape débil\n\n\\[\nP(D=1|X) &lt; 1\n\\]"
  },
  {
    "objectID": "diapositivas/emparejamiento.html#matching-exacto-es-impráctico",
    "href": "diapositivas/emparejamiento.html#matching-exacto-es-impráctico",
    "title": "Métodos de emparejamiento",
    "section": "Matching exacto es impráctico",
    "text": "Matching exacto es impráctico\n\nEn la práctica es difícil manejar problemas en espacios de múltiples dimensiones: maldición de la dimensionalidad\nEl problema de la maldición de la dimensionalidad se exacerba con el tamaño limitado de las bases de datos\nSi \\(X\\) tuviera solo indicadores binarios, el número de posibles combinaciones sería \\(2^s\\)\nPor ejemplo, si solo tuviéramos \\(X_1=\\{\\text{menor de 35 años}, \\text{con 35 años o más}\\}\\), \\(X_2=\\{\\text{más que preparatoria}, \\text{menos que preparatoria}\\}\\), \\(X_3=\\{\\text{indígena}, \\text{no indígena}\\}\\), tendríamos que hacer ocho comparaciones:\n\nmenor de 35 años, más que preparatoria, indígena\nmenor de 35 años, más que preparatoria, no indígena\n…\ncon 35 años o más, menos que preparatoria, no indígena\n\nPero Si \\(X\\) incluye muchas variables, algunas tomando muchos valores, esto se vuelve imposible de realizar"
  },
  {
    "objectID": "diapositivas/emparejamiento.html#maldición-de-la-dimensionalidad",
    "href": "diapositivas/emparejamiento.html#maldición-de-la-dimensionalidad",
    "title": "Métodos de emparejamiento",
    "section": "Maldición de la dimensionalidad",
    "text": "Maldición de la dimensionalidad\n\nEl requerimiento de soporte común significa que debemos tener tratados y no tratados para cada valor de \\(X_i\\) para hacer comparaciónes\nCuando \\(X_i\\) tiene muchas dimensiones, resulta un problema de escasez o sparseness\nAlgunas celdas estarán vacías, o solo tendrán tratados, o solo tendrán no tratados\nSi tenemos unidades en todas las celdas de control, aún podemos estimar el TOT\n\nNoten que cuando completamos la pase pareada en el ejemplo hipotético siempre encontramos a alguien en el grupo de control para asignárselo a un tratado\nPero al revés, no siempre es posible: por ejemplo, no hay ningún tratado de 48 años"
  },
  {
    "objectID": "diapositivas/emparejamiento.html#teorema-del-ps-rosenbaum-y-rubin-1983",
    "href": "diapositivas/emparejamiento.html#teorema-del-ps-rosenbaum-y-rubin-1983",
    "title": "Métodos de emparejamiento",
    "section": "Teorema del PS (Rosenbaum y Rubin, 1983)",
    "text": "Teorema del PS (Rosenbaum y Rubin, 1983)\n\nCorolario 1. Inconfundibilidad dado el propensity score\nEl Supuesto 1 implica:\n\n\\[\nY(0), Y(1) \\perp  D|P(X)\n\\]\ndonde \\(P(X)=P(D=1|X)\\) es la probabilidad de ser tratado dado un conjunto de covariables \\(X\\), el propensity score o PS"
  },
  {
    "objectID": "diapositivas/emparejamiento.html#estimación",
    "href": "diapositivas/emparejamiento.html#estimación",
    "title": "Métodos de emparejamiento",
    "section": "Estimación",
    "text": "Estimación\n\nDebemos por tanto primero calcular el PS\nSe empatan o se hace match de unidades que fueron tratadas con unidades que no lo fueron usando el PS\nSe mide la diferencia en la variable de resultados entre estos grupos\nSe hace un promedio ponderado de las diferencias"
  },
  {
    "objectID": "diapositivas/emparejamiento.html#estimación-1",
    "href": "diapositivas/emparejamiento.html#estimación-1",
    "title": "Métodos de emparejamiento",
    "section": "Estimación",
    "text": "Estimación\n\nDebemos por tanto primero calcular el PS\nSe empatan o se hace match de unidades que fueron tratadas con unidades que no lo fueron usando el PS\nSe mide la diferencia en la variable de resultados entre estos grupos\nSe hace un promedio ponderado de las diferencias"
  },
  {
    "objectID": "diapositivas/emparejamiento.html#implementación",
    "href": "diapositivas/emparejamiento.html#implementación",
    "title": "Métodos de emparejamiento",
    "section": "Implementación",
    "text": "Implementación\n\nEstimación del PS\nEscoger el algoritmo de matching\nComprobar la calidad del matching\nEstimar el \\(TOT\\)"
  },
  {
    "objectID": "diapositivas/emparejamiento.html#especificar-el-modelo-del-ps",
    "href": "diapositivas/emparejamiento.html#especificar-el-modelo-del-ps",
    "title": "Métodos de emparejamiento",
    "section": "Especificar el modelo del PS",
    "text": "Especificar el modelo del PS\n\nSe usa un modelo probit o logit\n\nPrueba y error. Maximizar la tasa clasificación de tratamientos y controles usando \\(\\bar{P}\\), la proporción de tratamientos en la muestra\nSignificancia estadística. Usar solo las variables estadísticamente significativas, comenzando con un modelo muy básico\nValidación cruzada. Comenzar con un modelo simple y agregar grupos de variables comparando las que reduzcan el error cuadrático promedio\n\nEl propósito del PS es sobre todo generar balance de las variables en \\(X\\)"
  },
  {
    "objectID": "diapositivas/emparejamiento.html#recomendaciones-prácticas",
    "href": "diapositivas/emparejamiento.html#recomendaciones-prácticas",
    "title": "Métodos de emparejamiento",
    "section": "Recomendaciones prácticas",
    "text": "Recomendaciones prácticas\n\nLas características \\(X\\) que determinan la probabilidad de tratamiento deben ser observables\nLas variables usadas para calcular el PS no deben haber sido afectadas por el tratamiento\nIdealmente usamos variables \\(X\\) pre-intervención\nCuando no hay \\(X\\) pre-intervención, a veces se puede obtener el PS con variables post-intervención siempre y cuando estas no hayan sido afectadas por el tratamieto (pocas veces recomendado)\nSe recomienda ampliamente ver:\n\nCaliendo, M., & Kopeinig, S. (2008). Some practical guidance for the implementation of propensity score matching. Journal of economic surveys, 22(1), 31-72."
  },
  {
    "objectID": "diapositivas/emparejamiento.html#estimador-de-matching-exacto-1",
    "href": "diapositivas/emparejamiento.html#estimador-de-matching-exacto-1",
    "title": "Métodos de emparejamiento",
    "section": "Estimador de matching exacto",
    "text": "Estimador de matching exacto\n\nHasta aquí, solo hemos imputado el contrafactual para cada unidad en el grupo tratado\nSi podemos imputar también, para cada unidad no tratada, su correspondiente contrafactual tratado, podemos estimar el ATE\nY un estimador de matching exacto del ATE sería:\n\n\\[\\hat{\\delta}_{ATE}=\\frac{1}{N}\\sum_{i}^N(2D_i-1)\\left(Y_i-\\left(\\frac{1}{M}\\sum_{m=1}^{M}Y_{jm(i)}\\right)\\right)\\]"
  },
  {
    "objectID": "diapositivas/emparejamiento.html#efecto-del-tratamiento",
    "href": "diapositivas/emparejamiento.html#efecto-del-tratamiento",
    "title": "Métodos de emparejamiento",
    "section": "Efecto del tratamiento",
    "text": "Efecto del tratamiento\n\nEl efecto del tratamiento, bajo el supuesto de inconfundibilidad dado el propensity score, es:\n\n\\[\nTOT^{PSM}=E_{P(X)|D=1} \\left(E(Y(1)|D=1, P(X))-E(Y(0)|D=0,P(X)) \\right)\n\\]\n\nEl \\(TOT\\) es la diferencia en la variable de resultados de los tratados y los no tratados pesada por la distribución del PS en los tratados"
  },
  {
    "objectID": "diapositivas/emparejamiento.html#vecino-más-cercano",
    "href": "diapositivas/emparejamiento.html#vecino-más-cercano",
    "title": "Métodos de emparejamiento",
    "section": "Vecino más cercano",
    "text": "Vecino más cercano\n\nA cada individuo del grupo tratado se le asigna uno del grupo de comparación en términos del PS\nPuede hacerse con remplazo o sin remplazo\nPuede emplearse también sobremuestreo (oversampling), es decir, asignar más de un individuo del grupo de comparación\nPor ejemplo NN 5 significa que a cada individuo tratado se le asignan los cinco individuos del grupo no tratado con los PS estimados más cercanos"
  },
  {
    "objectID": "diapositivas/emparejamiento.html#vecino-más-cercano-1",
    "href": "diapositivas/emparejamiento.html#vecino-más-cercano-1",
    "title": "Métodos de emparejamiento",
    "section": "Vecino más cercano",
    "text": "Vecino más cercano\n\n\n\n\n\nTratados\n\\(\\hat{p}\\)\n\n\n\n\na\n0.031\n\n\nb\n0.042\n\n\nc\n0.07\n\n\n\\(\\vdots\\)\n\\(\\vdots\\)\n\n\n\n\n\n\n\nNo tratados\n\\(\\hat{p}\\)\n\n\n\n\nA\n0.034\n\n\nB\n0.068\n\n\nC\n0.21\n\n\n\\(\\vdots\\)\n\\(\\vdots\\)\n\n\n\n\n\n\nCon vecino más cercano, el individuo \\(a\\) tratado estaría emparejado con el \\(A\\) no tratado\nSi el emparejamiento es con reemplazo, \\(A\\) podría ser usado otra vez y \\(b\\) también sería emparejado con \\(A\\)\nPero si el emparejamiento es sin reemplazo, \\(A\\) ya no puede ser usado y a \\(b\\) se le emparejaría con \\(B\\)\nCuando hacemos el pareamiento sin reemplazo, debemos tener una muestra lo suficientemente grande\nEl pareamiento sin reemplazo depende del orden en que se realice el procedimiento"
  },
  {
    "objectID": "diapositivas/emparejamiento.html#caliper-y-radio",
    "href": "diapositivas/emparejamiento.html#caliper-y-radio",
    "title": "Métodos de emparejamiento",
    "section": "Caliper y radio",
    "text": "Caliper y radio\n\nEl método de vecino más cercano puede generar malos emparejamientos si el vecino más cercano está muy lejos en términos del PS\nEspecificar un caliper consiste en definir una vecindad aceptable de matching (el caliper) y elegir solo el vecino más cercano dentro del caliper\nCon las funciones de R que usaremos más adelante, el radio consiste en definir cuántos individuos deberán ser apareados dado que están dentro del caliper"
  },
  {
    "objectID": "diapositivas/emparejamiento.html#caliper",
    "href": "diapositivas/emparejamiento.html#caliper",
    "title": "Métodos de emparejamiento",
    "section": "Caliper",
    "text": "Caliper\n\n\n\n\n\nTratados\n\\(\\hat{p}\\)\n\n\n\n\na\n0.031\n\n\nb\n0.042\n\n\nc\n0.07\n\n\nd\n0.11\n\n\n\\(\\vdots\\)\n\\(\\vdots\\)\n\n\n\n\n\n\n\nNo tratados\n\\(\\hat{p}\\)\n\n\n\n\nA\n0.034\n\n\nB\n0.068\n\n\nC\n0.21\n\n\nD\n0.40\n\n\n\\(\\vdots\\)\n\\(\\vdots\\)\n\n\n\n\n\n\nEl primer paso es fijar el caliper, por ejemplo, de 0.1\nEl caliper implica buscar al vecino más cercano dentro de una vecindad de 0.1\nEn este ejemplo \\(c\\) podría ser solo emparejado con \\(B\\) si \\(B\\) aún está disponible (porque no ha sido emparejado con nadie o porque aunque haya sido emparejado, el procedimiento se hace con reemplazo)"
  },
  {
    "objectID": "diapositivas/emparejamiento.html#caliper-con-sobremuestreo",
    "href": "diapositivas/emparejamiento.html#caliper-con-sobremuestreo",
    "title": "Métodos de emparejamiento",
    "section": "Caliper con sobremuestreo",
    "text": "Caliper con sobremuestreo\n\n\n\n\n\nTratados\n\\(\\hat{p}\\)\n\n\n\n\nd\n0.31\n\n\ne\n0.39\n\n\nf\n0.44\n\n\ng\n0.52\n\n\nh\n0.55\n\n\ni\n0.62\n\n\n\\(\\vdots\\)\n\\(\\vdots\\)\n\n\n\n\n\n\n\nNo tratados\n\\(\\hat{p}\\)\n\n\n\n\nR\n0.27\n\n\nS\n0.29\n\n\nT\n0.33\n\n\nU\n0.49\n\n\nV\n0.57\n\n\nW\n0.61\n\n\n\\(\\vdots\\)\n\\(\\vdots\\)\n\n\n\n\n\n\nSi el caliper se realiza con sobremuestreo, con un caliper de 0.10 y 2 vecinos a \\(g\\) se le asignarían \\(U\\) y \\(V\\) (si estuvieran disponibles)\nEs decir, dentro del caliper, los dos individuos con el PS más cercano"
  },
  {
    "objectID": "diapositivas/emparejamiento.html#radio",
    "href": "diapositivas/emparejamiento.html#radio",
    "title": "Métodos de emparejamiento",
    "section": "Radio",
    "text": "Radio\n\n\n\n\n\nTratados\n\\(\\hat{p}\\)\n\n\n\n\nd\n0.31\n\n\ne\n0.39\n\n\nf\n0.44\n\n\ng\n0.52\n\n\nh\n0.55\n\n\ni\n0.62\n\n\n\\(\\vdots\\)\n\\(\\vdots\\)\n\n\n\n\n\n\n\nNo tratados\n\\(\\hat{p}\\)\n\n\n\n\nR\n0.27\n\n\nS\n0.29\n\n\nT\n0.33\n\n\nU\n0.49\n\n\nV\n0.57\n\n\nW\n0.61\n\n\n\\(\\vdots\\)\n\\(\\vdots\\)\n\n\n\n\n\n\nPero si ahora implementamos radio con un caliper de 0.10, a \\(g\\) se le asignarían \\(U\\), \\(V\\) y \\(W\\) (si estuvieran disponibles)\nEs decir, todos los individuos dentro del caliper"
  },
  {
    "objectID": "diapositivas/emparejamiento.html#estratificación",
    "href": "diapositivas/emparejamiento.html#estratificación",
    "title": "Métodos de emparejamiento",
    "section": "Estratificación",
    "text": "Estratificación\n\nPartir la región de soporte común en bloques de acuerdo al PS\nEstimar el efecto de tratamiento dentro de cada bloque\nNo hay una regla sobre cuántos estratos usar. Se aconsajan generalmente cinco\nDentro de cada estrato debe haber balance de los covariables"
  },
  {
    "objectID": "diapositivas/emparejamiento.html#kernel-y-métodos-no-paramétricos",
    "href": "diapositivas/emparejamiento.html#kernel-y-métodos-no-paramétricos",
    "title": "Métodos de emparejamiento",
    "section": "Kernel y métodos no paramétricos",
    "text": "Kernel y métodos no paramétricos\n\nLos métodos anteriores escogen solo unas cuantas unidades del grupo de comparación\nPodemos escoger usar muchas o incluso todas las observaciones del grupo de comparación y pesarlas apropiadamente\nSe reduce la varianza pues usamos más información, pero se sacrifica precisión pues se usan observaciones potencialmente muy distantes\nSe le otorga más peso a las observaciones más cercanas y menos a las más distantes"
  },
  {
    "objectID": "diapositivas/emparejamiento.html#kernel",
    "href": "diapositivas/emparejamiento.html#kernel",
    "title": "Métodos de emparejamiento",
    "section": "Kernel",
    "text": "Kernel\n\n\n\n\n\nTratados\n\\(\\hat{p}\\)\n\n\n\n\nd\n0.31\n\n\ne\n0.39\n\n\nf\n0.44\n\n\ng\n0.52\n\n\nh\n0.55\n\n\ni\n0.62\n\n\n\n\n\n\n\nNo tratados\n\\(\\hat{p}\\)\n\n\n\n\nR\n0.27\n\n\nS\n0.29\n\n\nT\n0.33\n\n\nU\n0.49\n\n\nV\n0.57\n\n\nW\n0.61\n\n\n\n\n\n\nSupongamos que estos son todos nuestros datos\nCon un emparejamiento por kernel, a \\(d\\) lo compararemos con todos los individuos, desde \\(R\\) hasta \\(W\\)\nLa función kernel le dará más peso a \\(R\\), un poco menos a \\(S\\) y así hasta darle muy poco o casi nada de peso a \\(W\\)"
  },
  {
    "objectID": "diapositivas/emparejamiento.html#qué-método-usar",
    "href": "diapositivas/emparejamiento.html#qué-método-usar",
    "title": "Métodos de emparejamiento",
    "section": "¿Qué método usar?",
    "text": "¿Qué método usar?\n\nNo hay un método claramente superior a todos los demás\nMás aún, el desempeño de cada método depende de cada aplicación\nLa ruta más seguida es usar varios algoritmos y mostrar la robustez de los resultados a esta elección"
  },
  {
    "objectID": "diapositivas/emparejamiento.html#comprobar-empíricamente-los-supuestos",
    "href": "diapositivas/emparejamiento.html#comprobar-empíricamente-los-supuestos",
    "title": "Métodos de emparejamiento",
    "section": "Comprobar empíricamente los supuestos",
    "text": "Comprobar empíricamente los supuestos\n\nEl parámetro \\(TOT\\) solo se calcula sobre la región de sporte común por lo que se debe verificar el traslape del PS calculado para los tratados y no tratados\nOtro de los teoremas de Rosenbaum y Rubin (1983) implica que\n\n\\[\nX \\perp  D|P(X)\n\\]\n\nEsto es, que al controlar por el PS, las variables \\(X\\) no deben proveer información sobre \\(D\\)\nSe recomienda también hacer una prueba de estratificación\n\nDividir el rango del soporte común en bloques\nHacer una prueba de medias del PS entre grupos dentro de cada bloque\nHacer una prueba de medias de cada variable en \\(X_i\\) entre grupos dentro de cada bloque"
  },
  {
    "objectID": "diapositivas/emparejamiento.html#ilustración-del-soporte-común",
    "href": "diapositivas/emparejamiento.html#ilustración-del-soporte-común",
    "title": "Métodos de emparejamiento",
    "section": "Ilustración del soporte común",
    "text": "Ilustración del soporte común"
  },
  {
    "objectID": "diapositivas/emparejamiento.html#paquetes",
    "href": "diapositivas/emparejamiento.html#paquetes",
    "title": "Métodos de emparejamiento",
    "section": "Paquetes",
    "text": "Paquetes\nUsaremos dos paquetes nuevos: MatchIt y cobalt, que pueden descargar como cualquier otro paquete desde CRAN."
  },
  {
    "objectID": "diapositivas/emparejamiento.html#datos-no-experimentales-de-una-muestra-de-mujeres",
    "href": "diapositivas/emparejamiento.html#datos-no-experimentales-de-una-muestra-de-mujeres",
    "title": "Métodos de emparejamiento",
    "section": "Datos no experimentales de una muestra de mujeres",
    "text": "Datos no experimentales de una muestra de mujeres\nLos datos en cattaneo_smoking.csv (Cattaneo, 2010) son de una muestra de mujeres que incluye un indicador de si la madre fumó durante el embarazo. El propósito es evaluar el efecto de fumar sobre el peso de los bebés al nacer. Se incluyen una serie de covariables que usaremos para modelar el propensity score."
  },
  {
    "objectID": "diapositivas/emparejamiento.html#matchit-para-realizar-los-emparejamientos",
    "href": "diapositivas/emparejamiento.html#matchit-para-realizar-los-emparejamientos",
    "title": "Métodos de emparejamiento",
    "section": "matchit para realizar los emparejamientos",
    "text": "matchit para realizar los emparejamientos\nLa función que usaremos para hacer los emparejamientos es matchit de la librería MatchIt. Antes de hacer los emparejamientos, construimos la dummy de tratamiento, smoke, una dummy para mujeres casadas, married, y una dummy para si el caso en cuestión es el primer bebé. firstbaby:\n\ndata.smoking&lt;-read_csv(\n  \"./cattaneo_smoking.csv\",\n  locale = locale(encoding = \"latin1\")) %&gt;% \n  clean_names() %&gt;% \n  mutate(smoke=ifelse(mbsmoke==\"smoker\",1,0)) %&gt;% \n  mutate(married=ifelse(mmarried==\"married\",1,0)) %&gt;% \n  mutate(firstbaby=ifelse(fbaby==\"Yes\",1,0))\n\n#Asegurarse que no hay NA, matchit no acepta NA\ndata.smoking &lt;- data.smoking[complete.cases(data.smoking), ]\n\n#Una semilla para todo el trabajo\nset.seed(1021)"
  },
  {
    "objectID": "diapositivas/emparejamiento.html#estimación-del-ps",
    "href": "diapositivas/emparejamiento.html#estimación-del-ps",
    "title": "Métodos de emparejamiento",
    "section": "Estimación del PS",
    "text": "Estimación del PS\nUna manera de hacer más eficiente el uso de las fórmulas es usando as.formula:\n\nbinaria &lt;- \"smoke\"\nvariables &lt;- c(\"married\", \"firstbaby\", \"medu\", \"nprenatal\", \"foreign\", \"mhisp\", \"fage\")\n\nps &lt;- as.formula(paste(binaria,\n                         paste(variables,\n                               collapse =\"+\"),\n                         sep= \" ~ \"))\nprint(ps)\n\nsmoke ~ married + firstbaby + medu + nprenatal + foreign + mhisp + \n    fage\n\n\nUsamos matchit para estimar el PS y realizar los emparejamientos con el algoritmo que indiquemos:\n\nm.out &lt;- matchit(formula=ps,\n                 method = \"nearest\",\n                 ratio = 1,\n                 distance= \"logit\",\n                 replace = FALSE,\n                 data = data.smoking)"
  },
  {
    "objectID": "diapositivas/emparejamiento.html#verificación-del-balance",
    "href": "diapositivas/emparejamiento.html#verificación-del-balance",
    "title": "Métodos de emparejamiento",
    "section": "Verificación del balance",
    "text": "Verificación del balance\n\n\nGráfico de nube:\n\nplot(m.out, type = \"jitter\")\n\n\n\n\n\n\n\n\nTo identify the units, use first mouse button; to stop, use second.\n\n\n\nHistograma:\n\nplot(m.out, type = \"hist\")"
  },
  {
    "objectID": "diapositivas/emparejamiento.html#loveplot",
    "href": "diapositivas/emparejamiento.html#loveplot",
    "title": "Métodos de emparejamiento",
    "section": "Loveplot",
    "text": "Loveplot\nUsando la librería cobalt podemos construir un love plot que representa gráficamente las diferencias antes y después del emparejamiento\n\n\nlove.plot(bal.tab(m.out),\n          threshold = .1)"
  },
  {
    "objectID": "diapositivas/emparejamiento.html#efecto-de-tratamiento",
    "href": "diapositivas/emparejamiento.html#efecto-de-tratamiento",
    "title": "Métodos de emparejamiento",
    "section": "Efecto de tratamiento",
    "text": "Efecto de tratamiento\nExisten muchas maneras de explotar la muestra emparejada. Aquí veremos la más sencilla. Simplemente consideremos a la muestra emparejada como si viniera de un experimento. Sin embargo, debemos poner especial atención a la forma de hacer inferencia pues no debemos ignorar que el PS es estimado.\nDependiendo de si el emparejamiento ocurre con o sin reemplazo, y de la naturaleza de la variable dependiente, se recomiendan distintas maneras de estimar el efecto del tratamiento y hacer inferencia. Una buena guía está en la documentación de MatchIt.\nPor ejemplo, cuando se realiza el emparejamiento sin reemplazo, Abadie & Spiess (2019) muestran que podemos estimar los errores estándar simplemente agrupando a nivel de pareja (o grupo) emparejado (subclass es una columna que enumera a las parejas o grupos emparejados y es construida automáticamente por matchit)."
  },
  {
    "objectID": "diapositivas/emparejamiento.html#conclusión",
    "href": "diapositivas/emparejamiento.html#conclusión",
    "title": "Métodos de emparejamiento",
    "section": "Conclusión",
    "text": "Conclusión\n\nLas técnicas de PSM dependen de varios supuestos téoricos fuertes\nLa implementación implica que las variables en \\(X\\) son aquellas que permiten hacer los supuestos de inconfundibilidad dado el PS\nEn la estimación del PS se toma la decisión sobre la forma funcional\nLos efectos de tratamiento pueden ser distintos entre diferentes algoritmos de emparejamiento y la especificación del PS\nLa crítica más importante es que la mayoría de las veces nos preocupa más la autoselección basada en no observables que en observables\nPero muchas veces es todo lo que tenemos a la mano\nHay que hacer análisis de sensibilidad a las distintas decisiones\nPresentar resultados transparentes"
  },
  {
    "objectID": "diapositivas/emparejamiento.html#comparación-observacional-1",
    "href": "diapositivas/emparejamiento.html#comparación-observacional-1",
    "title": "Métodos de emparejamiento",
    "section": "Comparación observacional",
    "text": "Comparación observacional\nNotemos que, si solo comparamos a las mujeres que fuman con las que no fuman, estamos comparando personas muy diferentes:\n\n\ndatasummary_balance(~smoke,\n                    fmt = \"%.2f\",\n                    data = select(data.smoking, smoke, married, firstbaby, medu, nprenatal, foreign, mhisp, fage),\n                    dinm_statistic = \"p.value\",\n                    title = \"Pruebas de balance\",\n                    notes = \"Fuente: Cattaneo (2009)\")\n\n\n \n\n  \n    \n    \n    tinytable_1lsywiap0udluzc6gvjv\n    \n    \n    \n    \n  \n\n  \n    \n      \n        \n\n \n0\n1\n \n \n\n        Pruebas de balance\n              \n                 \n                Mean\n                Std. Dev.\n                Mean\n                Std. Dev.\n                Diff. in Means\n                p\n              \n        \n        Fuente: Cattaneo (2009)\n        \n                \n                  married  \n                  0.75 \n                  0.43\n                  0.47 \n                  0.50 \n                  -0.28\n                  0.00\n                \n                \n                  firstbaby\n                  0.45 \n                  0.50\n                  0.37 \n                  0.48 \n                  -0.08\n                  0.00\n                \n                \n                  medu     \n                  12.93\n                  2.53\n                  11.64\n                  2.17 \n                  -1.29\n                  0.00\n                \n                \n                  nprenatal\n                  10.96\n                  3.52\n                  9.86 \n                  4.21 \n                  -1.10\n                  0.00\n                \n                \n                  foreign  \n                  0.06 \n                  0.24\n                  0.03 \n                  0.16 \n                  -0.03\n                  0.00\n                \n                \n                  mhisp    \n                  0.04 \n                  0.19\n                  0.02 \n                  0.15 \n                  -0.01\n                  0.05\n                \n                \n                  fage     \n                  27.84\n                  8.79\n                  24.74\n                  11.15\n                  -3.10\n                  0.00"
  },
  {
    "objectID": "diapositivas/emparejamiento.html#estimación-del-ps-1",
    "href": "diapositivas/emparejamiento.html#estimación-del-ps-1",
    "title": "Métodos de emparejamiento",
    "section": "Estimación del PS",
    "text": "Estimación del PS\nEl resumen del procedimiento da bastante información sobre el pareamiento:\n\nsummary(m.out)\n\n\nCall:\nmatchit(formula = ps, data = data.smoking, method = \"nearest\", \n    distance = \"logit\", replace = FALSE, ratio = 1)\n\nSummary of Balance for All Data:\n          Means Treated Means Control Std. Mean Diff. Var. Ratio eCDF Mean\ndistance         0.2568        0.1700          0.6673     1.4475    0.2002\nmarried          0.4734        0.7515         -0.5569          .    0.2781\nfirstbaby        0.3715        0.4531         -0.1689          .    0.0816\nmedu            11.6389       12.9299         -0.5955     0.7316    0.0717\nnprenatal        9.8623       10.9629         -0.2616     1.4301    0.0376\nforeign          0.0255        0.0598         -0.2181          .    0.0344\nmhisp            0.0243        0.0363         -0.0776          .    0.0120\nfage            24.7431       27.8444         -0.2782     1.6070    0.0468\n          eCDF Max\ndistance    0.3329\nmarried     0.2781\nfirstbaby   0.0816\nmedu        0.2549\nnprenatal   0.1259\nforeign     0.0344\nmhisp       0.0120\nfage        0.1377\n\nSummary of Balance for Matched Data:\n          Means Treated Means Control Std. Mean Diff. Var. Ratio eCDF Mean\ndistance         0.2568        0.2564          0.0033     1.0110    0.0005\nmarried          0.4734        0.4769         -0.0070          .    0.0035\nfirstbaby        0.3715        0.3981         -0.0551          .    0.0266\nmedu            11.6389       11.6019          0.0171     0.7064    0.0161\nnprenatal        9.8623        9.8588          0.0008     1.1543    0.0059\nforeign          0.0255        0.0174          0.0514          .    0.0081\nmhisp            0.0243        0.0231          0.0075          .    0.0012\nfage            24.7431       24.5799          0.0146     1.0787    0.0124\n          eCDF Max Std. Pair Dist.\ndistance    0.0093          0.0046\nmarried     0.0035          0.2202\nfirstbaby   0.0266          0.4575\nmedu        0.0417          0.5168\nnprenatal   0.0185          0.7039\nforeign     0.0081          0.2425\nmhisp       0.0012          0.2781\nfage        0.0556          0.6457\n\nSample Sizes:\n          Control Treated\nAll          3778     864\nMatched       864     864\nUnmatched    2914       0\nDiscarded       0       0"
  },
  {
    "objectID": "diapositivas/emparejamiento.html#muestra-emparejada-3",
    "href": "diapositivas/emparejamiento.html#muestra-emparejada-3",
    "title": "Métodos de emparejamiento",
    "section": "Muestra emparejada",
    "text": "Muestra emparejada\nPodemos guardar un objeto con la muestra emparejada usando match.data y observar quién hace match con quién:\n\n\nm.data &lt;- match.data(m.out)\n\nhead(m.out$match.matrix)\n\n\n   [,1]  \n11 \"4130\"\n20 \"2234\"\n25 \"1740\"\n43 \"2857\"\n47 \"305\" \n49 \"1442\""
  },
  {
    "objectID": "diapositivas/emparejamiento.html#muestra-emparejada-4",
    "href": "diapositivas/emparejamiento.html#muestra-emparejada-4",
    "title": "Métodos de emparejamiento",
    "section": "Muestra emparejada",
    "text": "Muestra emparejada\nUna propuesta para determinar si el emparejamiento fue exitoso es observar las diferencias promedio estandarizadas (SMD) entre los grupos tratados y no tratados, antes y después del emparejamiento.\n\\[SMD_X=\\frac{\\bar{X}_T-\\bar{X}_{NT}}{\\sqrt{S^2_T+S^2_{NT}}}\\]\nTambién vale la pena no perder de vista la razón de varianzas (VR). Se espera que este ratio no sea muy distinto de 1 después de hacer el emparejamiento:\n\\[VR=\\frac{S^2_T}{S^2_{NT}}\\]\nComo regla de dedo, una diferencia de 0.1 o menos en el SMD se considera un buen balance. Por ejemplo, la escolaridad de la madre tenía un SDM de -0.5955 en la muestra en bruto, pero con el emparejamiento el SDM se vuelve de solo 0.0171."
  },
  {
    "objectID": "diapositivas/emparejamiento.html#efecto-de-tratamiento-1",
    "href": "diapositivas/emparejamiento.html#efecto-de-tratamiento-1",
    "title": "Métodos de emparejamiento",
    "section": "Efecto de tratamiento",
    "text": "Efecto de tratamiento\nUsando una regresión con la muestra emparejada\n\ntt1 &lt;- lm(bweight ~ smoke,\n          data = m.data,\n          weights = weights)\n\n#Errores agrupados a nivel subclass\ncoeftest(tt1,\n         vcov. = vcovCL,\n         cluster = ~subclass)\n\n\nt test of coefficients:\n\n            Estimate Std. Error  t value  Pr(&gt;|t|)    \n(Intercept) 3331.473     21.424 155.5033 &lt; 2.2e-16 ***\nsmoke       -193.814     28.137  -6.8882 7.889e-12 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1"
  },
  {
    "objectID": "diapositivas/emparejamiento.html#efecto-de-tratamiento-2",
    "href": "diapositivas/emparejamiento.html#efecto-de-tratamiento-2",
    "title": "Métodos de emparejamiento",
    "section": "Efecto de tratamiento",
    "text": "Efecto de tratamiento\nAlgunos autores incluyen los covariables en su estimación:\n\ntt2 &lt;- lm(bweight ~ smoke + married + firstbaby + medu + nprenatal + foreign + mhisp + fage,\n          data = m.data,\n          weights = weights)\n\n#Errores agrupados a nivel subclass\ncoeftest(tt2,\n         vcov. = vcovCL,\n         cluster = ~subclass)\n\n\nt test of coefficients:\n\n              Estimate Std. Error t value  Pr(&gt;|t|)    \n(Intercept) 2984.54803   76.55850 38.9839 &lt; 2.2e-16 ***\nsmoke       -195.50844   27.96378 -6.9915 3.879e-12 ***\nmarried      113.92672   30.76389  3.7033 0.0002196 ***\nfirstbaby    -62.70697   30.19829 -2.0765 0.0379953 *  \nmedu           0.12530    5.38318  0.0233 0.9814333    \nnprenatal     32.29921    4.49984  7.1779 1.049e-12 ***\nforeign       25.99372  109.26081  0.2379 0.8119829    \nmhisp        111.67360   85.14066  1.3116 0.1898179    \nfage          -0.21788    1.43015 -0.1523 0.8789301    \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n\nCuando el emparejamiento es con reemplazo, las unidades no tratadas son emparejadas varias veces (aparecen repetidas en la muestra emparejada), lo cual debe ser considerado para estimar los efectos del tratamiento y hacer inferencia. Por ejemplo, se puede usar bootstrap para obtener el error estándar del efecto del tratamiento cuando la variable de impacto es continua."
  },
  {
    "objectID": "diapositivas/did.html#qué-hace-el-estimador-de-twfe",
    "href": "diapositivas/did.html#qué-hace-el-estimador-de-twfe",
    "title": "Diferencia en diferencias",
    "section": "¿Qué hace el estimador de TWFE?",
    "text": "¿Qué hace el estimador de TWFE?\nConsideremos el siguiente problema de adopción escalonada\n\nObservamos \\(T\\) periodos\n\\(k\\) denota la unidad tratada temprano\n\\(l\\) denota la unidad tratada tarde\nDenotamos \\(\\bar{D}_k\\) al tiempo que \\(k\\) pasa tratado\nSimilarmente, \\(\\bar{D}_l\\)\n\\(n_k\\) es el número de unidades tratadas temprano\n\\(n_l\\) es el número de unidades tratadas tarde\n\\(n_U\\) es el número de unidades nunca tratadas\nPara cualesquiera dos grupos \\(a\\) y \\(b\\), \\(a_{ab}=\\frac{n_a}{n_a+n_b}\\)"
  },
  {
    "objectID": "diapositivas/did.html#qué-hace-el-estimador-de-twfe-1",
    "href": "diapositivas/did.html#qué-hace-el-estimador-de-twfe-1",
    "title": "Diferencia en diferencias",
    "section": "¿Qué hace el estimador de TWFE?",
    "text": "¿Qué hace el estimador de TWFE?"
  },
  {
    "objectID": "diapositivas/did.html#qué-hace-el-estimador-de-twfe-2",
    "href": "diapositivas/did.html#qué-hace-el-estimador-de-twfe-2",
    "title": "Diferencia en diferencias",
    "section": "¿Qué hace el estimador de TWFE?",
    "text": "¿Qué hace el estimador de TWFE?\nTenemos cuatro posibles comparaciones \\(2x2\\)\n\nLas comparaciones con las unidades nunca tratadas:\n\n\\[\\hat{\\beta}_{jU}=\\left(\\bar{y}_j^{POST(j)}-\\bar{y}_j^{PRE(j)}\\right)-\\left(\\bar{y}_U^{POST(j)}-\\bar{y}_U^{PRE(j)}\\right),\\;j=\\{k,l\\}\\]\n\nLa comparación entre \\(k\\) y \\(l\\) cuando \\(k\\) es tratada, usando los periodos antes de que \\(l\\) sea tratada\n\n\\[\\hat{\\beta}^{k}_{kl}=\\left(\\bar{y}_k^{MID(k,l)}-\\bar{y}_k^{PRE(k)}\\right)-\\left(\\bar{y}_l^{MID(k,l)}-\\bar{y}_l^{PRE(k)}\\right)\\]\n\nLa comparación entre \\(l\\) y \\(k\\) cuando \\(l\\) es tratada, usando los periodos después de que \\(k\\) fue tratada\n\n\\[\\hat{\\beta}^{l}_{kl}=\\left(\\bar{y}_l^{POST(l)}-\\bar{y}_l^{MID(k,l)}\\right)-\\left(\\bar{y}_k^{POST(l)}-\\bar{y}_k^{MID(k,l)}\\right)\\]"
  },
  {
    "objectID": "diapositivas/did.html#qué-hace-el-estimador-de-twfe-3",
    "href": "diapositivas/did.html#qué-hace-el-estimador-de-twfe-3",
    "title": "Diferencia en diferencias",
    "section": "¿Qué hace el estimador de TWFE?",
    "text": "¿Qué hace el estimador de TWFE?"
  },
  {
    "objectID": "diapositivas/did.html#qué-son-los-pesos",
    "href": "diapositivas/did.html#qué-son-los-pesos",
    "title": "Diferencia en diferencias",
    "section": "¿Qué son los pesos?",
    "text": "¿Qué son los pesos?\nGoodman-Bacon (2021) muestra que los pesos están dados por:\n\n\\(s_{kU}=\\frac{(n_k+n_U)^2\\hat{V}_{kU}^D}{\\hat{V}^D}\\)\n\\(s_{lU}=\\frac{(n_l+n_U)^2\\hat{V}_{lU}^D}{\\hat{V}^D}\\)\n\\(s_{kl}^k=\\frac{[(n_k+n_l)(1-\\bar{D}_l)]^2\\hat{V}_{kl}^{D,k}}{\\hat{V}^D}\\)\n\\(s_{kl}^l=\\frac{[(n_k+n_l)\\bar{D}_k]^2\\hat{V}_{kl}^{D,l}}{\\hat{V}^D}\\)"
  },
  {
    "objectID": "diapositivas/did.html#qué-son-los-pesos-1",
    "href": "diapositivas/did.html#qué-son-los-pesos-1",
    "title": "Diferencia en diferencias",
    "section": "¿Qué son los pesos?",
    "text": "¿Qué son los pesos?\nLas varianzas del tratamiento en la submuestra tienen las siguientes formas:\n\n\\(s_{kU}=\\frac{(n_k+n_U)^2\\hat{V}_{kU}^D}{\\hat{V}^D}=\\frac{(n_k+n_U)^2n_{kU}(1-n_{kU})\\bar{D}_k(1-\\bar{D}_k)}{\\hat{V}^D}\\)\n\\(s_{lU}=\\frac{(n_l+n_U)^2\\hat{V}_{lU}^D}{\\hat{V}^D}=\\frac{(n_l+n_U)^2n_{lU}(1-n_{lU})\\bar{D}_l(1-\\bar{D}_l)}{\\hat{V}^D}\\)\n\\(s_{kl}^k=\\frac{[(n_k+n_l)(1-\\bar{D}_l)]^2\\hat{V}_{kl}^{D,k}}{\\hat{V}^D}=\\frac{[(n_k+n_l)(1-\\bar{D}_l)]^2n_{kl}(1-n_{kl}) \\frac{\\bar{D}_k-\\bar{D}_l}{1-\\bar{D}_l}\\frac{1-\\bar{D}_k}{1-\\bar{D}_l}}{\\hat{V}^D}\\)\n\\(s_{kl}^l=\\frac{[(n_k+n_l)\\bar{D}_k]^2\\hat{V}_{kl}^{D,l}}{\\hat{V}^D}=\\frac{[(n_k+n_l)\\bar{D}_k]^2n_{kl}(1-n_{kl})\\frac{\\bar{D}_l}{\\bar{D}_k}\\frac{\\bar{D}_k-\\bar{D}_l}{\\bar{D}_k}}{\\hat{V}^D}\\)"
  },
  {
    "objectID": "diapositivas/did.html#qué-hace-el-estimador-de-twfe-4",
    "href": "diapositivas/did.html#qué-hace-el-estimador-de-twfe-4",
    "title": "Diferencia en diferencias",
    "section": "¿Qué hace el estimador de TWFE?",
    "text": "¿Qué hace el estimador de TWFE?\nDenotamos \\(D_{it}=1\\) cuando la unidad \\(i\\) es tratada en el periodo \\(0\\)\nPor el teorema de Frisch-Waugh-Lovell sabemos que podemos purgar de efectos fijos a la variable \\(D_{it}\\)\nEs decir, podemos estimar por MCO:\n\\[D_{it}=\\sum_t \\gamma_t P_t + \\sum_i \\pi S_i + \\varepsilon_{it}\\]\ndonde \\(P_t\\) son dummies temporales y \\(S_i\\) son dummies individuales\nLuego obtenemos\n\\[\\tilde{D}_{it}=D_{it}-\\hat{D}_{it}\\] Y entonces el estimador de TWFE puede escribirse como el coeficiente de una regresión bivariada:\n\\[\\hat{\\beta}_{DD}=\\frac{\\hat{C}(y_{it}, \\tilde{D}_{it})}{\\hat{V}^D}\\] \\(\\hat{V}^D\\) es la varianza de la variable de tratamiento purgada de efectos fijos"
  },
  {
    "objectID": "diapositivas/did.html#qué-hace-el-estimador-de-twfe-5",
    "href": "diapositivas/did.html#qué-hace-el-estimador-de-twfe-5",
    "title": "Diferencia en diferencias",
    "section": "¿Qué hace el estimador de TWFE?",
    "text": "¿Qué hace el estimador de TWFE?\nGoodman-Bacon (2021) muestra que el estimador de TWFE puede descomponerse como:\n\\[\\hat{\\beta}_{DD}=s_{kU}\\hat{\\beta}_{kU}+s_{lU}\\hat{\\beta}_{lU}+s_{kl}^k\\hat{\\beta}_{kl}^k+s_{kl}^l\\hat{\\beta}_{kl}^l\\]"
  },
  {
    "objectID": "diapositivas/did.html#qué-son-los-pesos-2",
    "href": "diapositivas/did.html#qué-son-los-pesos-2",
    "title": "Diferencia en diferencias",
    "section": "¿Qué son los pesos?",
    "text": "¿Qué son los pesos?\nPongamos atención a uno de los pesos, \\(s_{kU}\\) para ver la intuición\nVimos que:\n\\[s_{kU}=\\frac{(n_k+n_U)^2\\hat{V}_{kU}^D}{\\hat{V}^D}=\\frac{(n_k+n_U)^2n_{kU}(1-n_{kU})\\bar{D}_k(1-\\bar{D}_k)}{\\hat{V}^D}\\]\nPrimero, noten que el peso depende de \\((n_k+n_u)^2\\), es decir, la parte de la submuestra que se usa para estimar cada comparación \\(2x2\\)"
  },
  {
    "objectID": "diapositivas/did.html#qué-son-los-pesos-3",
    "href": "diapositivas/did.html#qué-son-los-pesos-3",
    "title": "Diferencia en diferencias",
    "section": "¿Qué son los pesos?",
    "text": "¿Qué son los pesos?\nAhora veamos la varianza que entra en este peso:\n\\[\\hat{V}_{kU}^D=n_{kU}(1-n_{kU})\\bar{D}_k(1-\\bar{D}_k)\\] Una primer cosa que entra en juego es \\(n_{kU}=\\frac{n_k}{n_k+n_U}\\), el peso relativo del grupo tratado temprano en la submuestra\nRecordemos que \\(\\bar{D}_k\\) indica la fracción del tiempo del panel que \\(k\\) permanece tratado\nDado que \\(D_{it}\\) es binaria, \\(\\bar{D}_k(1-\\bar{D}_k)\\) es la varianza de \\(D_{it}\\)\n¿Qué es lo más grande que puede ser \\(\\bar{D}_k(1-\\bar{D}_k)\\)?\nClaramente esto es a lo más 0.5, es decir, la contribución se maximiza cuando el tratamiento ocurre lo más cercano a la mitad del panel"
  },
  {
    "objectID": "diapositivas/did.html#estimador-de-callaway-y-santanna-1",
    "href": "diapositivas/did.html#estimador-de-callaway-y-santanna-1",
    "title": "Diferencia en diferencias",
    "section": "Estimador de Callaway y Sant’Anna",
    "text": "Estimador de Callaway y Sant’Anna"
  },
  {
    "objectID": "diapositivas/did.html#estimador-de-callaway-santanna-1",
    "href": "diapositivas/did.html#estimador-de-callaway-santanna-1",
    "title": "Diferencia en diferencias",
    "section": "Estimador de Callaway & Sant’Anna",
    "text": "Estimador de Callaway & Sant’Anna\nEl estimador de Callaway & Sant’Anna (2021) es una forma muy sencilla de explotar la información del desfase del tratamiento\nAdemás permite una presentación muy intuitiva de los efectos de tratamiento\nEsencialmente consiste en definir una serie de cohortes de unidades y estimar los impactos para cada cohorte\nLuego podemos agregar los impactos por cohorte o presentar la dinámica de los impactos de forma gráfica"
  },
  {
    "objectID": "diapositivas/did.html#definiciones",
    "href": "diapositivas/did.html#definiciones",
    "title": "Diferencia en diferencias",
    "section": "Definiciones",
    "text": "Definiciones\n\n\\(G_i=\\min\\{t:D_{it}=1\\}\\) es el primer periodo en que \\(i\\) es tratado\n\\(G_i=\\infty\\) indoca que \\(i\\) nunca es tratado\n\\(t=1,\\ldots,T\\) son los periodos\n\\(D_{it}=1\\;\\forall\\;t\\geq G_i\\) indica tratamiento absorbente\n\nDefinamos el efecto del tratamiento al periodo \\(t\\) para el cohorte que empezó a ser tratado en \\(g\\):\n\\[ATT(g,t)=E(y_{it}(g)-y_{it}(\\infty)|G_i=g)\\] Por ejemplo, \\(ATT(2014,2016)\\) es el efecto del tratamiento en 2016 para aquellos tratados empezando en 2014"
  },
  {
    "objectID": "diapositivas/did.html#supuestos",
    "href": "diapositivas/did.html#supuestos",
    "title": "Diferencia en diferencias",
    "section": "Supuestos",
    "text": "Supuestos\nTendencias paralelas en el contexto escalonado\n\\[E(y_{it}(\\infty)-y_{it'}(\\infty)|G_i=g)=E(y_{it}(\\infty)-y_{it'}(\\infty)|G_i=g')\\quad\\forall\\;t\\neq t',\\; g\\neq q'\\]\nEste supuesto indica que en el estado contrafactual de nunca haber sido tratados, dos grupos tratados en dos momentos diferentes \\(g\\) y \\(g'\\) habrían tenido una trayectoria igual entre los periodos \\(t\\) y \\(t'\\)\nTendencias paralelas en el contexto escalonado (a)\nModifica el supuesto anterior pero \\(\\forall \\;t,t'\\geq g_{min}-1\\) donde \\(g_{min}=\\min G\\) es el primer periodo en donde alguna unidad es tratada (Callaway y Sant’Anna solo usan este supuesto más débil)"
  },
  {
    "objectID": "diapositivas/did.html#supuestos-1",
    "href": "diapositivas/did.html#supuestos-1",
    "title": "Diferencia en diferencias",
    "section": "Supuestos",
    "text": "Supuestos\nNo anticipación en el contexto escalonado\n\\[y_{it}(g)=y_{it}(\\infty)\\quad \\forall\\;i \\;\\text{y}\\;\\forall\\;t&lt;g\\]"
  },
  {
    "objectID": "diapositivas/did.html#estimador-de-callaway-santanna-2",
    "href": "diapositivas/did.html#estimador-de-callaway-santanna-2",
    "title": "Diferencia en diferencias",
    "section": "Estimador de Callaway & Sant’Anna",
    "text": "Estimador de Callaway & Sant’Anna\nEl estimador de Callaway & Sant’Anna (2021) se define como:\n\\[ATT(g,t)=E(y_{it}-y_{i,g-1}|G_i=g)-E(y_{it}-y_{i,g-1}|G_i\\in\\mathcal{G}_{comp})\\] Queremos comparar el valor de la variable de impacto entre el periodo \\(g-1\\) y el \\(t\\) para el grupo que fue tratado en \\(g\\) con algún grupo de comparación denominado \\(\\mathcal{G}_{comp}\\)\nSustituyendo por el análogo muestral:\n\\[\\hat{ATT}(g,t)=\\frac{1}{N_g}\\sum_{i:\\;G_i=g}(y_{it}-y_{i,g-1})-\\frac{1}{N_{\\mathcal{G}_{comp}}}\\sum_{i\\;G_i\\in \\mathcal{G}_{comp}}(y_{it}-y_{i,g-1})\\]\n¿Qué es \\(\\mathcal{G}_{comp}\\)?\n\n\\(\\mathcal{G}_{comp}=\\{\\infty \\}\\): aquellas unidades nunca tratadas\n\\(\\mathcal{G}_{comp}=\\{g':g'&gt;t \\}\\): aquellas unidades aún no tratadas al periodo \\(t\\)"
  },
  {
    "objectID": "diapositivas/did.html#reportar-resultados",
    "href": "diapositivas/did.html#reportar-resultados",
    "title": "Diferencia en diferencias",
    "section": "Reportar resultados",
    "text": "Reportar resultados\nSi tenemos pocos periodos y cohortes puede ser práctico reportar todos los \\(\\hat{ATT}(g,t)\\)\nTambién podemos construir medidas agregadas:\n\\[\\theta = \\sum_{g\\in\\mathcal{G}}\\sum_{t=2}^{\\mathcal{T}}w(g,t)ATT(g,t)\\]"
  },
  {
    "objectID": "tareas/tarea-2.knit.html",
    "href": "tareas/tarea-2.knit.html",
    "title": "Tarea 2",
    "section": "",
    "text": "Fecha de entrega: miércoles 2 de octubre a las 20:00\nLa tarea deberá entregarse en Teams. Deberá incluir dos documentos:\nUn primer documento de respuestas donde se incluyan las respuestas a las preguntas teóricas y conceptuales. Este documento debe estar en formato pdf y debe ser generado usando un software de procesamiento de textos científicos, por ejemplo, usando los leguajes LaTeX o Markdown. En este documento también se deben incluir las respuestas a preguntas sobre conclusiones que se desprenden de las secciones prácticas. Por ejemplo, si una pregunta pide obtener la media de la variable x en cierta base de datos, entonces el documento de respuestas debe incluir la pregunta y respuesta correspondiente: “la media de la variable x es 32.6”. En este documento también deberán incluirse las tablas y gráficas que se soliciten.\nUn segundo archivo deberá contener el código replicable usado para generar los resultados de la sección práctica. El código debe también crear las tablas y gráficas solicitadas. Los archivos de código se verificarán para comprobar su replicabilidad.\n\n\ncrepon_morocco_balance.csv\ncrepon_morocco_analysis.csv\nSTAR_public_use.csv\n\n\n\nEn esta pregunta usaremos un ejemplo de el estudio con asignación experimental de Banerjee et al. (2015)1 para fijar algunas ideas referentes al análisis de una intervención de este tipo. A diferencia de otros ejemplos vistos en clase, este es un experimento a gran escala. Por favor, utilice la versión publicada, así como el material suplementario.\n\n[5 puntos] Describa brevemente en qué consiste la intervención que se discute en el artículo.\n[5 puntos] Describa brevemente en qué consiste el diseño experimental, es decir, ¿cómo se construye la variación que permite identificar el efecto del tratamiento? ¿Cómo se construyen los grupos de tratamiento y control?\n[5 puntos] En la página 1260799-7 se presenta una subsección denominada Atrition. Describa brevemente el propósito de este análisis y qué se concluye al respecto.\n[5 puntos] En la página 1260799-7, la subsección Compliance with treatment assignment concluye que los efectos estimados en el artículo se refieren a un efecto de intención a tratar o intent-to-treat o ITT. ¿Por qué?\n[5 puntos] En la página 1260799-8 se discuten dos métodos para tomar en cuenta la prueba de hipótesis múltiples. Describa brevemente por qué puede ser problemático probar múltiples hipótesis y cuáles son las dos formas en que los autores enfrentan este problema.\n[5 puntos] En la página 1260799-12 se discute la posible presencia de efectos de derramamiento o Spillovers. Describa brevemente en qué consisten dichos efectos de derramamiento y cómo los autores muestran la presencia o ausencia de dichos efectos usando regresiones.\n\n\n\n\nEn Crepon et al. (2015)2 se estudia una intervención en Marruecos en la que se analiza el efecto de la adopción de microfinanzas, a través de un experimento de campo. En 81 de 162 localidades estudiadas se introdujo aleatoriamente una empresa de microfinanzas. Para seleccionar las localidades de tratamiento, primero se emparejaron localidades de acuerdo a características observables y, para cada pareja se asignó a tratamiento y otra a control. La variable que identifica a las parejas es paire. La base de datos crepon_morocco_balance.csv contiene los datos de este estudio usados para mostrar la integridad del diseño. La variable treatment es la variable de asignación aleatoria, mientras que la variable client es la variable de adopción\n\n[3 puntos] Primero recordaremos cómo mostrar que el tratamiento efectivamente fue asignado de manera aleatoria. El siguiente código lee los datos que debemos usar y se queda con las observaciones de la línea base. Con estos datos, mostraremos que la variable members_resid_bl, que indica el número de personas que viven en cada hogar está balanceado entre los grupos asignados a tratamiento y control. Noten que la media del número de personas que viven en el hogar en el grupo de control es 5.14 (d.e. 2.70) y que hay 2,266 hogares en dicho grupo de control. Esto es exactamente lo que se reporta en la fila correspondiente a Number members en la tabla 1 del artículo.\n\ndata.morocco&lt;-read_csv(\"../files/crepon_morocco_balance.csv\",\n                       locale = locale(encoding = \"latin1\")) %&gt;% \n  clean_names() %&gt;% \n  filter(merge_indicator!=1)\n\ndata.morocco %&gt;% \n  group_by(treatment) %&gt;%\n  summarize(mean=mean(members_resid_bl, na.rm=T),\n            std=sd(members_resid_bl, na.rm=T),\n            n=n()) %&gt;% \n  ungroup()\n\n# A tibble: 2 × 4\n  treatment  mean   std     n\n      &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt;\n1         0  5.14  2.69  2266\n2         1  5.19  2.76  2199\n\n\nObtenga ahora el valor de la diferencia entre el grupo de tratamiento y el de control, así como su valor \\(p\\) (últimas dos columnas). Para ello, estime una regresión en la que la variable dependiente sea número de personas que vive en el hogar members_resid_bl, en función de la variable de asignación treatment y variables dummy de pareja de localidad (la variable paire indica cuáles son las parejas). La regresión permite recuperar la diferencia de 0.04 personas que se reporta en la fila correspondiente en la tabla 1. Para recuperar el valor \\(p\\), estime errores agrupados usando la variable demi_paire, que es la clave de las distintas localidades, como variable de agrupación. Una forma de realizar esto es con la función coef_test del paquete clubSandwich.3\n[2 puntos] Ahora mostremos que efectivamente este es un ejemplo de una intervención con cumplimiento imperfecto. Genere un cuadro que indique: 1) cuántas personas que fueron asignadas a recibir el tratamiento efectivamente fueron clientes; 2) cuántas personas que fueron asignadas a recibir el tratamiento no se convirtieron en clientes; 3) cuántas personas que no fueron asignadas a recibir el tratamiento sí se convirtieron en clientes; y 4) cuántas personas que no fueron asignadas a recibir el tratamiento tampoco se convirtieron en clientes.\n[5 puntos] Ahora mostraremos que la adopción, es decir, convertirse en cliente, no es independiente de las características de los hogares. Considere las variables members_resid_bl y act_number_bl, que indican el número de miembros del hogar y el número de actividades económicas del hogar. Para cada una de estas dos variables, utilice la misma especificación que en la parte a., pero ahora usando la variable cliente como regresor. ¿Qué concluye?\n[5 puntos] Con estos elementos estamos convencidos de que es necesario emplear lo que sabemos sobre cumplimiento imperfecto. Usaremos ahora los datos en crepon_morocco_analysis.csv, que contiene los datos empleados para evaluar el impacto de la adopción. Estos datos están listos para analizarse. Estime la forma reducida del efecto de ser asignado al tratamiento sobre gasto total, expense_total. Comente los resultados, en particular, comente sobre la magnitud y la significancia estadística de la variable treatment. Aquí y en adelante, incluya los siguientes controles en la regresión: members_resid_bl, nadults_resid_bl, head_age_bl, act_livestock_bl, act_business_bl, borrowed_total_bl, members_resid_d_bl, nadults_resid_d_bl, head_age_d_bl, act_livestock_d_bl, act_business_d_bl, borrowed_total_d_bl, ccm_resp_activ, other_resp_activ, ccm_resp_activ_d y other_resp_activ_d. Además, incluya efectos fijos por pareja introduciendo la variable paire como factor. Use los mismos errores estándar que en la parte a. Con esto deberá poder recuperar el coeficiente y el error estándar de la columna (3) de la tabla 3.\n[5 puntos] Estime ahora la primera etapa, es decir, estime por MCO el efecto causal de la asignación sobre la adopción. Comente sobre la magnitud, la significancia estadística y la interpretación de la variable treatment en términos del comportamiento de los cumplidores. Debería poder replicar el coeficiente y el error estándar de la columna 1 en la tabla 2 del artículo.\n[5 puntos] Considere la columna 3 del panel A en la Tabla 9 del artículo. Aquí se reporta la estimación por MCO de la relación entre client y gasto total, con los mismos controles y tipo de errores que antes. Replique este resultado. ¿Se puede interpretar de forma causal el coeficiente sobre client?\n[5 puntos] ¿Cuáles son los dos supuestos econométricos que permiten la estimación del Local Average Treatment Effect (LATE) en el contexto de este problema? Comente sobre la evidencia que respalda el supuesto de que los instrumentos no son débiles en este problema.\n[5 puntos] Estime el efecto del cumplimiento sobre el gasto total, usando la asignación aleatoria como instrumento del cumplimiento. Es decir, estime el LATE. Use los mismos controles y tipo de errores que en c. Este resultado se reporta en la columna 3 del panel B en la Tabla 9. ¿Cuál es la interpretación del coeficiente de la variable client? En R, la función ivreg del paquete AER le permite hacer la estimación de MC2E.\n\n\n\n\nSea una variable de resultados \\(y_i\\), una variable de asignación aleatoria \\(Z_i\\) y una variable de adopción \\(D_i\\). El estimador de Wald se define como:\n\\[\\hat{\\beta}_{Wald}=\\frac{\\bar{Y}_{Z_i=1}-\\bar{Y}_{Z_i=0}}{\\bar{D}_{Z_i=1}-\\bar{D}_{Z_i=0}}\\]\nEn esta pregunta mostraremos cómo el estimador de Wald es equivalente al estimador de VI cuando no hay controles. Use nuevamente los datos en crepon_morocco_analysis.csv.\n\n[5 puntos] Obtenga el estimador de Wald como el cociente de la diferencia en gasto total promedio entre los hogares asignados a tratamiento y control dividido por la diferencia en la probabilidad de adopción entre los hogares asignados a tratamiento y control. Recuerde que la variable del gasto total es expense_total.\n[5 puntos] Ahora estime por MC2E el efecto de la adopción sobre el gasto total, usando la variable de asignación como instrumento para la adopción. ¿Qué ventaja observa con respecto al estimador de Wald?\n\n\n\n\nConsidere nuevamente la base STAR_public_use.csv usada en la Tarea 1 del artículo Angrist, Lang y Oreopoulos (2009)4. En esta pregunta nos concentraremos en los efectos de la intervención en el año 2, mostrados en la columna (4) de la Tabla 6, sobre dos variables, el promedio de calificaciones gpa_year2 y los créditos completados credits_earned2.\nEl propósito de esta pregunta es mostrar la función de los \\(z\\)-scores en el análisis de efectos de tratamiento. De nuevo, puede quedarse solo con las observaciones que tienen noshow igual a 0. Antes de comenzar su análisis, sustituya por NA los valores en credits_earned2 para aquellas observaciones que tienen \\(NA\\) en la variable prob_year1.\n\n[5 puntos] Para tener un punto de comparación, estime la ecuación del efecto de tratamiento para gpa_year2 usando la misma especificación que en la pregunta 5 de la Tarea 1. Use también errores robustos. Deberá poder replicar los coeficientes y errores estándar del panel A, columna (4). ¿Cómo se interpretan el coeficiente sobre la variable ssp?\n[5 puntos] Genere un \\(z\\)-score para la variable gpa_year2 al que llame gpa_year2_sd. Para ello, calcule la media y desviación estándar de gpa_year2 para el grupo de control y luego genere gpa_year2_sd restándole a gpa_year2 la media obtenida y dividiendo esta diferencia por la desviación estándar obtenida. Compruebe que si calcula la media y la desviación estándar de gpa_year2_sd, en el grupo de control estas deberían ser 0 y 1, respectivamente.\n[5 puntos] Realice la misma estimación que en la parte a., pero ahora use como variable dependiente gpa_year2_sd. ¿Cómo se interpreta el coeficiente sobre ssp? ¿Qué es diferente y qué es igual entre los resultados obtenidos en esta parte y los obtenidos en la parte a.?\n[5 puntos] Ahora realizaremos un índice de mejora en educación, al agregar los resultados de estos dos indicadores en una sola variable, como se describe en Banerjee et al. (2015)5. Para ello, primero genere credits_earned2_sd, que será la versión estandarizada de credits_earned2, siguiendo el mismo procedimiento que en la parte b. En seguida, genere una nueva variable llamada indice_escolar, que será el promedio de credits_earned2_sd y gpa_year2_sd. Luego, calcule la media y la desviación estándar de indice_escolar en el grupo de control. Finalmente, genere una nueva variable indice_escolar_sd restándole a indice_escolar la media antes calculada y dividiendo esta diferencia por la desviación estándar antes calculada. Muestre que la variable indice_escolar_sd tiene media 0 y desviación estándar 1 en el grupo de control.\n[5 puntos] Estime ahora el efecto de tratamiento sobre indice_escolar_sd, siguiendo la misma especificación econométrica que en la parte a. y usando errores robustos. ¿Qué concluye?"
  },
  {
    "objectID": "tareas/tarea-2.knit.html#datos",
    "href": "tareas/tarea-2.knit.html#datos",
    "title": "Tarea 2",
    "section": "",
    "text": "crepon_morocco_balance.csv\ncrepon_morocco_analysis.csv\nSTAR_public_use.csv"
  },
  {
    "objectID": "tareas/tarea-2.knit.html#pregunta-1",
    "href": "tareas/tarea-2.knit.html#pregunta-1",
    "title": "Tarea 2",
    "section": "",
    "text": "En esta pregunta usaremos un ejemplo de el estudio con asignación experimental de Banerjee et al. (2015)1 para fijar algunas ideas referentes al análisis de una intervención de este tipo. A diferencia de otros ejemplos vistos en clase, este es un experimento a gran escala. Por favor, utilice la versión publicada, así como el material suplementario.\n\n[5 puntos] Describa brevemente en qué consiste la intervención que se discute en el artículo.\n[5 puntos] Describa brevemente en qué consiste el diseño experimental, es decir, ¿cómo se construye la variación que permite identificar el efecto del tratamiento? ¿Cómo se construyen los grupos de tratamiento y control?\n[5 puntos] En la página 1260799-7 se presenta una subsección denominada Atrition. Describa brevemente el propósito de este análisis y qué se concluye al respecto.\n[5 puntos] En la página 1260799-7, la subsección Compliance with treatment assignment concluye que los efectos estimados en el artículo se refieren a un efecto de intención a tratar o intent-to-treat o ITT. ¿Por qué?\n[5 puntos] En la página 1260799-8 se discuten dos métodos para tomar en cuenta la prueba de hipótesis múltiples. Describa brevemente por qué puede ser problemático probar múltiples hipótesis y cuáles son las dos formas en que los autores enfrentan este problema.\n[5 puntos] En la página 1260799-12 se discute la posible presencia de efectos de derramamiento o Spillovers. Describa brevemente en qué consisten dichos efectos de derramamiento y cómo los autores muestran la presencia o ausencia de dichos efectos usando regresiones."
  },
  {
    "objectID": "tareas/tarea-2.knit.html#pregunta-2",
    "href": "tareas/tarea-2.knit.html#pregunta-2",
    "title": "Tarea 2",
    "section": "",
    "text": "En Crepon et al. (2015)2 se estudia una intervención en Marruecos en la que se analiza el efecto de la adopción de microfinanzas, a través de un experimento de campo. En 81 de 162 localidades estudiadas se introdujo aleatoriamente una empresa de microfinanzas. Para seleccionar las localidades de tratamiento, primero se emparejaron localidades de acuerdo a características observables y, para cada pareja se asignó a tratamiento y otra a control. La variable que identifica a las parejas es paire. La base de datos crepon_morocco_balance.csv contiene los datos de este estudio usados para mostrar la integridad del diseño. La variable treatment es la variable de asignación aleatoria, mientras que la variable client es la variable de adopción\n\n[3 puntos] Primero recordaremos cómo mostrar que el tratamiento efectivamente fue asignado de manera aleatoria. El siguiente código lee los datos que debemos usar y se queda con las observaciones de la línea base. Con estos datos, mostraremos que la variable members_resid_bl, que indica el número de personas que viven en cada hogar está balanceado entre los grupos asignados a tratamiento y control. Noten que la media del número de personas que viven en el hogar en el grupo de control es 5.14 (d.e. 2.70) y que hay 2,266 hogares en dicho grupo de control. Esto es exactamente lo que se reporta en la fila correspondiente a Number members en la tabla 1 del artículo.\n\ndata.morocco&lt;-read_csv(\"../files/crepon_morocco_balance.csv\",\n                       locale = locale(encoding = \"latin1\")) %&gt;% \n  clean_names() %&gt;% \n  filter(merge_indicator!=1)\n\ndata.morocco %&gt;% \n  group_by(treatment) %&gt;%\n  summarize(mean=mean(members_resid_bl, na.rm=T),\n            std=sd(members_resid_bl, na.rm=T),\n            n=n()) %&gt;% \n  ungroup()\n\n# A tibble: 2 × 4\n  treatment  mean   std     n\n      &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt;\n1         0  5.14  2.69  2266\n2         1  5.19  2.76  2199\n\n\nObtenga ahora el valor de la diferencia entre el grupo de tratamiento y el de control, así como su valor \\(p\\) (últimas dos columnas). Para ello, estime una regresión en la que la variable dependiente sea número de personas que vive en el hogar members_resid_bl, en función de la variable de asignación treatment y variables dummy de pareja de localidad (la variable paire indica cuáles son las parejas). La regresión permite recuperar la diferencia de 0.04 personas que se reporta en la fila correspondiente en la tabla 1. Para recuperar el valor \\(p\\), estime errores agrupados usando la variable demi_paire, que es la clave de las distintas localidades, como variable de agrupación. Una forma de realizar esto es con la función coef_test del paquete clubSandwich.3\n[2 puntos] Ahora mostremos que efectivamente este es un ejemplo de una intervención con cumplimiento imperfecto. Genere un cuadro que indique: 1) cuántas personas que fueron asignadas a recibir el tratamiento efectivamente fueron clientes; 2) cuántas personas que fueron asignadas a recibir el tratamiento no se convirtieron en clientes; 3) cuántas personas que no fueron asignadas a recibir el tratamiento sí se convirtieron en clientes; y 4) cuántas personas que no fueron asignadas a recibir el tratamiento tampoco se convirtieron en clientes.\n[5 puntos] Ahora mostraremos que la adopción, es decir, convertirse en cliente, no es independiente de las características de los hogares. Considere las variables members_resid_bl y act_number_bl, que indican el número de miembros del hogar y el número de actividades económicas del hogar. Para cada una de estas dos variables, utilice la misma especificación que en la parte a., pero ahora usando la variable cliente como regresor. ¿Qué concluye?\n[5 puntos] Con estos elementos estamos convencidos de que es necesario emplear lo que sabemos sobre cumplimiento imperfecto. Usaremos ahora los datos en crepon_morocco_analysis.csv, que contiene los datos empleados para evaluar el impacto de la adopción. Estos datos están listos para analizarse. Estime la forma reducida del efecto de ser asignado al tratamiento sobre gasto total, expense_total. Comente los resultados, en particular, comente sobre la magnitud y la significancia estadística de la variable treatment. Aquí y en adelante, incluya los siguientes controles en la regresión: members_resid_bl, nadults_resid_bl, head_age_bl, act_livestock_bl, act_business_bl, borrowed_total_bl, members_resid_d_bl, nadults_resid_d_bl, head_age_d_bl, act_livestock_d_bl, act_business_d_bl, borrowed_total_d_bl, ccm_resp_activ, other_resp_activ, ccm_resp_activ_d y other_resp_activ_d. Además, incluya efectos fijos por pareja introduciendo la variable paire como factor. Use los mismos errores estándar que en la parte a. Con esto deberá poder recuperar el coeficiente y el error estándar de la columna (3) de la tabla 3.\n[5 puntos] Estime ahora la primera etapa, es decir, estime por MCO el efecto causal de la asignación sobre la adopción. Comente sobre la magnitud, la significancia estadística y la interpretación de la variable treatment en términos del comportamiento de los cumplidores. Debería poder replicar el coeficiente y el error estándar de la columna 1 en la tabla 2 del artículo.\n[5 puntos] Considere la columna 3 del panel A en la Tabla 9 del artículo. Aquí se reporta la estimación por MCO de la relación entre client y gasto total, con los mismos controles y tipo de errores que antes. Replique este resultado. ¿Se puede interpretar de forma causal el coeficiente sobre client?\n[5 puntos] ¿Cuáles son los dos supuestos econométricos que permiten la estimación del Local Average Treatment Effect (LATE) en el contexto de este problema? Comente sobre la evidencia que respalda el supuesto de que los instrumentos no son débiles en este problema.\n[5 puntos] Estime el efecto del cumplimiento sobre el gasto total, usando la asignación aleatoria como instrumento del cumplimiento. Es decir, estime el LATE. Use los mismos controles y tipo de errores que en c. Este resultado se reporta en la columna 3 del panel B en la Tabla 9. ¿Cuál es la interpretación del coeficiente de la variable client? En R, la función ivreg del paquete AER le permite hacer la estimación de MC2E."
  },
  {
    "objectID": "tareas/tarea-2.knit.html#pregunta-3",
    "href": "tareas/tarea-2.knit.html#pregunta-3",
    "title": "Tarea 2",
    "section": "",
    "text": "Sea una variable de resultados \\(y_i\\), una variable de asignación aleatoria \\(Z_i\\) y una variable de adopción \\(D_i\\). El estimador de Wald se define como:\n\\[\\hat{\\beta}_{Wald}=\\frac{\\bar{Y}_{Z_i=1}-\\bar{Y}_{Z_i=0}}{\\bar{D}_{Z_i=1}-\\bar{D}_{Z_i=0}}\\]\nEn esta pregunta mostraremos cómo el estimador de Wald es equivalente al estimador de VI cuando no hay controles. Use nuevamente los datos en crepon_morocco_analysis.csv.\n\n[5 puntos] Obtenga el estimador de Wald como el cociente de la diferencia en gasto total promedio entre los hogares asignados a tratamiento y control dividido por la diferencia en la probabilidad de adopción entre los hogares asignados a tratamiento y control. Recuerde que la variable del gasto total es expense_total.\n[5 puntos] Ahora estime por MC2E el efecto de la adopción sobre el gasto total, usando la variable de asignación como instrumento para la adopción. ¿Qué ventaja observa con respecto al estimador de Wald?"
  },
  {
    "objectID": "tareas/tarea-2.knit.html#pregunta-4",
    "href": "tareas/tarea-2.knit.html#pregunta-4",
    "title": "Tarea 2",
    "section": "",
    "text": "Considere nuevamente la base STAR_public_use.csv usada en la Tarea 1 del artículo Angrist, Lang y Oreopoulos (2009)4. En esta pregunta nos concentraremos en los efectos de la intervención en el año 2, mostrados en la columna (4) de la Tabla 6, sobre dos variables, el promedio de calificaciones gpa_year2 y los créditos completados credits_earned2.\nEl propósito de esta pregunta es mostrar la función de los \\(z\\)-scores en el análisis de efectos de tratamiento. De nuevo, puede quedarse solo con las observaciones que tienen noshow igual a 0. Antes de comenzar su análisis, sustituya por NA los valores en credits_earned2 para aquellas observaciones que tienen \\(NA\\) en la variable prob_year1.\n\n[5 puntos] Para tener un punto de comparación, estime la ecuación del efecto de tratamiento para gpa_year2 usando la misma especificación que en la pregunta 5 de la Tarea 1. Use también errores robustos. Deberá poder replicar los coeficientes y errores estándar del panel A, columna (4). ¿Cómo se interpretan el coeficiente sobre la variable ssp?\n[5 puntos] Genere un \\(z\\)-score para la variable gpa_year2 al que llame gpa_year2_sd. Para ello, calcule la media y desviación estándar de gpa_year2 para el grupo de control y luego genere gpa_year2_sd restándole a gpa_year2 la media obtenida y dividiendo esta diferencia por la desviación estándar obtenida. Compruebe que si calcula la media y la desviación estándar de gpa_year2_sd, en el grupo de control estas deberían ser 0 y 1, respectivamente.\n[5 puntos] Realice la misma estimación que en la parte a., pero ahora use como variable dependiente gpa_year2_sd. ¿Cómo se interpreta el coeficiente sobre ssp? ¿Qué es diferente y qué es igual entre los resultados obtenidos en esta parte y los obtenidos en la parte a.?\n[5 puntos] Ahora realizaremos un índice de mejora en educación, al agregar los resultados de estos dos indicadores en una sola variable, como se describe en Banerjee et al. (2015)5. Para ello, primero genere credits_earned2_sd, que será la versión estandarizada de credits_earned2, siguiendo el mismo procedimiento que en la parte b. En seguida, genere una nueva variable llamada indice_escolar, que será el promedio de credits_earned2_sd y gpa_year2_sd. Luego, calcule la media y la desviación estándar de indice_escolar en el grupo de control. Finalmente, genere una nueva variable indice_escolar_sd restándole a indice_escolar la media antes calculada y dividiendo esta diferencia por la desviación estándar antes calculada. Muestre que la variable indice_escolar_sd tiene media 0 y desviación estándar 1 en el grupo de control.\n[5 puntos] Estime ahora el efecto de tratamiento sobre indice_escolar_sd, siguiendo la misma especificación econométrica que en la parte a. y usando errores robustos. ¿Qué concluye?"
  },
  {
    "objectID": "tareas/tarea-2.knit.html#footnotes",
    "href": "tareas/tarea-2.knit.html#footnotes",
    "title": "Tarea 2",
    "section": "Notas",
    "text": "Notas\n\n\nBanerjee, A. et al. (2015). A multifaceted program causes lasting progress for the very poor: Evidence from six countries. Science, 348(6236).↩︎\nPor ejemplo, suponga que estima un modelo al que llame modelo1. Entonces, si ejecuta\n\ncoef_test(modelo1,\n          vcov=\"CR1S\",\n          cluster=mis_datos$demi_paire)[1:2,]\n\nobtendrá los coeficientes con los errores agrupados requeridos. La opción CR1S toma en cuenta el número de grupos o clusters para realizar inferencia. Puede leer más al respecto en la ayuda al ejecutar ?vcovCR. Este es el tipo de ajuste de muestras finitas que usan los autores. Esta corrección consiste en multiplicar la matriz de sándwich agrupada CR0 por \\(\\frac{G(N-1)}{(G-1)(N-p)}\\), donde \\(G\\) es el número de grupos, \\(N\\) es el número total de observaciones y \\(p\\) es el número de regresores.↩︎\nCrépon, B., Devoto, F., Duflo, E., & Parienté, W. (2015). Estimating the impact of microcredit on those who take it up: Evidence from a randomized experiment in Morocco. American Economic Journal: Applied Economics, 7(1), 123-50.↩︎\nAngrist, J., Lang, D., y Oreopoulos, P. (2009). Incentives and services for college achievement: Evidence from a randomized trial. American Economic Journal: Applied Economics, 1(1), 136-63.↩︎\nBanerjee, A. et al. (2015). A multifaceted program causes lasting progress for the very poor: Evidence from six countries. Science, 348(6236).↩︎"
  },
  {
    "objectID": "diapositivas/did.knit.html",
    "href": "diapositivas/did.knit.html",
    "title": "Diferencia en diferencias",
    "section": "",
    "text": "La estrategia de diferencia en diferencias especifica las condiciones bajo las cuales es posible identificar el efecto del tratamiento al comparar unidades tratadas y no tratadas, cuando se dispone de información antes y después de la intervención\nEsta estrategia es ampliamente utilizada para analizar el efecto de leyes y políticas que afectan a un grupo de individuos al mismo tiempo\nAdemás, constituye el fundamento para otro de los métodos en donde la investigación actual es muy activa, el control sintético\n\n\n\n\n\n\nAngrist & Pischke (2014) describen lo sucedido con el sector bancario en Mississippi durante la Gran Depresión\nEn EUA, la FED tiene 12 bancos regionales y cada uno tiene autonomía para tomar ciertas decisiones de política monetaria\nEn particular, Mississippi tiene una parte del estado bajo el mando del distrito 6 (Atlanta) y la otra mitad en el distrito 8 (San Luis)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nComo respuesta a las corridas bancarias que caracterizaron la crisis de 1929, los bancos comerciales en Mississippi se vieron expuestos a dos políticas distintas\n\n\\[\nT=\n\\begin{cases}\n1\\quad\\quad \\text{proveer liquidez adicional (distrito 6)} \\\\\n0\\quad\\quad \\text{dar igual o menos liquidez (distrito 8)} \\\\\n\\end{cases}\n\\]\n\nSi estamos interesados en la cantidad de bancos que sobrevivieron y decir algo sobre qué política es más efectiva, ¿qué podemos hacer?\nUna primera respuesta sería contar la diferencia después de la crisis:\n\n\n\n\nDistrito 8\nDistrito 6\nDiferencia\n\n\n\n\n\\(T=0\\)\n\\(T=1\\)\n\n\n\n132 bancos\n121 bancos\n11 bancos\n\n\n\n\nPareciera que la política de proveer liquidez, easy money, causó que quebraran más bancos\nSin embargo, esta comparación claramente ignora las condiciones iniciales\n\n\n\n\n\nGráficamente observamos\n\n\nbanks&lt;-read_csv(\"banks_mm.csv\",\n                       locale = locale(encoding = \"latin1\"))\nbanks &lt;- banks %&gt;%\n  filter(month(date) == 7L,\n         mday(date) == 1L) %&gt;%\n  mutate(year = year(date)) %&gt;%\n  select(year,\n         matches(\"bi[ob][68]\")) %&gt;% \n  select(year,bib6,bib8) %&gt;% \n  gather(distrito,banks,bib6:bib8) %&gt;% \n  mutate(treatment=ifelse(distrito==\"bib6\",1,0)) %&gt;% \n  mutate(post=ifelse(year&gt;=1931,1,0))\n\nbanks %&gt;% \n  mutate(banks=ifelse(year==1930 | year==1931,banks,NA)) %&gt;% \n  filter(year &lt;= 1932) %&gt;% \n  ggplot(aes(x=year, y=banks, color=distrito)) +\n  geom_line(size=2) +\n  scale_y_continuous(limits=c(100,180))\n\n\n\n\n\n\n\n\n\n\n\n\nDel distrito 8 (no tratado) podemos obtener la pendiente:\n\n\\[m_{NT}=\\frac{Y_{8,post}-Y_{8,pre}}{X_{8,post}-X_{8,pre}}=\\frac{132-165}{1931-1930}=-33\\]\n\nY entonces, podemos encontrar cuál hubiera sido el número de bancos en el distrio 6 (tratado) si hubiera seguido la pendiente del distrito 8:\n\n\\[m_T=\\frac{\\tilde{Y}_{6,post}-Y_{6,pre}}{X_{6,post}-X_{6,pre}}=\\frac{\\tilde{Y}_{6,post}-135}{1931-1930}=-33\\] - Por tanto, \\(\\tilde{Y}_{6,post}=102\\) es el número de bancos que el distrito 6 hubiera tenido si hubiera seguido una tendencia paralela a la del distrito 8\n\n\n\n\nPodemos contruir el contrafactual para el distrito 6 observando la pendiente del distrito 8\n\n\nbanks_contrafactual &lt;- banks %&gt;%\n    mutate(banks=ifelse(year==1930 | year==1931,banks,NA)) %&gt;% \n  filter(year &lt;= 1932) %&gt;% \n  mutate(tipo=\"observado\")\n  \nd6_contrafactual &lt;- banks_contrafactual %&gt;% \n  filter(distrito==\"bib6\") %&gt;% \n  mutate(banks=ifelse(year==1931,102,banks),\n         tipo=\"contrafactual\")\n\nbanks_contrafactual &lt;- rbind(banks_contrafactual,d6_contrafactual)\n\ndd_grafica &lt;- banks_contrafactual %&gt;% \n  ggplot(aes(x=year, y=banks, color=distrito, linetype=tipo))+\n  geom_line(size=2) +\n  scale_linetype_manual(values=c(\"dashed\", \"solid\")) +\n  scale_y_continuous(limits=c(100,180)) \n\n\ndd_grafica\n\n\n\n\n\n\n\n\n\n\n\n\nPodemos dar así una primera definición de lo que es la diferencia en diferencias del número de bancos que sobrevivieron a la Gran Depresión en Mississippi\n\n\\[\n\\begin{aligned}\n\\delta_{DID}&=(Y_{6,post}-Y_{6,pre})-(Y_{8,post}-Y_{8,pre}) \\\\\n&=(Y_{6,1931}-Y_{6,1930})-(Y_{8,1931}-Y_{8,1930}) \\\\\n&=(121-135)-(132-165) \\\\\n&=-14+33 = 19\n\\end{aligned}\n\\]\n\nEl estimador de DID toma en cuenta las diferencias inciales\nEn este caso, el distrito 8 ya tenía más bancos abiertos que el 6 antes de la crisis\nDID construye un contrafactual para las unidades tratadas usando la pendiente de las unidades no tratadas\n\n\n\n\n\nEl supuesto fundamental es el de tendencias comunes, es decir, que en ausencia del tratamiento, el grupo de tratamiento se hubiera comportado igual al grupo de control\nSi hay varios puntos pre intervención, el supuesto de tendencias comunes puede probarse empíricamente\n\n\n\n\n\nEl método puede generalizarse a más periodos de tiempo\nAquí, una regresión nos permite identificar el efecto del tratamiento\nTenemos datos sobre el número de bancos en cada distrito en cada año (1929-1934)\n\n\\[y_{dt}=\\alpha+\\beta T_d+\\gamma POST_t + \\delta_{r,DID}(T_d\\times POST_t)+e_{dt}\\] - \\(T_d\\) es una dummy para los distritos tratados (distrito 6 en este caso)\n\nLes llamamos efectos fijos individuales y sirven para controlar diferencias entre distritos que no cambian en el tiempo\n\\(POST_t\\) es una dummy para los periodos post tratamiento (1931 en adelante)\nAl término \\(T_d\\times POST_t\\) se le conoce como el término de interacción, que es una dummy igual a 1 para los distritos tratados en los años post intervención\n\\(\\delta_{r,DID}\\) es el estimador de DID del efecto del tratamiento\n\n\n\n\n\nUsemos los datos del archivo banks_mm.csv que se utilizan en el libro\nEs una forma muy básica de datos en panel: cada fila representa un distrito en un periodo de tiempo\nPodemos identificar si cada fila pertenece a un distrito tratado o no o a un periodo posterior a al tratamiento o no\n\n\nbanks\n\n# A tibble: 12 × 5\n    year distrito banks treatment  post\n   &lt;dbl&gt; &lt;chr&gt;    &lt;dbl&gt;     &lt;dbl&gt; &lt;dbl&gt;\n 1  1929 bib6       141         1     0\n 2  1930 bib6       135         1     0\n 3  1931 bib6       121         1     1\n 4  1932 bib6       113         1     1\n 5  1933 bib6       102         1     1\n 6  1934 bib6       102         1     1\n 7  1929 bib8       169         0     0\n 8  1930 bib8       165         0     0\n 9  1931 bib8       132         0     1\n10  1932 bib8       120         0     1\n11  1933 bib8       111         0     1\n12  1934 bib8       109         0     1\n\n\n\n\n\n\nEstimemos la regresión que acabamos de motivar usando todos los periodos en el panel\n\n\ndid_bank &lt;- lm(banks ~ treatment + post+ treatment*post,\n               data=banks)\n\nsummary(did_bank)\n\n\nCall:\nlm(formula = banks ~ treatment + post + treatment * post, data = banks)\n\nResiduals:\n   Min     1Q Median     3Q    Max \n-9.000 -7.125  0.000  3.125 14.000 \n\nCoefficients:\n               Estimate Std. Error t value Pr(&gt;|t|)    \n(Intercept)     167.000      6.190  26.980 3.83e-09 ***\ntreatment       -29.000      8.754  -3.313 0.010652 *  \npost            -49.000      7.581  -6.464 0.000195 ***\ntreatment:post   20.500     10.721   1.912 0.092224 .  \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 8.754 on 8 degrees of freedom\nMultiple R-squared:  0.8906,    Adjusted R-squared:  0.8496 \nF-statistic: 21.71 on 3 and 8 DF,  p-value: 0.0003369\n\n\n\n\n\n\nNoten que si solo usamos dos años, obtenemos exactamente lo que obtendríamos haciendo las diferencias a mano\n\n\\[\\delta_{DiD}=(Y_{6,1931}-Y_{6,1930})-(Y_{8,1931}-Y_{8,1930})=19\\]\n\ndid_bank2 &lt;- lm(banks ~ treatment + post+ treatment*post,\n               data=filter(banks,year==1930 | year==1931))\n\n\nsummary(did_bank2)\n\n\nCall:\nlm(formula = banks ~ treatment + post + treatment * post, data = filter(banks, \n    year == 1930 | year == 1931))\n\nResiduals:\nALL 4 residuals are 0: no residual degrees of freedom!\n\nCoefficients:\n               Estimate Std. Error t value Pr(&gt;|t|)\n(Intercept)         165        NaN     NaN      NaN\ntreatment           -30        NaN     NaN      NaN\npost                -33        NaN     NaN      NaN\ntreatment:post       19        NaN     NaN      NaN\n\nResidual standard error: NaN on 0 degrees of freedom\nMultiple R-squared:      1, Adjusted R-squared:    NaN \nF-statistic:   NaN on 3 and 0 DF,  p-value: NA\n\n\n\n\n\n\nConsideremos cosas que podrían salir mal con respecto al supuesto de tendencias paralelas\nSupongamos que un tratamiento ocurre en el periodo marcado con la línea vertical, por ejemplo, un cambio en una legislación\nEn este ejemplo algo sucedió en Allatsea que produjo un cambio en la trayectoria de mortalidad antes del cambio en la legislación\nEl supuesto de tendencias paralelas sí se sostenía hasta antes de este cambio\nSin embargo, nuestra estrategia de DID atribuiría el efecto al cambio en la legislación cuando en realidad cuando ese cambio ocurrió ya nole pasó nada a Allatsea\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nEn este segundo ejemplo, el supuesto de tendencias paralelas pre intervención se viola\nAunque en el momento del cambio de la política, la línea de Allatsea es más inclinada, estimar esta relación por DID de nuevo atribuiría a la política diferencias que ya existían antes de la intervención\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nEn este tercer ejemplo hay tendencias que no son paralelas pre intervención\nSin embargo, después de la intervención, la trayectoria de Allatsea tiene una pendiente claramente más inclinada que antes de la intervención"
  },
  {
    "objectID": "diapositivas/did.knit.html#introducción",
    "href": "diapositivas/did.knit.html#introducción",
    "title": "Diferencia en diferencias",
    "section": "",
    "text": "Angrist & Pischke (2014) describen lo sucedido con el sector bancario en Mississippi durante la Gran Depresión\nEn EUA, la FED tiene 12 bancos regionales y cada uno tiene autonomía para tomar ciertas decisiones de política monetaria\nEn particular, Mississippi tiene una parte del estado bajo el mando del distrito 6 (Atlanta) y la otra mitad en el distrito 8 (San Luis)"
  },
  {
    "objectID": "diapositivas/did.knit.html#diferencia-en-diferencias-1",
    "href": "diapositivas/did.knit.html#diferencia-en-diferencias-1",
    "title": "Diferencia en diferencias",
    "section": "",
    "text": "Como respuesta a las corridas bancarias que caracterizaron la crisis de 1929, los bancos comerciales en Mississippi se vieron expuestos a dos políticas distintas\n\n\\[\nT=\n\\begin{cases}\n1\\quad\\quad \\text{proveer liquidez adicional (distrito 6)} \\\\\n0\\quad\\quad \\text{dar igual o menos liquidez (distrito 8)} \\\\\n\\end{cases}\n\\]\n\nSi estamos interesados en la cantidad de bancos que sobrevivieron y decir algo sobre qué política es más efectiva, ¿qué podemos hacer?\nUna primera respuesta sería contar la diferencia después de la crisis:\n\n\n\n\nDistrito 8\nDistrito 6\nDiferencia\n\n\n\n\n\\(T=0\\)\n\\(T=1\\)\n\n\n\n132 bancos\n121 bancos\n11 bancos\n\n\n\n\nPareciera que la política de proveer liquidez, easy money, causó que quebraran más bancos\nSin embargo, esta comparación claramente ignora las condiciones iniciales"
  },
  {
    "objectID": "diapositivas/did.knit.html#representación-gráfica",
    "href": "diapositivas/did.knit.html#representación-gráfica",
    "title": "Diferencia en diferencias",
    "section": "",
    "text": "Gráficamente observamos\n\n\nbanks&lt;-read_csv(\"banks_mm.csv\",\n                       locale = locale(encoding = \"latin1\"))\nbanks &lt;- banks %&gt;%\n  filter(month(date) == 7L,\n         mday(date) == 1L) %&gt;%\n  mutate(year = year(date)) %&gt;%\n  select(year,\n         matches(\"bi[ob][68]\")) %&gt;% \n  select(year,bib6,bib8) %&gt;% \n  gather(distrito,banks,bib6:bib8) %&gt;% \n  mutate(treatment=ifelse(distrito==\"bib6\",1,0)) %&gt;% \n  mutate(post=ifelse(year&gt;=1931,1,0))\n\nbanks %&gt;% \n  mutate(banks=ifelse(year==1930 | year==1931,banks,NA)) %&gt;% \n  filter(year &lt;= 1932) %&gt;% \n  ggplot(aes(x=year, y=banks, color=distrito)) +\n  geom_line(size=2) +\n  scale_y_continuous(limits=c(100,180))"
  },
  {
    "objectID": "diapositivas/did.knit.html#representación-gráfica-1",
    "href": "diapositivas/did.knit.html#representación-gráfica-1",
    "title": "Diferencia en diferencias",
    "section": "",
    "text": "Del distrito 8 (no tratado) podemos obtener la pendiente:\n\n\\[m_{NT}=\\frac{Y_{8,post}-Y_{8,pre}}{X_{8,post}-X_{8,pre}}=\\frac{132-165}{1931-1930}=-33\\]\n\nY entonces, podemos encontrar cuál hubiera sido el número de bancos en el distrio 6 (tratado) si hubiera seguido la pendiente del distrito 8:\n\n\\[m_T=\\frac{\\tilde{Y}_{6,post}-Y_{6,pre}}{X_{6,post}-X_{6,pre}}=\\frac{\\tilde{Y}_{6,post}-135}{1931-1930}=-33\\] - Por tanto, \\(\\tilde{Y}_{6,post}=102\\) es el número de bancos que el distrito 6 hubiera tenido si hubiera seguido una tendencia paralela a la del distrito 8"
  },
  {
    "objectID": "diapositivas/did.knit.html#representación-gráfica-2",
    "href": "diapositivas/did.knit.html#representación-gráfica-2",
    "title": "Diferencia en diferencias",
    "section": "",
    "text": "Podemos contruir el contrafactual para el distrito 6 observando la pendiente del distrito 8\n\n\nbanks_contrafactual &lt;- banks %&gt;%\n    mutate(banks=ifelse(year==1930 | year==1931,banks,NA)) %&gt;% \n  filter(year &lt;= 1932) %&gt;% \n  mutate(tipo=\"observado\")\n  \nd6_contrafactual &lt;- banks_contrafactual %&gt;% \n  filter(distrito==\"bib6\") %&gt;% \n  mutate(banks=ifelse(year==1931,102,banks),\n         tipo=\"contrafactual\")\n\nbanks_contrafactual &lt;- rbind(banks_contrafactual,d6_contrafactual)\n\ndd_grafica &lt;- banks_contrafactual %&gt;% \n  ggplot(aes(x=year, y=banks, color=distrito, linetype=tipo))+\n  geom_line(size=2) +\n  scale_linetype_manual(values=c(\"dashed\", \"solid\")) +\n  scale_y_continuous(limits=c(100,180)) \n\n\ndd_grafica"
  },
  {
    "objectID": "diapositivas/did.knit.html#diferencia-en-diferencias-2",
    "href": "diapositivas/did.knit.html#diferencia-en-diferencias-2",
    "title": "Diferencia en diferencias",
    "section": "",
    "text": "Podemos dar así una primera definición de lo que es la diferencia en diferencias del número de bancos que sobrevivieron a la Gran Depresión en Mississippi\n\n\\[\n\\begin{aligned}\n\\delta_{DID}&=(Y_{6,post}-Y_{6,pre})-(Y_{8,post}-Y_{8,pre}) \\\\\n&=(Y_{6,1931}-Y_{6,1930})-(Y_{8,1931}-Y_{8,1930}) \\\\\n&=(121-135)-(132-165) \\\\\n&=-14+33 = 19\n\\end{aligned}\n\\]\n\nEl estimador de DID toma en cuenta las diferencias inciales\nEn este caso, el distrito 8 ya tenía más bancos abiertos que el 6 antes de la crisis\nDID construye un contrafactual para las unidades tratadas usando la pendiente de las unidades no tratadas"
  },
  {
    "objectID": "diapositivas/did.knit.html#diferencia-en-diferencias-3",
    "href": "diapositivas/did.knit.html#diferencia-en-diferencias-3",
    "title": "Diferencia en diferencias",
    "section": "",
    "text": "El supuesto fundamental es el de tendencias comunes, es decir, que en ausencia del tratamiento, el grupo de tratamiento se hubiera comportado igual al grupo de control\nSi hay varios puntos pre intervención, el supuesto de tendencias comunes puede probarse empíricamente"
  },
  {
    "objectID": "diapositivas/did.knit.html#regresión-en-did",
    "href": "diapositivas/did.knit.html#regresión-en-did",
    "title": "Diferencia en diferencias",
    "section": "",
    "text": "El método puede generalizarse a más periodos de tiempo\nAquí, una regresión nos permite identificar el efecto del tratamiento\nTenemos datos sobre el número de bancos en cada distrito en cada año (1929-1934)\n\n\\[y_{dt}=\\alpha+\\beta T_d+\\gamma POST_t + \\delta_{r,DID}(T_d\\times POST_t)+e_{dt}\\] - \\(T_d\\) es una dummy para los distritos tratados (distrito 6 en este caso)\n\nLes llamamos efectos fijos individuales y sirven para controlar diferencias entre distritos que no cambian en el tiempo\n\\(POST_t\\) es una dummy para los periodos post tratamiento (1931 en adelante)\nAl término \\(T_d\\times POST_t\\) se le conoce como el término de interacción, que es una dummy igual a 1 para los distritos tratados en los años post intervención\n\\(\\delta_{r,DID}\\) es el estimador de DID del efecto del tratamiento"
  },
  {
    "objectID": "diapositivas/did.knit.html#regresión-en-did-1",
    "href": "diapositivas/did.knit.html#regresión-en-did-1",
    "title": "Diferencia en diferencias",
    "section": "",
    "text": "Usemos los datos del archivo banks_mm.csv que se utilizan en el libro\nEs una forma muy básica de datos en panel: cada fila representa un distrito en un periodo de tiempo\nPodemos identificar si cada fila pertenece a un distrito tratado o no o a un periodo posterior a al tratamiento o no\n\n\nbanks\n\n# A tibble: 12 × 5\n    year distrito banks treatment  post\n   &lt;dbl&gt; &lt;chr&gt;    &lt;dbl&gt;     &lt;dbl&gt; &lt;dbl&gt;\n 1  1929 bib6       141         1     0\n 2  1930 bib6       135         1     0\n 3  1931 bib6       121         1     1\n 4  1932 bib6       113         1     1\n 5  1933 bib6       102         1     1\n 6  1934 bib6       102         1     1\n 7  1929 bib8       169         0     0\n 8  1930 bib8       165         0     0\n 9  1931 bib8       132         0     1\n10  1932 bib8       120         0     1\n11  1933 bib8       111         0     1\n12  1934 bib8       109         0     1"
  },
  {
    "objectID": "diapositivas/did.knit.html#regresión-en-did-2",
    "href": "diapositivas/did.knit.html#regresión-en-did-2",
    "title": "Diferencia en diferencias",
    "section": "",
    "text": "Estimemos la regresión que acabamos de motivar usando todos los periodos en el panel\n\n\ndid_bank &lt;- lm(banks ~ treatment + post+ treatment*post,\n               data=banks)\n\nsummary(did_bank)\n\n\nCall:\nlm(formula = banks ~ treatment + post + treatment * post, data = banks)\n\nResiduals:\n   Min     1Q Median     3Q    Max \n-9.000 -7.125  0.000  3.125 14.000 \n\nCoefficients:\n               Estimate Std. Error t value Pr(&gt;|t|)    \n(Intercept)     167.000      6.190  26.980 3.83e-09 ***\ntreatment       -29.000      8.754  -3.313 0.010652 *  \npost            -49.000      7.581  -6.464 0.000195 ***\ntreatment:post   20.500     10.721   1.912 0.092224 .  \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 8.754 on 8 degrees of freedom\nMultiple R-squared:  0.8906,    Adjusted R-squared:  0.8496 \nF-statistic: 21.71 on 3 and 8 DF,  p-value: 0.0003369"
  },
  {
    "objectID": "diapositivas/did.knit.html#regresión-en-did-3",
    "href": "diapositivas/did.knit.html#regresión-en-did-3",
    "title": "Diferencia en diferencias",
    "section": "",
    "text": "Noten que si solo usamos dos años, obtenemos exactamente lo que obtendríamos haciendo las diferencias a mano\n\n\\[\\delta_{DiD}=(Y_{6,1931}-Y_{6,1930})-(Y_{8,1931}-Y_{8,1930})=19\\]\n\ndid_bank2 &lt;- lm(banks ~ treatment + post+ treatment*post,\n               data=filter(banks,year==1930 | year==1931))\n\n\nsummary(did_bank2)\n\n\nCall:\nlm(formula = banks ~ treatment + post + treatment * post, data = filter(banks, \n    year == 1930 | year == 1931))\n\nResiduals:\nALL 4 residuals are 0: no residual degrees of freedom!\n\nCoefficients:\n               Estimate Std. Error t value Pr(&gt;|t|)\n(Intercept)         165        NaN     NaN      NaN\ntreatment           -30        NaN     NaN      NaN\npost                -33        NaN     NaN      NaN\ntreatment:post       19        NaN     NaN      NaN\n\nResidual standard error: NaN on 0 degrees of freedom\nMultiple R-squared:      1, Adjusted R-squared:    NaN \nF-statistic:   NaN on 3 and 0 DF,  p-value: NA"
  },
  {
    "objectID": "diapositivas/did.knit.html#violación-a-los-supuestos",
    "href": "diapositivas/did.knit.html#violación-a-los-supuestos",
    "title": "Diferencia en diferencias",
    "section": "",
    "text": "Consideremos cosas que podrían salir mal con respecto al supuesto de tendencias paralelas\nSupongamos que un tratamiento ocurre en el periodo marcado con la línea vertical, por ejemplo, un cambio en una legislación\nEn este ejemplo algo sucedió en Allatsea que produjo un cambio en la trayectoria de mortalidad antes del cambio en la legislación\nEl supuesto de tendencias paralelas sí se sostenía hasta antes de este cambio\nSin embargo, nuestra estrategia de DID atribuiría el efecto al cambio en la legislación cuando en realidad cuando ese cambio ocurrió ya nole pasó nada a Allatsea"
  },
  {
    "objectID": "diapositivas/did.knit.html#violación-a-los-supuestos-1",
    "href": "diapositivas/did.knit.html#violación-a-los-supuestos-1",
    "title": "Diferencia en diferencias",
    "section": "",
    "text": "En este segundo ejemplo, el supuesto de tendencias paralelas pre intervención se viola\nAunque en el momento del cambio de la política, la línea de Allatsea es más inclinada, estimar esta relación por DID de nuevo atribuiría a la política diferencias que ya existían antes de la intervención"
  },
  {
    "objectID": "diapositivas/did.knit.html#violación-a-los-supuestos-2",
    "href": "diapositivas/did.knit.html#violación-a-los-supuestos-2",
    "title": "Diferencia en diferencias",
    "section": "",
    "text": "En este tercer ejemplo hay tendencias que no son paralelas pre intervención\nSin embargo, después de la intervención, la trayectoria de Allatsea tiene una pendiente claramente más inclinada que antes de la intervención"
  },
  {
    "objectID": "diapositivas/did.knit.html#adopción-escalonada-en-la-antiguedad",
    "href": "diapositivas/did.knit.html#adopción-escalonada-en-la-antiguedad",
    "title": "Diferencia en diferencias",
    "section": "Adopción escalonada en la antiguedad",
    "text": "Adopción escalonada en la antiguedad\n\nDID es uno de esos campos tan activos en la investigación que cosas que pensábamos superadas o completamente estudiadas se han modificado en los últimos años\nEn esta sección mostramos el tratamiento que MHE y MM dan a los problemas de adopción escalonada\nLa adopción escalonada ocurre cuando existen varios periodos de tratamiento y algunas unidades van siendo tratadas de forma desfasada\nPor ejemplo, en Méxio las leyes de despenalización del aborto o las que reconocen las uniones entre personas del mismo sexo son buenos ejemplos de tratamientos con adopción escalonada\nHasta los trabajos de Goodman-Bacon (2021) y Chaisemartin & D’Haultfœuille (2020), los problemas con adopción escalonada se abordaban econométricamente de la misma forma que hemos descrito hasta ahora, conocida como efectos fijos en bidireccionales (sí, suena horrible dicha traducción) o two-way fixed effects\nEsta sección presenta el tipo de tratamiento que hoy ya consideramos inapropiado\nMás adelante se presentan alternativas para los problemas de adopción escalonada"
  },
  {
    "objectID": "diapositivas/did.knit.html#edad-legal-para-beber-en-eua",
    "href": "diapositivas/did.knit.html#edad-legal-para-beber-en-eua",
    "title": "Diferencia en diferencias",
    "section": "Edad legal para beber en EUA",
    "text": "Edad legal para beber en EUA\n\nDiferencias en la edad legal para beber en Estados Unidos\n¿Las restricciones a la edad mínima para comprar alcohol tienen un impacto en la mortalidad?\nAlabama redujo la edad legal a 19 en 1975, mientras que, por ejemplo, Arkansas mantuvo la edad en 21\nTenemos datos de mortalidad de 1970 a 1983 para personas de entre 18 y 20 años\nLo que hemos aprendido hasta ahora nos sugiere estimar el impacto por DID comos sigue\n\n\\[y_{st}=\\alpha+\\beta T_s+\\gamma POST_t+\\delta_{DID}(T_s\\times POST_t)+e_{st}\\] - \\(T_s\\) es una dummy igual a 0 para Arkansas en todos los periodos e igual a 1 para Alabama en todos los periodos\n\n\\(POST_t\\) es igual a cero para el periodo 1970-1975 e igual a 1 para el periodo 1976-1983\n\\(T_s\\times POST_t\\) es igual a 1 para las observaciones de Alabama en los años en los que la nueva política ya está en vigor"
  },
  {
    "objectID": "diapositivas/did.knit.html#más-de-un-estado",
    "href": "diapositivas/did.knit.html#más-de-un-estado",
    "title": "Diferencia en diferencias",
    "section": "Más de un estado",
    "text": "Más de un estado\n\n¿Por qué quedarnos solo con la comparación con Arkansas?\nPodemos incluir más unidades que implementen cambios en la política en distintos momentos\nEn vez de \\(POST_t\\) usamos efectos fijos por año\nY en vez de una dummy de tratamiento, incluimos efectos fijos por unidad\nAdemás, en el cambio en la ley podría no ser el mismo\n\nAlgunos estados mueven la edad a 18, otros a 19 y otros a 20\nPodemos definir \\(LEGAL_{st}\\) como la proporción de individuos de entre 18 y 20 años autorizados para beber en el estado \\(s\\) y en el año \\(t\\)\n\n\n\\[y_{st}=\\alpha+\\delta_{DID}LEGAL_{st}+\\sum_k\\beta_k STATE_{ks}+\\sum_j \\gamma_j YEAR_{jt}+e_{st}\\]"
  },
  {
    "objectID": "diapositivas/did.knit.html#estructura-de-datos-en-panel",
    "href": "diapositivas/did.knit.html#estructura-de-datos-en-panel",
    "title": "Diferencia en diferencias",
    "section": "Estructura de datos en panel",
    "text": "Estructura de datos en panel\n\nLos datos que acabamos de describir tienen una estructura de panel\nLa variable de panel es el estado \\(s\\) y la variable de tiempo es el año \\(t\\)\nEn nuestros datos, cada estado se encuentra presente en varios años, y para cada estado y año sabemos la mortalidad y la fracción de personas de 18 a 20 años que pueden beber\nEfectos fijos \\(STATE_{ks}\\): diferencias entre estados que no cambian con el tiempo\nEfectos año \\(YEAR_{jt}\\): factores que afectan a todas las unidades por igual en un momento del tiempo"
  },
  {
    "objectID": "diapositivas/did.knit.html#interpretación",
    "href": "diapositivas/did.knit.html#interpretación",
    "title": "Diferencia en diferencias",
    "section": "Interpretación",
    "text": "Interpretación\n\n\n\nMuertes por 100,000 habs.:\n\\(\\hat{\\delta}_{DID}\\)\n\n\n\n\nTodas\n10.80\n\n\n\n(4.59)\n\n\nAccidentes en vehículos\n7.59\n\n\n\n(2.50)\n\n\nSuicidio\n0.59\n\n\n\n(0.59)\n\n\nCausas internas\n1.33\n\n\n\n(1.59)\n\n\n\n\nLa interpretación de los resultados es directa\nEl acceso a alcohol causa un incremento de casi 11 muertes adicionales por cada 100,000 habitantes y este efecto es estadísticamente significativo\nNo hay efectos donde no esperaríamos tenerlos"
  },
  {
    "objectID": "diapositivas/did.knit.html#qué-hace-el-estimador-de-twfe",
    "href": "diapositivas/did.knit.html#qué-hace-el-estimador-de-twfe",
    "title": "Diferencia en diferencias",
    "section": "¿Qué hace el estimador de TWFE?",
    "text": "¿Qué hace el estimador de TWFE?\nConsideremos el siguiente problema de adopción escalonada\n\nObservamos \\(T=5\\) periodos\n\\(k\\) denota la unidad tratada temprano en \\(t=2\\)\n\\(l\\) denota la unidad tratada tarde en \\(t=4%\\)\nDenotamos \\(\\bar{D}_k=0.8\\) al tiempo que \\(k\\) pasa tratado\nSimilarmente, \\(\\bar{D}_l=0.4\\)\n\\(n_k\\) es el número de unidades tratadas temprano\n\\(n_l\\) es el número de unidades tratadas tarde\n\\(n_U\\) es el número de unidades nunca tratadas\nPara cualesquiera dos grupos \\(a\\) y \\(b\\), \\(a_{ab}=\\frac{n_a}{n_a+n_b}\\)"
  },
  {
    "objectID": "diapositivas/did.knit.html#qué-hace-el-estimador-de-twfe-1",
    "href": "diapositivas/did.knit.html#qué-hace-el-estimador-de-twfe-1",
    "title": "Diferencia en diferencias",
    "section": "¿Qué hace el estimador de TWFE?",
    "text": "¿Qué hace el estimador de TWFE?"
  },
  {
    "objectID": "diapositivas/did.knit.html#qué-hace-el-estimador-de-twfe-2",
    "href": "diapositivas/did.knit.html#qué-hace-el-estimador-de-twfe-2",
    "title": "Diferencia en diferencias",
    "section": "¿Qué hace el estimador de TWFE?",
    "text": "¿Qué hace el estimador de TWFE?\nTenemos cuatro posibles comparaciones \\(2x2\\)\n\nLas comparaciones con las unidades nunca tratadas:\n\n\\[\\hat{\\beta}_{jU}=\\left(\\bar{y}_j^{POST(j)}-\\bar{y}_j^{PRE(j)}\\right)-\\left(\\bar{y}_U^{POST(j)}-\\bar{y}_U^{PRE(j)}\\right),\\;j=\\{k,l\\}\\]\n\nLa comparación entre \\(k\\) y \\(l\\) cuando \\(k\\) es tratada, usando los periodos antes de que \\(l\\) sea tratada\n\n\\[\\hat{\\beta}^{k}_{kl}=\\left(\\bar{y}_k^{MID(k,l)}-\\bar{y}_k^{PRE(k)}\\right)-\\left(\\bar{y}_l^{MID(k,l)}-\\bar{y}_l^{PRE(k)}\\right)\\]\n\nLa comparación entre \\(l\\) y \\(k\\) cuando \\(l\\) es tratada, usando los periodos después de que \\(k\\) fue tratada\n\n\\[\\hat{\\beta}^{l}_{kl}=\\left(\\bar{y}_l^{POST(l)}-\\bar{y}_l^{MID(k,l)}\\right)-\\left(\\bar{y}_k^{POST(l)}-\\bar{y}_k^{MID(k,l)}\\right)\\]"
  },
  {
    "objectID": "diapositivas/did.knit.html#qué-hace-el-estimador-de-twfe-3",
    "href": "diapositivas/did.knit.html#qué-hace-el-estimador-de-twfe-3",
    "title": "Diferencia en diferencias",
    "section": "¿Qué hace el estimador de TWFE?",
    "text": "¿Qué hace el estimador de TWFE?"
  },
  {
    "objectID": "diapositivas/did.knit.html#qué-hace-el-estimador-de-twfe-4",
    "href": "diapositivas/did.knit.html#qué-hace-el-estimador-de-twfe-4",
    "title": "Diferencia en diferencias",
    "section": "¿Qué hace el estimador de TWFE?",
    "text": "¿Qué hace el estimador de TWFE?\nDenotamos \\(D_{it}=1\\) cuando la unidad \\(i\\) es tratada en el periodo \\(0\\)\nPor el teorema de Frisch-Waugh-Lovell sabemos que podemos purgar de efectos fijos a la variable \\(D_{it}\\)\nEs decir, podemos estimar por MCO:\n\\[D_{it}=\\sum_t \\gamma_t P_t + \\sum_i \\pi S_i + \\varepsilon_{it}\\]\ndonde \\(P_t\\) son dummies temporales y \\(S_i\\) son dummies individuales\nLuego obtenemos\n\\[\\tilde{D}_{it}=D_{it}-\\hat{D}_{it}\\] Y entonces el estimador de TWFE puede escribirse como el coeficiente de una regresión bivariada:\n\\[\\hat{\\beta}_{DD}=\\frac{\\hat{C}(y_{it}, \\tilde{D}_{it})}{\\hat{V}^D}\\]"
  },
  {
    "objectID": "diapositivas/did.knit.html#qué-hace-el-estimador-de-twfe-5",
    "href": "diapositivas/did.knit.html#qué-hace-el-estimador-de-twfe-5",
    "title": "Diferencia en diferencias",
    "section": "¿Qué hace el estimador de TWFE?",
    "text": "¿Qué hace el estimador de TWFE?\nGoodman-Bacon (2021) muestra que el estimador de TWFE puede descomponerse como:\n\\[\\hat{\\beta}_{DD}=s_{kU}\\hat{\\beta}_{kU}+s_{lU}\\hat{\\beta}_{lU}+s_{kl}^k\\hat{\\beta}_{kl}^k+s_{kl}^l\\hat{\\beta}_{kl}^l\\]"
  },
  {
    "objectID": "diapositivas/did.knit.html#qué-son-los-pesos",
    "href": "diapositivas/did.knit.html#qué-son-los-pesos",
    "title": "Diferencia en diferencias",
    "section": "¿Qué son los pesos?",
    "text": "¿Qué son los pesos?\nGoodman-Bacon (2021) muestra que los pesos están dados por:\n\n\\(s_{kU}=\\frac{(n_k+n_U)^2\\hat{V}_{kU}^D}{\\hat{V}^D}\\)\n\\(s_{lU}=\\frac{(n_l+n_U)^2\\hat{V}_{lU}^D}{\\hat{V}^D}\\)\n\\(s_{kl}^k=\\frac{[(n_k+n_l)(1-\\bar{D}_l)]^2\\hat{V}_{kl}^{D,k}}{\\hat{V}^D}\\)\n\\(s_{kl}^l=\\frac{[(n_k+n_l)\\bar{D}_k]^2\\hat{V}_{kl}^{D,l}}{\\hat{V}^D}\\)\n\nEn resumen, los pesos están dados por\n\\[pesos = \\frac{(\\text{participación de la submuestra})^2(\\text{varianza del tratamiento purgada de efectos fijos en la submuestra})}{\\text{varianza del tratamiento purgada de efectos fijos en la muestra completa}}\\]"
  },
  {
    "objectID": "diapositivas/did.knit.html#qué-son-los-pesos-1",
    "href": "diapositivas/did.knit.html#qué-son-los-pesos-1",
    "title": "Diferencia en diferencias",
    "section": "¿Qué son los pesos?",
    "text": "¿Qué son los pesos?\nLas varianzas del tratamiento en la submuestra tienen las siguientes formas:\n\n\\(s_{kU}=\\frac{(n_k+n_U)^2\\hat{V}_{kU}^D}{\\hat{V}^D}=\\frac{(n_k+n_U)^2n_{kU}(1-n_{kU})\\bar{D}_k(1-\\bar{D}_k)}{\\hat{V}^D}\\)\n\\(s_{lU}=\\frac{(n_l+n_U)^2\\hat{V}_{lU}^D}{\\hat{V}^D}=\\frac{(n_l+n_U)^2n_{lU}(1-n_{lU})\\bar{D}_l(1-\\bar{D}_l)}{\\hat{V}^D}\\)\n\\(s_{kl}^k=\\frac{[(n_k+n_l)(1-\\bar{D}_l)]^2\\hat{V}_{kl}^{D,k}}{\\hat{V}^D}=\\frac{[(n_k+n_l)(1-\\bar{D}_l)]^2n_{kl}(1-n_{kl}) \\frac{\\bar{D}_k-\\bar{D}_l}{1-\\bar{D}_l}\\frac{1-\\bar{D}_k}{1-\\bar{D}_l}}{\\hat{V}^D}\\)\n\\(s_{kl}^l=\\frac{[(n_k+n_l)\\bar{D}_k]^2\\hat{V}_{kl}^{D,l}}{\\hat{V}^D}=\\frac{[(n_k+n_l)\\bar{D}_k]^2n_{kl}(1-n_{kl})\\frac{\\bar{D}_l}{\\bar{D}_k}\\frac{\\bar{D}_k-\\bar{D}_l}{\\bar{D}_k}}{\\hat{V}^D}\\)"
  },
  {
    "objectID": "diapositivas/did.knit.html#qué-son-los-pesos-2",
    "href": "diapositivas/did.knit.html#qué-son-los-pesos-2",
    "title": "Diferencia en diferencias",
    "section": "¿Qué son los pesos?",
    "text": "¿Qué son los pesos?\nPongamos atención a la varianza que entra en uno de los pesos:\n\\[\\hat{V}_{kU}^D=n_{kU}(1-n_{kU})\\bar{D}_k(1-\\bar{D}_k)\\]\nRecordemos que \\(\\bar{D}_k\\) indica la fracción del tiempo del panel que \\(k\\) permanece tratado\nEntonces, esta varianza es más grande en tanto"
  },
  {
    "objectID": "diapositivas/did.knit.html#estimador-de-callaway-santanna-1",
    "href": "diapositivas/did.knit.html#estimador-de-callaway-santanna-1",
    "title": "Diferencia en diferencias",
    "section": "Estimador de Callaway & Sant’Anna",
    "text": "Estimador de Callaway & Sant’Anna\nEl estimador de Callaway & Sant’Anna (2021) es una forma muy sencilla de explotar la información del desfase del tratamiento\nAdemás permite una presentación muy intuitiva de los efectos de tratamiento\nEsencialmente consiste en definir una serie de cohortes de unidades y estimar los impactos para cada cohorte\nLuego podemos agregar los impactos por cohorte o presentar la dinámica de los impactos de forma gráfica"
  },
  {
    "objectID": "diapositivas/did.knit.html#definiciones",
    "href": "diapositivas/did.knit.html#definiciones",
    "title": "Diferencia en diferencias",
    "section": "Definiciones",
    "text": "Definiciones\n\n\\(G_i=\\min\\{t:D_{it}=1\\}\\) es el primer periodo en que \\(i\\) es tratado\n\\(G_i=\\infty\\) indoca que \\(i\\) nunca es tratado\n\\(t=1,\\ldots,T\\) son los periodos\n\\(D_{it}=1\\;\\forall\\;t\\geq G_i\\) indica tratamiento absorbente\n\nDefinamos el efecto del tratamiento al periodo \\(t\\) para el cohorte que empezó a ser tratado en \\(g\\):\n\\[ATT(g,t)=E(y_{it}(g)-y_{it}(\\infty)|G_i=g)\\] Por ejemplo, \\(ATT(2014,2016)\\) es el efecto del tratamiento en 2016 para aquellos tratados empezando en 2014"
  },
  {
    "objectID": "diapositivas/did.knit.html#supuestos",
    "href": "diapositivas/did.knit.html#supuestos",
    "title": "Diferencia en diferencias",
    "section": "Supuestos",
    "text": "Supuestos\nTendencias paralelas en el contexto escalonado\n\\[E(y_{it}(\\infty)-y_{it'}(\\infty)|G_i=g)=E(y_{it}(\\infty)-y_{it'}(\\infty)|G_i=g')\\quad\\forall\\;t\\neq t',\\; g\\neq q'\\]\nEste supuesto indica que en el estado contrafactual de nunca haber sido tratados, dos grupos tratados en dos momentos diferentes \\(g\\) y \\(g'\\) habrían tenido una trayectoria igual entre los periodos \\(t\\) y \\(t'\\)\nTendencias paralelas en el contexto escalonado (a)\nModifica el supuesto anterior pero \\(\\forall \\;t,t'\\geq g_{min}-1\\) donde \\(g_{min}=\\min G\\) es el primer periodo en donde alguna unidad es tratada (Callaway y Sant’Anna solo usan este supuesto más débil)"
  },
  {
    "objectID": "diapositivas/did.knit.html#supuestos-1",
    "href": "diapositivas/did.knit.html#supuestos-1",
    "title": "Diferencia en diferencias",
    "section": "Supuestos",
    "text": "Supuestos\nNo anticipación en el contexto escalonado\n\\[y_{it}(g)=y_{it}(\\infty)\\quad \\forall\\;i \\;\\text{y}\\;\\forall\\;t&lt;g\\]"
  },
  {
    "objectID": "diapositivas/did.knit.html#estimador-de-callaway-santanna-2",
    "href": "diapositivas/did.knit.html#estimador-de-callaway-santanna-2",
    "title": "Diferencia en diferencias",
    "section": "Estimador de Callaway & Sant’Anna",
    "text": "Estimador de Callaway & Sant’Anna\nEl estimador de Callaway & Sant’Anna (2021) se define como:\n\\[ATT(g,t)=E(y_{it}-y_{i,g-1}|G_i=g)-E(y_{it}-y_{i,g-1}|G_i\\in\\mathcal{G}_{comp})\\] Queremos comparar el valor de la variable de impacto entre el periodo \\(g-1\\) y el \\(t\\) para el grupo que fue tratado en \\(g\\) con algún grupo de comparación denominado \\(\\mathcal{G}_{comp}\\)\nSustituyendo por el análogo muestral:\n\\[\\hat{ATT}(g,t)=\\frac{1}{N_g}\\sum_{i:\\;G_i=g}(y_{it}-y_{i,g-1})-\\frac{1}{N_{\\mathcal{G}_{comp}}}\\sum_{i\\;G_i\\in \\mathcal{G}_{comp}}(y_{it}-y_{i,g-1})\\] ## Grupo de comparación\n¿Qué es \\(\\mathcal{G}_{comp}\\)?\n\n\\(\\mathcal{G}_{comp}=\\{\\infty \\}\\): aquellas unidades nunca tratadas\n\\(\\mathcal{G}_{comp}=\\{g':g'&gt;t \\}\\): aquellas unidades aún no tratadas al periodo \\(t\\)"
  },
  {
    "objectID": "diapositivas/did.knit.html#reportar-resultados",
    "href": "diapositivas/did.knit.html#reportar-resultados",
    "title": "Diferencia en diferencias",
    "section": "Reportar resultados",
    "text": "Reportar resultados\nSi tenemos pocos periodos y cohortes puede ser práctico reportar todos los \\(\\hat{ATT}(g,t)\\)\nTambién podemos construir medidas agregadas:\n\\[\\theta = \\sum_{g\\in\\mathcal{G}}\\sum_{t=2}^{\\mathcal{T}}w(g,t)ATT(g,t)\\] ## Ventajas del estimador\nToma en cuenta la heterogeneidad de los efectos de tratamiento\nLos pesos son especificados por el investigador y no mecánicamente con en TWFE\nHace explícito el grupo de comparación (nunca tratados o aún no tratados)"
  },
  {
    "objectID": "diapositivas/did.html#qué-nos-dice-la-descomposición",
    "href": "diapositivas/did.html#qué-nos-dice-la-descomposición",
    "title": "Diferencia en diferencias",
    "section": "¿Qué nos dice la descomposición?",
    "text": "¿Qué nos dice la descomposición?\nTodos los grupos funcionan como controles (algunas veces)\nLos pesos en cada comparación \\(2x2\\) dependen del tamaño de la muestra usada para estimarlos y del tiempo que las unidades permanecen tratadas\nEl efecto estimado se modificaría solo por agregar más años al final del panel\nLos términos que dominen pueden incluso cambiar el signo del efecto estimado\nGoodman-Bacon (2021) muestra que, en general usar TWFE solo recupera un efecto de tratamiento bajo supuestos muy fuertes, el más crucial, bajo efectos de tratamiento que no varían en el tiempo (no hay efectos dinámicos)"
  },
  {
    "objectID": "diapositivas/did.html#qué-son-los-pesos-4",
    "href": "diapositivas/did.html#qué-son-los-pesos-4",
    "title": "Diferencia en diferencias",
    "section": "¿Qué son los pesos?",
    "text": "¿Qué son los pesos?\nEn resumen, los pesos están dados por\n\\[pesos = \\frac{(\\text{participación de la submuestra})^2(\\text{varianza del tratamiento purgada de efectos fijos en la submuestra})}{\\text{varianza del tratamiento purgada de efectos fijos en la muestra completa}}\\]"
  },
  {
    "objectID": "diapositivas/did.html#formas-de-agregación",
    "href": "diapositivas/did.html#formas-de-agregación",
    "title": "Diferencia en diferencias",
    "section": "Formas de agregación",
    "text": "Formas de agregación\nLa notación usada en el artículo es densa pero en resumen, algunas agregaciones posibles son:\nEfecto de tratamiento por duración de exposición\n\nPodemos calcular \\(\\theta(e)\\), el efecto promedio \\(e\\) periodos después del tratamiento, donde \\(e=t-g\\) es el tiempo que ocurre desde que se realizó el tratamiento\nPodemos hacer un gráfico de \\(\\theta(e)\\)\n\nEfecto de tratamiento por grupo o cohorte\n\nLo llamamos \\(\\theta(\\tilde{g})\\) y nos permite conocer si el efecto del tratamiento es distinto para cohortes que fueron tratados temprano o tarde\n\nEfecto de tratamiento acumulado\n\nLo llamamos \\(\\theta(\\tilde{t})\\) y lo definimos como el efecto promedio por participar en el tratamiento hasta una fecha dada \\(\\tilde{t}\\)"
  },
  {
    "objectID": "diapositivas/did.html#ventajas-del-estimador",
    "href": "diapositivas/did.html#ventajas-del-estimador",
    "title": "Diferencia en diferencias",
    "section": "Ventajas del estimador",
    "text": "Ventajas del estimador\nToma en cuenta la heterogeneidad de los efectos de tratamiento\nLos pesos son especificados por el investigador y no mecánicamente con en TWFE\nHace explícito el grupo de comparación (nunca tratados o aún no tratados)"
  }
]