<!DOCTYPE html>
<html lang="en"><head>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-html/tabby.min.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-contrib/bootstrap-icons-1.13.1/bootstrap-icons.css" rel="stylesheet"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.7.32">

  <title>Inferencia Causal 2025 – clase_23</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="../site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="../site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    html { -webkit-text-size-adjust: 100%; }
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; font-weight: bold; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="../site_libs/revealjs/dist/theme/quarto-8b940f0b0c37e8b60983ca0a0adffd2d.css">
  <link href="../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">


<section id="clase-23.-regresión-discontinua-en-r" class="title-slide slide level1 portada center">
<h1>Clase 23. Regresión discontinua en R</h1>
<div style="text-align: center; font-size: 1.2em; font-weight: bold;">
<p>Inferencia Causal</p>
</div>
<div style="text-align: center; margin-top: 1em;">
<p><strong>Irvin Rojas</strong><br>
<br> <a href="https://rojasirvin.com" style="color: #ffffff;">rojasirvin.com</a></p>
</div>
<div style="text-align: center; margin-top: 1em;">
<p><a href="https://github.com/rojasirvin" target="_blank" style="margin-right: 0 10px;"> <i class="bi-github " style="" role="img" aria-hidden="true"></i> </a> <a href="https://twitter.com/RojasIrvin" target="_blank" style="margin-right: 0 10px;"> <i class="bi-twitter " style="" role="img" aria-hidden="true"></i> </a> <a href="https://scholar.google.com/citations?user=FUwdSTMAAAAJ&amp;hl=en" style="margin: 0 10px;"> <i class="bi-google " style="" role="img" aria-hidden="true"></i> </a></p>
</div>
<p><strong>Centro de Investigación y Docencia Económicas</strong> División de Economía</p>
<div class="cell">
<style type="text/css">
.huge .remark-code { /*Change made here*/
  font-size: 200% !important;
}
.tiny .remark-code { /*Change made here*/
  font-size: 60% !important;
}
</style>
</div>
</section>

<section id="implementación-de-regresión-discontinua" class="title-slide slide level1 inverse center middle">
<h1>Implementación de regresión discontinua</h1>

</section>

<section id="el-efecto-seguidor" class="title-slide slide level1 center">
<h1>El <em>efecto seguidor</em></h1>
<ul>
<li><p>En esta aplicación estudiaremos el <em>efecto seguidor</em> o <em>runner-up effect</em></p></li>
<li><p>Anagol, S., y Fujiwara, T. (2016). <a href="https://www.journals.uchicago.edu/doi/abs/10.1086/686746">The runner-up effect</a>. <em>Journal of Political Economy</em>, 124(4), 927-991).</p></li>
<li><p>En este estudio, se estima el efecto de ser etiquetado como el <em>seguidor</em></p></li>
<li><p>Los segundos y tercer lugares pueden acabar muy cerca el uno del otro en una elección pero el segundo lugar recibe la etiqueta de <em>seguidor</em>, lo que genera un salto en la probabilidad de volver a contender y ganar</p></li>
<li><p>Usamos regresión discontinua cuando el estado de tratamiento depende del valor que tome una variable de selección con respecto a un corte</p></li>
<li><p>El corte puede ser una regla explícita o una discontinuidad generada por un experimento natural</p></li>
</ul>
</section>

<section id="el-efecto-seguidor-1" class="title-slide slide level1 center">
<h1>El <em>efecto seguidor</em></h1>
<ul>
<li><p>En esta aplicación la variable de selección es la distancia entre el segundo y tercer lugar en las elecciones municipales en Brasil</p></li>
<li><p>Esta variable es positiva para los segundos lugares y negativa para los terceros lugares</p></li>
<li><p>Esto define un umbral <span class="math inline">\(x_0=0\)</span></p></li>
<li><p>Los candidatos muy cercanos al umbral tuvieron un desempeño parecido</p></li>
<li><p>Si existen discontinuidades, deberían ser aparentes en una gráfica</p></li>
</ul>
</section>

<section id="el-efecto-seguidor-2" class="title-slide slide level1 center">
<h1>El <em>efecto seguidor</em></h1>

<img data-src="figures/RDrunnerup_brazil.png" style="width:55.0%" class="r-stretch quarto-figure-center"><p class="caption">Fuente: Anagol &amp; Fujiwara (2016)</p></section>

<section id="datos-de-elecciones-en-brasil" class="title-slide slide level1 center">
<h1>Datos de elecciones en Brasil</h1>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a></a>data.brasil<span class="ot">&lt;-</span><span class="fu">read_csv</span>(</span>
<span id="cb1-2"><a></a>  <span class="st">"./brazil_runner_up.csv"</span>,</span>
<span id="cb1-3"><a></a>  <span class="at">locale =</span> <span class="fu">locale</span>(<span class="at">encoding =</span> <span class="st">"latin1"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Aquí uso la librería <em>gtsummary</em></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a></a>tab1 <span class="ot">&lt;-</span> data.brasil <span class="sc">%&gt;%</span></span>
<span id="cb2-2"><a></a>  <span class="fu">select</span>(run, cand_ran_again,cand_winner) <span class="sc">%&gt;%</span> </span>
<span id="cb2-3"><a></a>  <span class="fu">tbl_summary</span>(</span>
<span id="cb2-4"><a></a>    <span class="at">statistic =</span> <span class="fu">list</span>(<span class="fu">all_continuous</span>() <span class="sc">~</span> <span class="st">"{mean} ({sd})"</span>,</span>
<span id="cb2-5"><a></a>                     <span class="fu">all_categorical</span>() <span class="sc">~</span> <span class="st">"{n} / {N} ({p}%)"</span>),</span>
<span id="cb2-6"><a></a>    <span class="at">digits =</span> <span class="fu">all_continuous</span>() <span class="sc">~</span> <span class="dv">2</span>,</span>
<span id="cb2-7"><a></a>    <span class="at">label =</span> run <span class="sc">~</span> <span class="st">"Diferencia de votos"</span>,</span>
<span id="cb2-8"><a></a>    <span class="at">missing_text =</span> <span class="st">"(Missing)"</span></span>
<span id="cb2-9"><a></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="cell-output-display">
<div id="orqettijoe" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#orqettijoe table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#orqettijoe thead, #orqettijoe tbody, #orqettijoe tfoot, #orqettijoe tr, #orqettijoe td, #orqettijoe th {
  border-style: none;
}

#orqettijoe p {
  margin: 0;
  padding: 0;
}

#orqettijoe .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#orqettijoe .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#orqettijoe .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#orqettijoe .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#orqettijoe .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#orqettijoe .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#orqettijoe .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#orqettijoe .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#orqettijoe .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#orqettijoe .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#orqettijoe .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#orqettijoe .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#orqettijoe .gt_spanner_row {
  border-bottom-style: hidden;
}

#orqettijoe .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#orqettijoe .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#orqettijoe .gt_from_md > :first-child {
  margin-top: 0;
}

#orqettijoe .gt_from_md > :last-child {
  margin-bottom: 0;
}

#orqettijoe .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#orqettijoe .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#orqettijoe .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#orqettijoe .gt_row_group_first td {
  border-top-width: 2px;
}

#orqettijoe .gt_row_group_first th {
  border-top-width: 2px;
}

#orqettijoe .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#orqettijoe .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#orqettijoe .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#orqettijoe .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#orqettijoe .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#orqettijoe .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#orqettijoe .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#orqettijoe .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#orqettijoe .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#orqettijoe .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#orqettijoe .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#orqettijoe .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#orqettijoe .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#orqettijoe .gt_left {
  text-align: left;
}

#orqettijoe .gt_center {
  text-align: center;
}

#orqettijoe .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#orqettijoe .gt_font_normal {
  font-weight: normal;
}

#orqettijoe .gt_font_bold {
  font-weight: bold;
}

#orqettijoe .gt_font_italic {
  font-style: italic;
}

#orqettijoe .gt_super {
  font-size: 65%;
}

#orqettijoe .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#orqettijoe .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#orqettijoe .gt_indent_1 {
  text-indent: 5px;
}

#orqettijoe .gt_indent_2 {
  text-indent: 10px;
}

#orqettijoe .gt_indent_3 {
  text-indent: 15px;
}

#orqettijoe .gt_indent_4 {
  text-indent: 20px;
}

#orqettijoe .gt_indent_5 {
  text-indent: 25px;
}

#orqettijoe .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#orqettijoe div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table caption-top" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="gt_col_headings header">
<th id="label" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col"><strong>Characteristic</strong></th>
<th id="stat_0" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col"><strong>N = 25,254</strong><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>1</sup></span></th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="label">Diferencia de votos</td>
<td class="gt_row gt_center" headers="stat_0">0.00 (28.23)</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">cand_ran_again</td>
<td class="gt_row gt_center" headers="stat_0">5,525 / 20,608 (27%)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;(Missing)</td>
<td class="gt_row gt_center" headers="stat_0">4,646</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">cand_winner</td>
<td class="gt_row gt_center" headers="stat_0">2,400 / 20,608 (12%)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;(Missing)</td>
<td class="gt_row gt_center" headers="stat_0">4,646</td>
</tr>
</tbody><tfoot class="gt_footnotes">
<tr class="odd">
<td colspan="2" class="gt_footnote"><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>1</sup></span> Mean (SD); n / N (%)</td>
</tr>
</tfoot>

</table>

</div>
</div>
</div>
</div></div>
</section>

<section id="gráficos-de-discontinuidades" class="title-slide slide level1 center">
<h1>Gráficos de discontinuidades</h1>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a></a>desc1 <span class="ot">&lt;-</span> data.brasil <span class="sc">%&gt;%</span> </span>
<span id="cb3-2"><a></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>bin_run,<span class="at">y=</span>bin_cand_ran_again))<span class="sc">+</span></span>
<span id="cb3-3"><a></a>  <span class="fu">geom_point</span>()<span class="sc">+</span></span>
<span id="cb3-4"><a></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept=</span><span class="dv">0</span>, <span class="at">linetype=</span><span class="st">"dashed"</span>, <span class="at">color =</span> <span class="st">"red"</span>, <span class="at">size=</span><span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="figures/unnamed-chunk-7-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
</div></div>
</section>

<section id="gráficos-de-discontinuidades-1" class="title-slide slide level1 center">
<h1>Gráficos de discontinuidades</h1>
<ul>
<li>Corremos regresiones con un polinomio cuadrado de la edad para cada lado de la discontinuidad</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a></a>m1 <span class="ot">&lt;-</span> <span class="fu">lm</span>(cand_ran_again <span class="sc">~</span> run<span class="sc">+</span><span class="fu">I</span>(run<span class="sc">^</span><span class="dv">2</span>), <span class="at">data=</span><span class="fu">subset</span>(data.brasil,run<span class="sc">&gt;-</span><span class="dv">48</span> <span class="sc">&amp;</span> run<span class="sc">&lt;</span><span class="dv">0</span>))</span>
<span id="cb4-2"><a></a>m2 <span class="ot">&lt;-</span> <span class="fu">lm</span>(cand_ran_again <span class="sc">~</span> run<span class="sc">+</span><span class="fu">I</span>(run<span class="sc">^</span><span class="dv">2</span>), <span class="at">data=</span><span class="fu">subset</span>(data.brasil,run<span class="sc">&gt;=</span><span class="dv">0</span> <span class="sc">&amp;</span> run<span class="sc">&lt;</span><span class="dv">48</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Luego calculamos los valores ajustados</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a></a>data.brasil <span class="ot">&lt;-</span> data.brasil <span class="sc">%&gt;%</span> </span>
<span id="cb5-2"><a></a>  <span class="fu">mutate</span>(<span class="at">cand_ran_again_hat_left=</span><span class="fu">ifelse</span>(run<span class="sc">&gt;-</span><span class="dv">48</span> <span class="sc">&amp;</span> run<span class="sc">&lt;</span><span class="dv">0</span>,<span class="fu">predict</span>(m1,.),<span class="cn">NA</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb5-3"><a></a>  <span class="fu">mutate</span>(<span class="at">cand_ran_again_hat_right=</span><span class="fu">ifelse</span>(run<span class="sc">&gt;=</span><span class="dv">0</span> <span class="sc">&amp;</span> run<span class="sc">&lt;</span><span class="dv">48</span>,<span class="fu">predict</span>(m2,.),<span class="cn">NA</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>

<section id="gráficos-de-discontinuidades-2" class="title-slide slide level1 center">
<h1>Gráficos de discontinuidades</h1>
<div class="columns">
<div class="column" style="width:50%;">
<ul>
<li>Hacemos el gráfico de puntos y le sobreponemos los valores ajustados</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a></a>g1 <span class="ot">&lt;-</span> data.brasil <span class="sc">%&gt;%</span> </span>
<span id="cb6-2"><a></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>bin_run,<span class="at">y=</span>bin_cand_ran_again))<span class="sc">+</span></span>
<span id="cb6-3"><a></a>  <span class="fu">geom_point</span>()<span class="sc">+</span></span>
<span id="cb6-4"><a></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept=</span><span class="dv">0</span>, <span class="at">linetype=</span><span class="st">"dashed"</span>, <span class="at">color =</span> <span class="st">"red"</span>, <span class="at">size=</span><span class="dv">1</span>)<span class="sc">+</span></span>
<span id="cb6-5"><a></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">x=</span>run, <span class="at">y=</span>cand_ran_again_hat_left))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="figures/unnamed-chunk-11-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
</div></div>
</section>

<section id="gráficos-de-discontinuidades-3" class="title-slide slide level1 center">
<h1>Gráficos de discontinuidades</h1>
<div class="columns">
<div class="column" style="width:50%;">
<ul>
<li>El gráfico completo</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a></a><span class="co">#Con los dos segmentos</span></span>
<span id="cb7-2"><a></a>g2 <span class="ot">&lt;-</span> data.brasil <span class="sc">%&gt;%</span> </span>
<span id="cb7-3"><a></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>bin_run,<span class="at">y=</span>bin_cand_ran_again))<span class="sc">+</span></span>
<span id="cb7-4"><a></a>  <span class="fu">geom_point</span>()<span class="sc">+</span></span>
<span id="cb7-5"><a></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept=</span><span class="dv">0</span>, <span class="at">linetype=</span><span class="st">"dashed"</span>, <span class="at">color =</span> <span class="st">"red"</span>, <span class="at">size=</span><span class="dv">1</span>)<span class="sc">+</span></span>
<span id="cb7-6"><a></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">x=</span>run, <span class="at">y=</span>cand_ran_again_hat_left))<span class="sc">+</span></span>
<span id="cb7-7"><a></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">x=</span>run, <span class="at">y=</span>cand_ran_again_hat_right))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="figures/unnamed-chunk-13-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
</div></div>
</section>

<section id="gráficos-de-discontinuidades-4" class="title-slide slide level1 center">
<h1>Gráficos de discontinuidades</h1>
<div class="columns">
<div class="column" style="width:50%;">
<ul>
<li>Un gráfico similar se logra para la probabilidad de ganar</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a></a>w1 <span class="ot">&lt;-</span> <span class="fu">lm</span>(bin_cand_winner <span class="sc">~</span> run<span class="sc">+</span><span class="fu">I</span>(run<span class="sc">^</span><span class="dv">2</span>), <span class="at">data=</span><span class="fu">subset</span>(data.brasil,run<span class="sc">&gt;-</span><span class="dv">48</span> <span class="sc">&amp;</span> run<span class="sc">&lt;</span><span class="dv">0</span>))</span>
<span id="cb8-2"><a></a>w2 <span class="ot">&lt;-</span> <span class="fu">lm</span>(bin_cand_winner <span class="sc">~</span> run<span class="sc">+</span><span class="fu">I</span>(run<span class="sc">^</span><span class="dv">2</span>), <span class="at">data=</span><span class="fu">subset</span>(data.brasil,run<span class="sc">&gt;=</span><span class="dv">0</span> <span class="sc">&amp;</span> run<span class="sc">&lt;</span><span class="dv">48</span>))</span>
<span id="cb8-3"><a></a></span>
<span id="cb8-4"><a></a>data.brasil <span class="ot">&lt;-</span> data.brasil <span class="sc">%&gt;%</span> </span>
<span id="cb8-5"><a></a>  <span class="fu">mutate</span>(<span class="at">cand_win_hat_left=</span><span class="fu">ifelse</span>(run<span class="sc">&gt;-</span><span class="dv">48</span> <span class="sc">&amp;</span> run<span class="sc">&lt;</span><span class="dv">0</span>,<span class="fu">predict</span>(w1,.),<span class="cn">NA</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb8-6"><a></a>  <span class="fu">mutate</span>(<span class="at">cand_win_hat_right=</span><span class="fu">ifelse</span>(run<span class="sc">&gt;=</span><span class="dv">0</span> <span class="sc">&amp;</span> run<span class="sc">&lt;</span><span class="dv">48</span>,<span class="fu">predict</span>(w2,.),<span class="cn">NA</span>))</span>
<span id="cb8-7"><a></a></span>
<span id="cb8-8"><a></a>g3 <span class="ot">&lt;-</span> data.brasil <span class="sc">%&gt;%</span> </span>
<span id="cb8-9"><a></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>bin_run,<span class="at">y=</span>bin_cand_winner))<span class="sc">+</span></span>
<span id="cb8-10"><a></a>  <span class="fu">geom_point</span>()<span class="sc">+</span></span>
<span id="cb8-11"><a></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept=</span><span class="dv">0</span>, <span class="at">linetype=</span><span class="st">"dashed"</span>, <span class="at">color =</span> <span class="st">"red"</span>, <span class="at">size=</span><span class="dv">1</span>)<span class="sc">+</span></span>
<span id="cb8-12"><a></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">x=</span>run, <span class="at">y=</span>cand_win_hat_left))<span class="sc">+</span></span>
<span id="cb8-13"><a></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">x=</span>run, <span class="at">y=</span>cand_win_hat_right))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="figures/unnamed-chunk-15-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
</div></div>
</section>

<section id="gráficos-de-discontinuidades-5" class="title-slide slide level1 center">
<h1>Gráficos de discontinuidades</h1>
<div class="columns">
<div class="column" style="width:50%;">
<ul>
<li>Personalizamos para generar un gráfico parecido al del artículo</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a></a>g4 <span class="ot">&lt;-</span> data.brasil <span class="sc">%&gt;%</span></span>
<span id="cb9-2"><a></a>  <span class="fu">filter</span>(bin_cand_ran_again<span class="sc">&lt;</span>.<span class="dv">55</span> , bin_cand_winner <span class="sc">&lt;</span>.<span class="dv">55</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb9-3"><a></a>      <span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb9-4"><a></a>      <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x=</span>bin_run,<span class="at">y=</span>bin_cand_ran_again),<span class="at">shape=</span><span class="dv">17</span>,<span class="at">fill=</span><span class="st">"black"</span>)<span class="sc">+</span></span>
<span id="cb9-5"><a></a>      <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x=</span>bin_run,<span class="at">y=</span>bin_cand_winner))<span class="sc">+</span></span>
<span id="cb9-6"><a></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">x=</span>run, <span class="at">y=</span>cand_win_hat_left))<span class="sc">+</span></span>
<span id="cb9-7"><a></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">x=</span>run, <span class="at">y=</span>cand_win_hat_right))<span class="sc">+</span></span>
<span id="cb9-8"><a></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">x=</span>run, <span class="at">y=</span>cand_ran_again_hat_left))<span class="sc">+</span></span>
<span id="cb9-9"><a></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">x=</span>run, <span class="at">y=</span>cand_ran_again_hat_right))<span class="sc">+</span></span>
<span id="cb9-10"><a></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept=</span><span class="dv">0</span>, <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">size=</span><span class="dv">1</span>)<span class="sc">+</span></span>
<span id="cb9-11"><a></a>  <span class="fu">xlab</span>(<span class="st">"Vote Share Difference Between 2nd and 3rd; t (%)"</span>)<span class="sc">+</span></span>
<span id="cb9-12"><a></a>  <span class="fu">ylab</span>(<span class="st">""</span>)<span class="sc">+</span></span>
<span id="cb9-13"><a></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">50</span>,<span class="dv">0</span>,<span class="dv">50</span>))<span class="sc">+</span></span>
<span id="cb9-14"><a></a>  <span class="fu">scale_y_continuous</span>(<span class="at">breaks=</span><span class="fu">seq</span>(<span class="dv">0</span>, <span class="fl">0.5</span>, <span class="fl">0.05</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="figures/unnamed-chunk-17-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
</div></div>
</section>

<section id="análisis-paramétrico" class="title-slide slide level1 center">
<h1>Análisis paramétrico</h1>
<ul>
<li>La forma de estimar el efecto del tratamiento paramétricamente es:</li>
</ul>
<p><span class="math display">\[y_{ict}=\beta \mathcal{I}(x_{ict}&gt;0)+f(x_{ict})+\varepsilon_{ict}\]</span></p>
<ul>
<li>Arrelgamos los datos</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a></a><span class="co">#Multiplicamos variables por 100</span></span>
<span id="cb10-2"><a></a>perc.vars <span class="ot">&lt;-</span> <span class="fu">c</span>( <span class="st">"cand_ran_again"</span>, <span class="st">"cand_winner"</span>, <span class="st">"cand_ran_lag"</span>, <span class="st">"cand_winner_lag"</span>,</span>
<span id="cb10-3"><a></a>                <span class="st">"cand_maj_party"</span>, <span class="st">"party_winner"</span>, <span class="st">"party_ran_again"</span>)</span>
<span id="cb10-4"><a></a></span>
<span id="cb10-5"><a></a>data.brasil[perc.vars] <span class="ot">&lt;-</span> <span class="fu">lapply</span>(</span>
<span id="cb10-6"><a></a>  data.brasil[perc.vars],</span>
<span id="cb10-7"><a></a>  <span class="cf">function</span>(x) x<span class="sc">*</span><span class="dv">100</span></span>
<span id="cb10-8"><a></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>El <em>corte</em> en este caso es el 0</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a></a>data.brasil <span class="ot">&lt;-</span> data.brasil <span class="sc">%&gt;%</span> </span>
<span id="cb11-2"><a></a>  <span class="fu">mutate</span>(<span class="at">D=</span><span class="fu">ifelse</span>(run<span class="sc">&gt;</span><span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>

<section id="análisis-paramétrico-1" class="title-slide slide level1 center">
<h1>Análisis paramétrico</h1>
<div class="columns">
<div class="column" style="width:50%;">
<ul>
<li><p>Aquí uso la librería <em>lfe</em></p></li>
<li><p>La sintaxis de la fórmula es</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a></a>y <span class="sc">~</span> x1 x2 <span class="sc">|</span> Efectos fijos <span class="sc">|</span> Instrumentos <span class="sc">|</span> cluster</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>En nuestro caso</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a></a>rd1 <span class="ot">&lt;-</span> <span class="fu">felm</span>(cand_winner <span class="sc">~</span> D  <span class="sc">+</span> run <span class="sc">|</span><span class="dv">0</span> <span class="sc">|</span> <span class="dv">0</span> <span class="sc">|</span> id_munic, <span class="at">data=</span>data.brasil)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column tiny" style="width:50%;">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
   felm(formula = cand_winner ~ D + run | 0 | 0 | id_munic, data = data.brasil) 

Residuals:
    Min      1Q  Median      3Q     Max 
-24.570 -18.516  -6.227  -1.137  99.909 

Coefficients:
            Estimate Cluster s.e. t value Pr(&gt;|t|)    
(Intercept)  7.92092      0.48313  16.395  &lt; 2e-16 ***
D            7.45009      0.93695   7.951 1.94e-15 ***
run          0.18546      0.01596  11.619  &lt; 2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 30.9 on 20605 degrees of freedom
  (4646 observations deleted due to missingness)
Multiple R-squared(full model): 0.07226   Adjusted R-squared: 0.07217 
Multiple R-squared(proj model): 0.07226   Adjusted R-squared: 0.07217 
F-statistic(full model, *iid*):802.4 on 2 and 20605 DF, p-value: &lt; 2.2e-16 
F-statistic(proj model): 792.7 on 2 and 4470 DF, p-value: &lt; 2.2e-16 </code></pre>
</div>
</div>
</div></div>
</section>

<section id="análisis-paramétrico-2" class="title-slide slide level1 center">
<h1>Análisis paramétrico</h1>
<div class="columns">
<div class="column" style="width:50%;">
<ul>
<li>Podemos especificar el cuadrado de <strong>run</strong></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a></a>rd2 <span class="ot">&lt;-</span> <span class="fu">felm</span>(cand_winner <span class="sc">~</span> D <span class="sc">+</span> run<span class="sc">+</span><span class="fu">I</span>(run<span class="sc">^</span><span class="dv">2</span>) <span class="sc">|</span><span class="dv">0</span> <span class="sc">|</span> <span class="dv">0</span> <span class="sc">|</span> id_munic, <span class="at">data=</span>data.brasil)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>O alguna otra función de <strong>run</strong></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a></a><span class="co">#Especificando un coeficiente para run antes y despues</span></span>
<span id="cb16-2"><a></a>rd3 <span class="ot">&lt;-</span> <span class="fu">felm</span>(cand_winner <span class="sc">~</span> D  <span class="sc">+</span> run <span class="sc">+</span> run<span class="sc">*</span>D <span class="sc">|</span><span class="dv">0</span> <span class="sc">|</span> <span class="dv">0</span> <span class="sc">|</span> id_munic, <span class="at">data=</span>data.brasil)</span>
<span id="cb16-3"><a></a></span>
<span id="cb16-4"><a></a><span class="co">#O una combinación de no linealidades y cambios de pendiente</span></span>
<span id="cb16-5"><a></a>rd4 <span class="ot">&lt;-</span> <span class="fu">felm</span>(cand_winner <span class="sc">~</span> D  <span class="sc">+</span> run <span class="sc">+</span> <span class="fu">I</span>(run<span class="sc">^</span><span class="dv">2</span>) <span class="sc">+</span> run<span class="sc">*</span>D <span class="sc">+</span> <span class="fu">I</span>(run<span class="sc">^</span><span class="dv">2</span>)<span class="sc">*</span>D <span class="sc">|</span><span class="dv">0</span> <span class="sc">|</span> <span class="dv">0</span> <span class="sc">|</span> id_munic, <span class="at">data=</span>data.brasil)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column tiny" style="width:50%;">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
   felm(formula = cand_winner ~ D + run + I(run^2) | 0 | 0 | id_munic,      data = data.brasil) 

Residuals:
    Min      1Q  Median      3Q     Max 
-24.731 -18.468  -6.159  -1.190  99.814 

Coefficients:
             Estimate Cluster s.e. t value Pr(&gt;|t|)    
(Intercept) 7.845e+00    4.415e-01  17.769  &lt; 2e-16 ***
D           7.450e+00    9.370e-01   7.951 1.94e-15 ***
run         1.855e-01    1.596e-02  11.619  &lt; 2e-16 ***
I(run^2)    9.613e-05    3.043e-04   0.316    0.752    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 30.9 on 20604 degrees of freedom
  (4646 observations deleted due to missingness)
Multiple R-squared(full model): 0.07226   Adjusted R-squared: 0.07213 
Multiple R-squared(proj model): 0.07226   Adjusted R-squared: 0.07213 
F-statistic(full model, *iid*):  535 on 3 and 20604 DF, p-value: &lt; 2.2e-16 
F-statistic(proj model): 747.2 on 3 and 4470 DF, p-value: &lt; 2.2e-16 </code></pre>
</div>
</div>
</div></div>
</section>

<section id="análisis-paramétrico-3" class="title-slide slide level1 center">
<h1>Análisis paramétrico</h1>
<div class="columns">
<div class="column" style="width:50%;">
<ul>
<li>Para un resumen de los resultados puedo usar <em>stargazer</em></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a></a>tab1 <span class="ot">&lt;-</span> <span class="fu">stargazer</span>(rd1, rd2, rd3, rd4,</span>
<span id="cb18-2"><a></a>          <span class="at">title=</span><span class="st">"Comparación de especificaciones de RD"</span>, <span class="at">type=</span><span class="st">"text"</span>, </span>
<span id="cb18-3"><a></a>          <span class="at">df=</span><span class="cn">FALSE</span>, <span class="at">digits=</span><span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column tiny" style="width:50%;">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code> [1] ""                                                     
 [2] "Comparación de especificaciones de RD"                
 [3] "====================================================="
 [4] "                           Dependent variable:       "
 [5] "                    ---------------------------------"
 [6] "                               cand_winner           "
 [7] "                      (1)     (2)      (3)     (4)   "
 [8] "-----------------------------------------------------"
 [9] "D                   7.45*** 7.45***  7.45*** 10.46***"
[10] "                    (0.94)   (0.94)  (0.94)   (1.40) "
[11] "                                                     "
[12] "run                 0.19*** 0.19***  0.21*** 0.41*** "
[13] "                    (0.02)   (0.02)  (0.01)   (0.06) "
[14] "                                                     "
[15] "I(run2)                      0.0001          0.004***"
[16] "                            (0.0003)         (0.001) "
[17] "                                                     "
[18] "D:run                                 -0.04  -0.85***"
[19] "                                     (0.03)   (0.12) "
[20] "                                                     "
[21] "D:I(run2)                                    0.01*** "
[22] "                                             (0.003) "
[23] "                                                     "
[24] "Constant            7.92*** 7.84***  8.42*** 9.93*** "
[25] "                    (0.48)   (0.44)  (0.48)   (0.74) "
[26] "                                                     "
[27] "-----------------------------------------------------"
[28] "Observations        20,608   20,608  20,608   20,608 "
[29] "R2                   0.07     0.07    0.07     0.08  "
[30] "Adjusted R2          0.07     0.07    0.07     0.07  "
[31] "Residual Std. Error  30.90   30.90    30.90   30.86  "
[32] "====================================================="
[33] "Note:                     *p&lt;0.1; **p&lt;0.05; ***p&lt;0.01"</code></pre>
</div>
</div>
</div></div>
</section>

<section id="resultados" class="title-slide slide level1 center">
<h1>Resultados</h1>

<img data-src="figures/RDrunnerup_brazil_regression.png" style="width:100.0%" class="r-stretch quarto-figure-center"><p class="caption">Fuente: Anagol &amp; Fujiwara (2016)</p><ul>
<li><p>Vemos las consecuencias de elegir un ancho de ventana más pequeño</p>
<ul>
<li><p>El resultado con un ancho de ventana con la muestra completa es de un efecto de 10.46 (error estándar de 1.40)</p></li>
<li><p>Con un ancho de ventana de alrededor de 6 puntos porcentuales entre el primer y segundo lugar el error es de 2.54</p></li>
</ul></li>
</ul>
</section>

<section id="rdrobust" class="title-slide slide level1 center">
<h1><em>rdrobust</em></h1>
<div class="columns">
<div class="column" style="width:50%;">
<ul>
<li><p>Hay toda una literatura para analizar el <em>trade-off</em> entre sesgo y varianza en la elección del ancho de ventana</p></li>
<li><p><a href="https://rdpackages.github.io/references/Calonico-Cattaneo-Titiunik_2015_R.pdf">Calonic, Cattaneo &amp; Titiunik, (2015)</a> proponen distintas formas de implementar algoritmos para estimar la discontinudad de la regresión con procedimientos totalmente dependiente de los datos (<em>data driven</em>), <em>rdrobust</em></p></li>
<li><p>Una de las funciones más útiles de <em>rdrobust</em> es crear el gráfico de la discontinuidad, usando un polinomio de orden 4 por defecto</p></li>
</ul>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a></a>rdres <span class="ot">&lt;-</span> <span class="fu">rdplot</span>(<span class="at">y =</span> data.brasil<span class="sc">$</span>cand_winner, <span class="at">x =</span> data.brasil<span class="sc">$</span>run, <span class="at">title =</span> <span class="st">"Efecto seguidor"</span>,</span>
<span id="cb20-2"><a></a>        <span class="at">y.label =</span> <span class="st">"Probabilidad de ganar en t+1"</span>,</span>
<span id="cb20-3"><a></a>        <span class="at">x.label =</span> <span class="st">"Distancia con respecto al 3er lugar en t"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div></div>
</section>

<section id="rdrobust-1" class="title-slide slide level1 center">
<h1><em>rdrobust</em></h1>
<div class="columns">
<div class="column" style="width:50%;">
<ul>
<li>Nos da detalles de cómo realiza la estimación y la selección del número de <em>bins</em></li>
</ul>
<div class="tiny">
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a></a><span class="fu">summary</span>(rdres)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div><div class="column" style="width:50%;">
<ul>
<li>Pueden personalizar su gráfico para hacerlo mucho mejor que la versión por defecto</li>
</ul>
<div class="cell">
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="figures/unnamed-chunk-32-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
</div></div>
</section>

<section id="rdrobust-2" class="title-slide slide level1 center">
<h1><em>rdrobust</em></h1>
<ul>
<li><p>Otra función es <em>rdselect</em>, que permite la estimación del ancho de banda óptimo</p></li>
<li><p>Hay un <em>trade-off</em> entre sesgo y varianza en la selee</p></li>
<li><p>Entre más grande sea la ventana, tenemos más observaciones y nuestros estimadores serán más precisos</p></li>
<li><p>Pero al mismo tiempo, entre más grande sea la ventana, más grande será el sesgo en la estimación de la pendiente de la línea de regresión al incluir observaciones cada vez más disimiles</p></li>
<li><p>Esta teoría esta formalizada en <a href="https://watermark.silverchair.com/rdr043.pdf?token=AQECAHi208BE49Ooan9kkhW_Ercy7Dm3ZL_9Cf3qfKAc485ysgAAAvwwggL4BgkqhkiG9w0BBwagggLpMIIC5QIBADCCAt4GCSqGSIb3DQEHATAeBglghkgBZQMEAS4wEQQMNLn6ofuEpZYIbPhSAgEQgIICr_9ZaTO9ZtUyeddqejFel2IauNOEoeJKXH5QDHk3IgFt03mG523iBXeq4wIS5CBcK1W7AjY4H3-kJb6r2H09xeES5zsTEXnhxrKoyFmOnWDjj679CIRFcQkZIzasP83tUkwZM0LVPjiVeJAC-HZiR3D1h75wwgwK1od1oycJIc2wZRxcgr4QeUhWtpe6JO34YqiDPOYN7sMSqfVdwXJS53-EXnr0qCQM9PFY5T8cxeDDGhEXhG0DVs3lTwzHDZEbbX8-7EkLeBMaic7aqNaQgiQuc9DaLM1m23p9cpW0JeaiLLvdKm13hHLP3csRaf_TVKFCGGADjweQYGu49CTdNhnDbFyh0W0eVDirPndKSM-2REG7Y-6AZCeCbYl3TmfBLpIXDjN3pPAzLJmbWbik6vrvv9n6if_1eT2CjD3wMRxY01jFHYRZaXlttxTOWS3uBkNo0hNtHZLdvgw6tXH6yA38TPXfG4RIA3JfKtDOGL-9Ph7P02tSvjF2YSjGmoBo9IRjyhgL_7Ur_saa4_z2NWx-FCOmDVGSL2cxG1Nkam58oF7R0aochpxm1VUp1LYizL3UzuhpG_KpRJ1zSQGGXyCpV5gc8HZQ8p-nhnY5wtUSZ5qgILv6sDsccldEJ90LbmSz5fdlPo7X45pYT60oid5aDJql3noGb_UW2KwAXgVxqMSfCTvCAj4TgQna3LtcWWbye0whzQzC1C7Ctu0NuEMt9_0rD-YXnJj69HV-lz7dPKgIEur0IhW_Nq9hPg_EfiWnm8HbUIAiH0OujoTGB2mR-wYYOp_GwXLoCc0ABqX36IdUQIDdgw8rSE0hIAhtD2nMKnwdDzGGKATehLPFR-3tlTWnWGrHiPJVfsFHIiSS5jkRqH349-9nIiRdRDSYiqibOiXHsSP5TUTpi8iAig">Imbens y Kalyanaraman (2012)</a></p></li>
</ul>
</section>

<section id="rdrobust-3" class="title-slide slide level1 center">
<h1><em>rdrobust</em></h1>
<ul>
<li>En la <em>antiguedad</em>, es decir, cuando revisé y repliqué por primera vez este artículo, la función <em>rdbwselect</em> en Stata permitía recuperar el ancho de banda óptimo aquí reportado (12.57)</li>
</ul>

<img data-src="figures/RDrunnerup_brazil_regression.png" style="width:100.0%" class="r-stretch quarto-figure-center"><p class="caption">Fuente: Anagol &amp; Fujiwara (2016)</p></section>

<section id="rdrobust-4" class="title-slide slide level1 center">
<h1><em>rdrobust</em></h1>
<div class="columns">
<div class="column" style="width:50%;">
<ul>
<li><p>Usando <em>rdbwselect</em> se pueden calcular distintos anchos de ventana</p></li>
<li><p>Después de las varias actualizaciones al paquete, ya no he podido obtener exactamente el mismo resultado</p></li>
</ul>
</div><div class="column tidy" style="width:50%;">
<div class="cell" data-layout-align="center">
<div class="cell-output cell-output-stdout">
<pre><code>Call: rdbwselect

Number of Obs.                20608
BW type                         All
Kernel                      Uniform
VCE method                       NN

Number of Obs.                10304        10304
Order est. (p)                    1            1
Order bias  (q)                   2            2
Unique Obs.                   10292        10292

=======================================================
                  BW est. (h)    BW bias (b)
            Left of c Right of c  Left of c Right of c
=======================================================
     mserd    11.398     11.398     19.626     19.626
    msetwo    17.883     10.568     31.155     18.697
    msesum    13.231     13.231     22.733     22.733
  msecomb1    11.398     11.398     19.626     19.626
  msecomb2    13.231     11.398     22.733     19.626
     cerrd     7.232      7.232     19.626     19.626
    certwo    11.347      6.705     31.155     18.697
    cersum     8.395      8.395     22.733     22.733
  cercomb1     7.232      7.232     19.626     19.626
  cercomb2     8.395      7.232     22.733     19.626
=======================================================</code></pre>
</div>
</div>
</div></div>
</section>

<section id="rdrobust-5" class="title-slide slide level1 center">
<h1><em>rdrobust</em></h1>
<div class="columns">
<div class="column" style="width:50%;">
<ul>
<li>Noten que si especificamos el ancho de ventana de 12.57, obtenemos el resultado preferido por los autores en el artículo</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a></a>rd5 <span class="ot">&lt;-</span> <span class="fu">felm</span>(cand_winner <span class="sc">~</span> D  <span class="sc">+</span> run <span class="sc">|</span><span class="dv">0</span> <span class="sc">|</span> <span class="dv">0</span> <span class="sc">|</span> id_munic, <span class="at">data=</span><span class="fu">subset</span>(data.brasil,bw<span class="sc">&lt;</span><span class="fl">12.57</span>))</span>
<span id="cb23-2"><a></a>rd6 <span class="ot">&lt;-</span> <span class="fu">felm</span>(cand_winner <span class="sc">~</span> D  <span class="sc">+</span> run <span class="sc">|</span><span class="dv">0</span> <span class="sc">|</span> <span class="dv">0</span> <span class="sc">|</span> id_munic, <span class="at">data=</span><span class="fu">subset</span>(data.brasil,bw<span class="sc">&lt;</span><span class="fl">12.57</span><span class="sc">/</span><span class="dv">2</span>))</span>
<span id="cb23-3"><a></a>rd7 <span class="ot">&lt;-</span> <span class="fu">felm</span>(cand_winner <span class="sc">~</span> D  <span class="sc">+</span> run <span class="sc">|</span><span class="dv">0</span> <span class="sc">|</span> <span class="dv">0</span> <span class="sc">|</span> id_munic, <span class="at">data=</span><span class="fu">subset</span>(data.brasil,bw<span class="sc">&lt;</span><span class="fl">12.57</span><span class="sc">*</span><span class="dv">2</span>))</span>
<span id="cb23-4"><a></a></span>
<span id="cb23-5"><a></a>tab2 <span class="ot">&lt;-</span> <span class="fu">stargazer</span>(rd5, rd6, rd7,</span>
<span id="cb23-6"><a></a>          <span class="at">title=</span><span class="st">"Comparación de especificaciones de RD (2)"</span>, <span class="at">type=</span><span class="st">"text"</span>, </span>
<span id="cb23-7"><a></a>          <span class="at">df=</span><span class="cn">FALSE</span>, <span class="at">digits=</span><span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column tiny" style="width:50%;">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code> [1] ""                                                 
 [2] "Comparación de especificaciones de RD (2)"        
 [3] "================================================="
 [4] "                         Dependent variable:     "
 [5] "                    -----------------------------"
 [6] "                             cand_winner         "
 [7] "                       (1)       (2)       (3)   "
 [8] "-------------------------------------------------"
 [9] "D                    8.31***   7.01***   8.84*** "
[10] "                     (1.81)    (2.54)    (1.29)  "
[11] "                                                 "
[12] "run                   0.18      0.36     0.14*** "
[13] "                     (0.13)    (0.35)    (0.04)  "
[14] "                                                 "
[15] "Constant             8.86***   9.89***   7.67*** "
[16] "                     (0.94)    (1.34)    (0.67)  "
[17] "                                                 "
[18] "-------------------------------------------------"
[19] "Observations          5,946     3,136    10,482  "
[20] "R2                    0.02      0.02      0.04   "
[21] "Adjusted R2           0.02      0.02      0.04   "
[22] "Residual Std. Error   33.24     33.76     32.01  "
[23] "================================================="
[24] "Note:                 *p&lt;0.1; **p&lt;0.05; ***p&lt;0.01"</code></pre>
</div>
</div>
</div></div>
</section>

<section id="más-materiales" class="title-slide slide level1 center">
<h1>Más materiales</h1>
<ul>
<li>Consideren echarle un ojo al tutorial que Matias Catteneo dio <a href="https://www.chamberlainseminar.org/past-seminars/autumn-2020#h.41tsl12q6tcb">en el Chamberlain Seminar</a></li>
</ul>
<div class="center">
<iframe width="560" height="315" src="https://www.youtube.com/embed/rKH88HK0S-o" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="">
</iframe>
</div>
<ul>
<li>El tutorial está en Stata, pero las ideas son fácilmente trasladadas a cualquier software</li>
</ul>
</section>

<section id="próxima-sesión" class="title-slide slide level1 center">
<h1>Próxima sesión</h1>
<ul>
<li><p>Empezaremos a estudiar control sintético</p></li>
<li><p>Usaremos un par de clásicos para introducir el concepto (de hecho replicarán el primero en la tarea 3) y dar la formulación básica del modelo</p>
<ul>
<li><p>Abadie, A., Diamond, A., &amp; Hainmueller, J. (2010). Synthetic control methods for comparative case studies: Estimating the effect of California’s tobacco control program. <em>Journal of the American statistical Association</em>, 105(490), 493-505.</p></li>
<li><p>Abadie, A., Diamond, A., &amp; Hainmueller, J. (2015). Comparative politics and the synthetic control method. <em>American Journal of Political Science</em>, 59(2), 495-510.</p></li>
</ul></li>
<li><p>El resumen de lo que deben saber está en</p>
<ul>
<li>Abadie, A. (2019). Using synthetic controls: Feasibility, data requirements, and methodological aspects. <em>Journal of Economic Literature</em>.</li>
</ul></li>
</ul>
</section>

<section id="section" class="title-slide slide level1 center middle">
<h1></h1>
<p>Presentación creada usando el paquete <a href="https://github.com/yihui/xaringan"><strong>xaringan</strong></a> en R.</p>
<p>El <em>chakra</em> viene de <a href="https://remarkjs.com">remark.js</a>, <a href="http://yihui.org/knitr"><strong>knitr</strong></a>, y <a href="https://rmarkdown.rstudio.com">R Markdown</a>.</p>
<p>Material de clase en versión preliminar.</p>
<p><strong>No reproducir, no distribuir, no citar.</strong></p>


</section>
    </div>
  <div class="quarto-auto-generated-content" style="display: none;">
<p><img src="https://d1yjjnpx0p53s8.cloudfront.net/styles/logo-thumbnail/s3/122010/logo_cide_verde.png?itok=NUstTkpt" class="slide-logo"></p>
<div class="footer footer-default">

</div>
</div></div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="../site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="../site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="../site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="../site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="../site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="../site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="../site_libs/revealjs/plugin/search/search.js"></script>
  <script src="../site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="../site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'jumpToSlide': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleScrollView(event)\"><kbd>r</kbd> Scroll View Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1600,

        height: 900,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    

    <script>

      // htmlwidgets need to know to resize themselves when slides are shown/hidden.

      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current

      // slide changes (different for each slide format).

      (function () {

        // dispatch for htmlwidgets

        function fireSlideEnter() {

          const event = window.document.createEvent("Event");

          event.initEvent("slideenter", true, true);

          window.document.dispatchEvent(event);

        }

    

        function fireSlideChanged(previousSlide, currentSlide) {

          fireSlideEnter();

    

          // dispatch for shiny

          if (window.jQuery) {

            if (previousSlide) {

              window.jQuery(previousSlide).trigger("hidden");

            }

            if (currentSlide) {

              window.jQuery(currentSlide).trigger("shown");

            }

          }

        }

    

        // hookup for slidy

        if (window.w3c_slidy) {

          window.w3c_slidy.add_observer(function (slide_num) {

            // slide_num starts at position 1

            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);

          });

        }

    

      })();

    </script>

    

    <script id="quarto-html-after-body" type="application/javascript">
      window.document.addEventListener("DOMContentLoaded", function (event) {
        const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
        tabsets.forEach(function(tabset) {
          const tabby = new Tabby('#' + tabset.id);
        });
        const isCodeAnnotation = (el) => {
          for (const clz of el.classList) {
            if (clz.startsWith('code-annotation-')) {                     
              return true;
            }
          }
          return false;
        }
        const onCopySuccess = function(e) {
          // button target
          const button = e.trigger;
          // don't keep focus
          button.blur();
          // flash "checked"
          button.classList.add('code-copy-button-checked');
          var currentTitle = button.getAttribute("title");
          button.setAttribute("title", "Copied!");
          let tooltip;
          if (window.bootstrap) {
            button.setAttribute("data-bs-toggle", "tooltip");
            button.setAttribute("data-bs-placement", "left");
            button.setAttribute("data-bs-title", "Copied!");
            tooltip = new bootstrap.Tooltip(button, 
              { trigger: "manual", 
                customClass: "code-copy-button-tooltip",
                offset: [0, -8]});
            tooltip.show();    
          }
          setTimeout(function() {
            if (tooltip) {
              tooltip.hide();
              button.removeAttribute("data-bs-title");
              button.removeAttribute("data-bs-toggle");
              button.removeAttribute("data-bs-placement");
            }
            button.setAttribute("title", currentTitle);
            button.classList.remove('code-copy-button-checked');
          }, 1000);
          // clear code selection
          e.clearSelection();
        }
        const getTextToCopy = function(trigger) {
            const codeEl = trigger.previousElementSibling.cloneNode(true);
            for (const childEl of codeEl.children) {
              if (isCodeAnnotation(childEl)) {
                childEl.remove();
              }
            }
            return codeEl.innerText;
        }
        const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
          text: getTextToCopy
        });
        clipboard.on('success', onCopySuccess);
        if (window.document.getElementById('quarto-embedded-source-code-modal')) {
          const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
            text: getTextToCopy,
            container: window.document.getElementById('quarto-embedded-source-code-modal')
          });
          clipboardModal.on('success', onCopySuccess);
        }
          var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
          var mailtoRegex = new RegExp(/^mailto:/);
            var filterRegex = new RegExp('/' + window.location.host + '/');
          var isInternal = (href) => {
              return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
          }
          // Inspect non-navigation links and adorn them if external
         var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
          for (var i=0; i<links.length; i++) {
            const link = links[i];
            if (!isInternal(link.href)) {
              // undo the damage that might have been done by quarto-nav.js in the case of
              // links that we want to consider external
              if (link.dataset.originalHref !== undefined) {
                link.href = link.dataset.originalHref;
              }
            }
          }
        function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
          const config = {
            allowHTML: true,
            maxWidth: 500,
            delay: 100,
            arrow: false,
            appendTo: function(el) {
                return el.closest('section.slide') || el.parentElement;
            },
            interactive: true,
            interactiveBorder: 10,
            theme: 'light-border',
            placement: 'bottom-start',
          };
          if (contentFn) {
            config.content = contentFn;
          }
          if (onTriggerFn) {
            config.onTrigger = onTriggerFn;
          }
          if (onUntriggerFn) {
            config.onUntrigger = onUntriggerFn;
          }
            config['offset'] = [0,0];
            config['maxWidth'] = 700;
          window.tippy(el, config); 
        }
        const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
        for (var i=0; i<noterefs.length; i++) {
          const ref = noterefs[i];
          tippyHover(ref, function() {
            // use id or data attribute instead here
            let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
            try { href = new URL(href).hash; } catch {}
            const id = href.replace(/^#\/?/, "");
            const note = window.document.getElementById(id);
            if (note) {
              return note.innerHTML;
            } else {
              return "";
            }
          });
        }
        const findCites = (el) => {
          const parentEl = el.parentElement;
          if (parentEl) {
            const cites = parentEl.dataset.cites;
            if (cites) {
              return {
                el,
                cites: cites.split(' ')
              };
            } else {
              return findCites(el.parentElement)
            }
          } else {
            return undefined;
          }
        };
        var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
        for (var i=0; i<bibliorefs.length; i++) {
          const ref = bibliorefs[i];
          const citeInfo = findCites(ref);
          if (citeInfo) {
            tippyHover(citeInfo.el, function() {
              var popup = window.document.createElement('div');
              citeInfo.cites.forEach(function(cite) {
                var citeDiv = window.document.createElement('div');
                citeDiv.classList.add('hanging-indent');
                citeDiv.classList.add('csl-entry');
                var biblioDiv = window.document.getElementById('ref-' + cite);
                if (biblioDiv) {
                  citeDiv.innerHTML = biblioDiv.innerHTML;
                }
                popup.appendChild(citeDiv);
              });
              return popup.innerHTML;
            });
          }
        }
      });
      </script>
    

</body></html>