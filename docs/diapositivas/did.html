<!DOCTYPE html>
<html lang="en"><head>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-html/tabby.min.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.5.57">

  <meta name="author" content="Irvin Rojas">
  <title>Evaluación de Programas 2024 – Diferencia en diferencias</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="../site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="../site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; font-weight: bold; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="../site_libs/revealjs/dist/theme/quarto.css">
  <link href="../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-titled.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-titled) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-titled.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-titled .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-titled .callout-title  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-titled.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-titled.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-title {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-title {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-title {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-titled .callout-body > .callout-content > :last-child {
    padding-bottom: 0.5rem;
    margin-bottom: 0;
  }

  .callout.callout-titled .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-titled) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-title {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-title {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-title {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-title {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-title {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">Diferencia en diferencias</h1>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Irvin Rojas 
</div>
</div>
</div>

</section>
<section>
<section id="diferencia-en-diferencias" class="title-slide slide level1 center">
<h1>Diferencia en diferencias</h1>
<ul>
<li><p>La estrategia de diferencia en diferencias especifica las condiciones bajo las cuales es posible identificar el efecto del tratamiento al comparar unidades tratadas y no tratadas, cuando se dispone de información antes y después de la intervención</p></li>
<li><p>Esta estrategia es ampliamente utilizada para analizar el efecto de leyes y políticas que afectan a un grupo de individuos al mismo tiempo</p></li>
<li><p>Además, constituye el fundamento para otro de los métodos en donde la investigación actual es muy activa, el control sintético</p></li>
</ul>
</section>
<section id="introducción" class="slide level2">
<h2>Introducción</h2>
<div class="columns">
<div class="column" style="width:50%;">
<ul>
<li><p>Angrist &amp; Pischke (2014) describen lo sucedido con el sector bancario en Mississippi durante la Gran Depresión</p></li>
<li><p>En EUA, la FED tiene 12 bancos regionales y cada uno tiene autonomía para tomar ciertas decisiones de política monetaria</p></li>
<li><p>En particular, Mississippi tiene una parte del estado bajo el mando del distrito 6 (Atlanta) y la otra mitad en el distrito 8 (San Luis)</p></li>
</ul>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="banks_map.png"></p>
</figure>
</div>
</div>
</div>
</div></div>
</section>
<section id="diferencia-en-diferencias-1" class="slide level2">
<h2>Diferencia en diferencias</h2>
<ul>
<li>Como respuesta a las corridas bancarias que caracterizaron la crisis de 1929, los bancos comerciales en Mississippi se vieron expuestos a dos políticas distintas</li>
</ul>
<p><span class="math display">\[
T=
\begin{cases}
1\quad\quad \text{proveer liquidez adicional (distrito 6)} \\
0\quad\quad \text{dar igual o menos liquidez (distrito 8)} \\
\end{cases}
\]</span></p>
<ul>
<li><p>Si estamos interesados en la cantidad de bancos que sobrevivieron y decir algo sobre qué política es más efectiva, ¿qué podemos hacer?</p></li>
<li><p>Una primera respuesta sería contar la diferencia después de la crisis:</p></li>
</ul>
<table class="caption-top">
<thead>
<tr class="header">
<th style="text-align: center;">Distrito 8</th>
<th style="text-align: center;">Distrito 6</th>
<th style="text-align: center;">Diferencia</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><span class="math inline">\(T=0\)</span></td>
<td style="text-align: center;"><span class="math inline">\(T=1\)</span></td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td style="text-align: center;">132 bancos</td>
<td style="text-align: center;">121 bancos</td>
<td style="text-align: center;">11 bancos</td>
</tr>
</tbody>
</table>
<ul>
<li><p>Pareciera que la política de proveer liquidez, <em>easy money</em>, <strong>causó</strong> que quebraran más bancos</p></li>
<li><p>Sin embargo, esta comparación claramente ignora las condiciones iniciales</p></li>
</ul>
</section>
<section id="representación-gráfica" class="slide level2">
<h2>Representación gráfica</h2>
<ul>
<li>Gráficamente observamos</li>
</ul>
<div class="cell columns column-output-location">
<div class="column">
<div class="sourceCode cell-code" id="cb1" data-code-line-numbers="40"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a></a>banks<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"banks_mm.csv"</span>,</span>
<span id="cb1-2"><a></a>                       <span class="at">locale =</span> <span class="fu">locale</span>(<span class="at">encoding =</span> <span class="st">"latin1"</span>))</span>
<span id="cb1-3"><a></a>banks <span class="ot">&lt;-</span> banks <span class="sc">%&gt;%</span></span>
<span id="cb1-4"><a></a>  <span class="fu">filter</span>(<span class="fu">month</span>(date) <span class="sc">==</span> <span class="dv">7</span>L,</span>
<span id="cb1-5"><a></a>         <span class="fu">mday</span>(date) <span class="sc">==</span> <span class="dv">1</span>L) <span class="sc">%&gt;%</span></span>
<span id="cb1-6"><a></a>  <span class="fu">mutate</span>(<span class="at">year =</span> <span class="fu">year</span>(date)) <span class="sc">%&gt;%</span></span>
<span id="cb1-7"><a></a>  <span class="fu">select</span>(year,</span>
<span id="cb1-8"><a></a>         <span class="fu">matches</span>(<span class="st">"bi[ob][68]"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb1-9"><a></a>  <span class="fu">select</span>(year,bib6,bib8) <span class="sc">%&gt;%</span> </span>
<span id="cb1-10"><a></a>  <span class="fu">gather</span>(distrito,banks,bib6<span class="sc">:</span>bib8) <span class="sc">%&gt;%</span> </span>
<span id="cb1-11"><a></a>  <span class="fu">mutate</span>(<span class="at">treatment=</span><span class="fu">ifelse</span>(distrito<span class="sc">==</span><span class="st">"bib6"</span>,<span class="dv">1</span>,<span class="dv">0</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb1-12"><a></a>  <span class="fu">mutate</span>(<span class="at">post=</span><span class="fu">ifelse</span>(year<span class="sc">&gt;=</span><span class="dv">1931</span>,<span class="dv">1</span>,<span class="dv">0</span>))</span>
<span id="cb1-13"><a></a></span>
<span id="cb1-14"><a></a>banks <span class="sc">%&gt;%</span> </span>
<span id="cb1-15"><a></a>  <span class="fu">mutate</span>(<span class="at">banks=</span><span class="fu">ifelse</span>(year<span class="sc">==</span><span class="dv">1930</span> <span class="sc">|</span> year<span class="sc">==</span><span class="dv">1931</span>,banks,<span class="cn">NA</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb1-16"><a></a>  <span class="fu">filter</span>(year <span class="sc">&lt;=</span> <span class="dv">1932</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb1-17"><a></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>year, <span class="at">y=</span>banks, <span class="at">color=</span>distrito)) <span class="sc">+</span></span>
<span id="cb1-18"><a></a>  <span class="fu">geom_line</span>(<span class="at">size=</span><span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb1-19"><a></a>  <span class="fu">scale_y_continuous</span>(<span class="at">limits=</span><span class="fu">c</span>(<span class="dv">100</span>,<span class="dv">180</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div><div class="column">
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="did_files/figure-revealjs/unnamed-chunk-2-1.png" width="960"></p>
</figure>
</div>
</div>
</div></div>
</section>
<section id="representación-gráfica-1" class="slide level2">
<h2>Representación gráfica</h2>
<ul>
<li>Del distrito 8 (no tratado) podemos obtener la pendiente:</li>
</ul>
<p><span class="math display">\[m_{NT}=\frac{Y_{8,post}-Y_{8,pre}}{X_{8,post}-X_{8,pre}}=\frac{132-165}{1931-1930}=-33\]</span></p>
<ul>
<li>Y entonces, podemos encontrar cuál hubiera sido el número de bancos en el distrio 6 (tratado) si hubiera seguido la pendiente del distrito 8:</li>
</ul>
<p><span class="math display">\[m_T=\frac{\tilde{Y}_{6,post}-Y_{6,pre}}{X_{6,post}-X_{6,pre}}=\frac{\tilde{Y}_{6,post}-135}{1931-1930}=-33\]</span> - Por tanto, <span class="math inline">\(\tilde{Y}_{6,post}=102\)</span> es el número de bancos que el distrito 6 hubiera tenido si hubiera seguido una tendencia paralela a la del distrito 8</p>
</section>
<section id="representación-gráfica-2" class="slide level2">
<h2>Representación gráfica</h2>
<ul>
<li>Podemos contruir el contrafactual para el distrito 6 observando la pendiente del distrito 8</li>
</ul>
<div class="cell columns column-output-location">
<div class="column">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a></a>banks_contrafactual <span class="ot">&lt;-</span> banks <span class="sc">%&gt;%</span></span>
<span id="cb2-2"><a></a>    <span class="fu">mutate</span>(<span class="at">banks=</span><span class="fu">ifelse</span>(year<span class="sc">==</span><span class="dv">1930</span> <span class="sc">|</span> year<span class="sc">==</span><span class="dv">1931</span>,banks,<span class="cn">NA</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb2-3"><a></a>  <span class="fu">filter</span>(year <span class="sc">&lt;=</span> <span class="dv">1932</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb2-4"><a></a>  <span class="fu">mutate</span>(<span class="at">tipo=</span><span class="st">"observado"</span>)</span>
<span id="cb2-5"><a></a>  </span>
<span id="cb2-6"><a></a>d6_contrafactual <span class="ot">&lt;-</span> banks_contrafactual <span class="sc">%&gt;%</span> </span>
<span id="cb2-7"><a></a>  <span class="fu">filter</span>(distrito<span class="sc">==</span><span class="st">"bib6"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb2-8"><a></a>  <span class="fu">mutate</span>(<span class="at">banks=</span><span class="fu">ifelse</span>(year<span class="sc">==</span><span class="dv">1931</span>,<span class="dv">102</span>,banks),</span>
<span id="cb2-9"><a></a>         <span class="at">tipo=</span><span class="st">"contrafactual"</span>)</span>
<span id="cb2-10"><a></a></span>
<span id="cb2-11"><a></a>banks_contrafactual <span class="ot">&lt;-</span> <span class="fu">rbind</span>(banks_contrafactual,d6_contrafactual)</span>
<span id="cb2-12"><a></a></span>
<span id="cb2-13"><a></a>dd_grafica <span class="ot">&lt;-</span> banks_contrafactual <span class="sc">%&gt;%</span> </span>
<span id="cb2-14"><a></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>year, <span class="at">y=</span>banks, <span class="at">color=</span>distrito, <span class="at">linetype=</span>tipo))<span class="sc">+</span></span>
<span id="cb2-15"><a></a>  <span class="fu">geom_line</span>(<span class="at">size=</span><span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb2-16"><a></a>  <span class="fu">scale_linetype_manual</span>(<span class="at">values=</span><span class="fu">c</span>(<span class="st">"dashed"</span>, <span class="st">"solid"</span>)) <span class="sc">+</span></span>
<span id="cb2-17"><a></a>  <span class="fu">scale_y_continuous</span>(<span class="at">limits=</span><span class="fu">c</span>(<span class="dv">100</span>,<span class="dv">180</span>)) </span>
<span id="cb2-18"><a></a></span>
<span id="cb2-19"><a></a></span>
<span id="cb2-20"><a></a>dd_grafica</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div><div class="column">
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="did_files/figure-revealjs/unnamed-chunk-3-1.png" width="960"></p>
</figure>
</div>
</div>
</div></div>
</section>
<section id="diferencia-en-diferencias-2" class="slide level2">
<h2>Diferencia en diferencias</h2>
<ul>
<li>Podemos dar así una primera definición de lo que es la diferencia en diferencias del número de bancos que sobrevivieron a la Gran Depresión en Mississippi</li>
</ul>
<p><span class="math display">\[
\begin{aligned}
\delta_{DID}&amp;=(Y_{6,post}-Y_{6,pre})-(Y_{8,post}-Y_{8,pre}) \\
&amp;=(Y_{6,1931}-Y_{6,1930})-(Y_{8,1931}-Y_{8,1930}) \\
&amp;=(121-135)-(132-165) \\
&amp;=-14+33 = 19
\end{aligned}
\]</span></p>
<ul>
<li><p>El estimador de DID toma en cuenta las diferencias inciales</p></li>
<li><p>En este caso, el distrito 8 ya tenía más bancos abiertos que el 6 antes de la crisis</p></li>
<li><p>DID construye un contrafactual para las unidades tratadas usando la pendiente de las unidades no tratadas</p></li>
</ul>
</section>
<section id="diferencia-en-diferencias-3" class="slide level2">
<h2>Diferencia en diferencias</h2>
<ul>
<li><p>El supuesto fundamental es el de <strong>tendencias comunes</strong>, es decir, que en ausencia del tratamiento, el grupo de tratamiento se hubiera comportado igual al grupo de control</p></li>
<li><p>Si hay varios puntos pre intervención, el supuesto de tendencias comunes puede probarse empíricamente</p></li>
</ul>
</section>
<section id="regresión-en-did" class="slide level2">
<h2>Regresión en DID</h2>
<ul>
<li><p>El método puede generalizarse a más periodos de tiempo</p></li>
<li><p>Aquí, una regresión nos permite identificar el efecto del tratamiento</p></li>
<li><p>Tenemos datos sobre el número de bancos en cada distrito en cada año (1929-1934)</p></li>
</ul>
<p><span class="math display">\[y_{dt}=\alpha+\beta T_d+\gamma POST_t + \delta_{r,DID}(T_d\times POST_t)+e_{dt}\]</span> - <span class="math inline">\(T_d\)</span> es una dummy para los distritos tratados (distrito 6 en este caso)</p>
<ul>
<li><p>Les llamamos <strong>efectos fijos individuales</strong> y sirven para controlar diferencias entre distritos que no cambian en el tiempo</p></li>
<li><p><span class="math inline">\(POST_t\)</span> es una dummy para los periodos post tratamiento (1931 en adelante)</p></li>
<li><p>Al término <span class="math inline">\(T_d\times POST_t\)</span> se le conoce como el <strong>término de interacción</strong>, que es una dummy igual a 1 para los distritos tratados en los años post intervención</p></li>
<li><p><span class="math inline">\(\delta_{r,DID}\)</span> es el estimador de DID del efecto del tratamiento</p></li>
</ul>
</section>
<section id="regresión-en-did-1" class="slide level2">
<h2>Regresión en DID</h2>
<ul>
<li><p>Usemos los datos del archivo <a href="banks_mm.csv">banks_mm.csv</a> que se utilizan en el libro</p></li>
<li><p>Es una forma muy básica de datos en panel: cada fila representa un distrito en un periodo de tiempo</p></li>
<li><p>Podemos identificar si cada fila pertenece a un distrito tratado o no o a un periodo posterior a al tratamiento o no</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a></a>banks</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 12 × 5
    year distrito banks treatment  post
   &lt;dbl&gt; &lt;chr&gt;    &lt;dbl&gt;     &lt;dbl&gt; &lt;dbl&gt;
 1  1929 bib6       141         1     0
 2  1930 bib6       135         1     0
 3  1931 bib6       121         1     1
 4  1932 bib6       113         1     1
 5  1933 bib6       102         1     1
 6  1934 bib6       102         1     1
 7  1929 bib8       169         0     0
 8  1930 bib8       165         0     0
 9  1931 bib8       132         0     1
10  1932 bib8       120         0     1
11  1933 bib8       111         0     1
12  1934 bib8       109         0     1</code></pre>
</div>
</div>
</section>
<section id="regresión-en-did-2" class="slide level2">
<h2>Regresión en DID</h2>
<ul>
<li>Estimemos la regresión que acabamos de motivar usando todos los periodos en el panel</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a></a>did_bank <span class="ot">&lt;-</span> <span class="fu">lm</span>(banks <span class="sc">~</span> treatment <span class="sc">+</span> post<span class="sc">+</span> treatment<span class="sc">*</span>post,</span>
<span id="cb5-2"><a></a>               <span class="at">data=</span>banks)</span>
<span id="cb5-3"><a></a></span>
<span id="cb5-4"><a></a><span class="fu">summary</span>(did_bank)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = banks ~ treatment + post + treatment * post, data = banks)

Residuals:
   Min     1Q Median     3Q    Max 
-9.000 -7.125  0.000  3.125 14.000 

Coefficients:
               Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)     167.000      6.190  26.980 3.83e-09 ***
treatment       -29.000      8.754  -3.313 0.010652 *  
post            -49.000      7.581  -6.464 0.000195 ***
treatment:post   20.500     10.721   1.912 0.092224 .  
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 8.754 on 8 degrees of freedom
Multiple R-squared:  0.8906,    Adjusted R-squared:  0.8496 
F-statistic: 21.71 on 3 and 8 DF,  p-value: 0.0003369</code></pre>
</div>
</div>
</section>
<section id="regresión-en-did-3" class="slide level2">
<h2>Regresión en DID</h2>
<ul>
<li>Noten que si solo usamos dos años, obtenemos exactamente lo que obtendríamos haciendo las diferencias <em>a mano</em></li>
</ul>
<p><span class="math display">\[\delta_{DiD}=(Y_{6,1931}-Y_{6,1930})-(Y_{8,1931}-Y_{8,1930})=19\]</span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a></a>did_bank2 <span class="ot">&lt;-</span> <span class="fu">lm</span>(banks <span class="sc">~</span> treatment <span class="sc">+</span> post<span class="sc">+</span> treatment<span class="sc">*</span>post,</span>
<span id="cb7-2"><a></a>               <span class="at">data=</span><span class="fu">filter</span>(banks,year<span class="sc">==</span><span class="dv">1930</span> <span class="sc">|</span> year<span class="sc">==</span><span class="dv">1931</span>))</span>
<span id="cb7-3"><a></a></span>
<span id="cb7-4"><a></a></span>
<span id="cb7-5"><a></a><span class="fu">summary</span>(did_bank2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = banks ~ treatment + post + treatment * post, data = filter(banks, 
    year == 1930 | year == 1931))

Residuals:
ALL 4 residuals are 0: no residual degrees of freedom!

Coefficients:
               Estimate Std. Error t value Pr(&gt;|t|)
(Intercept)         165        NaN     NaN      NaN
treatment           -30        NaN     NaN      NaN
post                -33        NaN     NaN      NaN
treatment:post       19        NaN     NaN      NaN

Residual standard error: NaN on 0 degrees of freedom
Multiple R-squared:      1, Adjusted R-squared:    NaN 
F-statistic:   NaN on 3 and 0 DF,  p-value: NA</code></pre>
</div>
</div>
</section>
<section id="violación-a-los-supuestos" class="slide level2">
<h2>Violación a los supuestos</h2>
<ul>
<li><p>Consideremos cosas que podrían salir mal con respecto al supuesto de tendencias paralelas</p></li>
<li><p>Supongamos que un tratamiento ocurre en el periodo marcado con la línea vertical, por ejemplo, un cambio en una legislación</p></li>
<li><p>En este ejemplo algo sucedió en Allatsea que produjo un cambio en la trayectoria de mortalidad antes del cambio en la legislación</p></li>
<li><p>El supuesto de tendencias paralelas sí se sostenía hasta antes de este cambio</p></li>
<li><p>Sin embargo, nuestra estrategia de DID atribuiría el efecto al cambio en la legislación cuando en realidad cuando ese cambio ocurrió ya nole pasó nada a Allatsea</p></li>
</ul>

<img data-src="trends_1.png" class="r-stretch"></section>
<section id="violación-a-los-supuestos-1" class="slide level2">
<h2>Violación a los supuestos</h2>
<ul>
<li><p>En este segundo ejemplo, el supuesto de tendencias paralelas pre intervención se viola</p></li>
<li><p>Aunque en el momento del cambio de la política, la línea de Allatsea es más inclinada, estimar esta relación por DID de nuevo atribuiría a la política diferencias que ya existían antes de la intervención</p></li>
</ul>

<img data-src="trends_2.png" class="r-stretch"></section>
<section id="violación-a-los-supuestos-2" class="slide level2">
<h2>Violación a los supuestos</h2>
<ul>
<li><p>En este tercer ejemplo hay tendencias que no son paralelas pre intervención</p></li>
<li><p>Sin embargo, después de la intervención, la trayectoria de Allatsea tiene una pendiente claramente más inclinada que antes de la intervención</p></li>
</ul>

<img data-src="trends_3.png" class="r-stretch"></section></section>
<section>
<section id="adopción-escalonada" class="title-slide slide level1 center">
<h1>Adopción escalonada</h1>

</section>
<section id="adopción-escalonada-en-la-antiguedad" class="slide level2">
<h2>Adopción escalonada en la <em>antiguedad</em></h2>
<ul>
<li><p>DID es uno de esos campos tan activos en la investigación que cosas que pensábamos superadas o completamente estudiadas se han modificado en los últimos años</p></li>
<li><p>En esta sección mostramos el tratamiento que MHE y MM dan a los problemas de adopción escalonada</p></li>
<li><p>La adopción escalonada ocurre cuando existen varios periodos de tratamiento y algunas unidades van siendo tratadas de forma desfasada</p></li>
<li><p>Por ejemplo, en Méxio las leyes de despenalización del aborto o las que reconocen las uniones entre personas del mismo sexo son buenos ejemplos de tratamientos con adopción escalonada</p></li>
<li><p>Hasta los trabajos de Goodman-Bacon (2021) y Chaisemartin &amp; D’Haultfœuille (2020), los problemas con adopción escalonada se abordaban econométricamente de la misma forma que hemos descrito hasta ahora, conocida como efectos fijos en bidireccionales (sí, suena horrible dicha traducción) o <em>two-way fixed effects</em></p></li>
<li><p>Esta sección presenta el tipo de tratamiento que hoy ya consideramos inapropiado</p></li>
<li><p>Más adelante se presentan alternativas para los problemas de adopción escalonada</p></li>
</ul>
</section>
<section id="edad-legal-para-beber-en-eua" class="slide level2">
<h2>Edad legal para beber en EUA</h2>
<ul>
<li><p>Diferencias en la edad legal para beber en Estados Unidos</p></li>
<li><p>¿Las restricciones a la edad mínima para comprar alcohol tienen un impacto en la mortalidad?</p></li>
<li><p>Alabama redujo la edad legal a 19 en 1975, mientras que, por ejemplo, Arkansas mantuvo la edad en 21</p></li>
<li><p>Tenemos datos de mortalidad de 1970 a 1983 para personas de entre 18 y 20 años</p></li>
<li><p>Lo que hemos aprendido hasta ahora nos sugiere estimar el impacto por DID comos sigue</p></li>
</ul>
<p><span class="math display">\[y_{st}=\alpha+\beta T_s+\gamma POST_t+\delta_{DID}(T_s\times POST_t)+e_{st}\]</span> - <span class="math inline">\(T_s\)</span> es una dummy igual a 0 para Arkansas en todos los periodos e igual a 1 para Alabama en todos los periodos</p>
<ul>
<li><p><span class="math inline">\(POST_t\)</span> es igual a cero para el periodo 1970-1975 e igual a 1 para el periodo 1976-1983</p></li>
<li><p><span class="math inline">\(T_s\times POST_t\)</span> es igual a 1 para las observaciones de Alabama en los años en los que la nueva política ya está en vigor</p></li>
</ul>
</section>
<section id="más-de-un-estado" class="slide level2">
<h2>Más de un estado</h2>
<ul>
<li><p>¿Por qué quedarnos solo con la comparación con Arkansas?</p></li>
<li><p>Podemos incluir más unidades que implementen cambios en la política en distintos momentos</p></li>
<li><p>En vez de <span class="math inline">\(POST_t\)</span> usamos efectos fijos por año</p></li>
<li><p>Y en vez de una dummy de tratamiento, incluimos efectos fijos por unidad</p></li>
<li><p>Además, en el cambio en la ley podría no ser el mismo</p>
<ul>
<li><p>Algunos estados mueven la edad a 18, otros a 19 y otros a 20</p></li>
<li><p>Podemos definir <span class="math inline">\(LEGAL_{st}\)</span> como la proporción de individuos de entre 18 y 20 años autorizados para beber en el estado <span class="math inline">\(s\)</span> y en el año <span class="math inline">\(t\)</span></p></li>
</ul></li>
</ul>
<p><span class="math display">\[y_{st}=\alpha+\delta_{DID}LEGAL_{st}+\sum_k\beta_k STATE_{ks}+\sum_j \gamma_j YEAR_{jt}+e_{st}\]</span></p>
</section>
<section id="estructura-de-datos-en-panel" class="slide level2">
<h2>Estructura de datos en panel</h2>
<ul>
<li><p>Los datos que acabamos de describir tienen una estructura de panel</p></li>
<li><p>La variable de panel es el estado <span class="math inline">\(s\)</span> y la variable de tiempo es el año <span class="math inline">\(t\)</span></p></li>
<li><p>En nuestros datos, cada estado se encuentra presente en varios años, y para cada estado y año sabemos la mortalidad y la fracción de personas de 18 a 20 años que pueden beber</p></li>
<li><p><strong>Efectos fijos</strong> <span class="math inline">\(STATE_{ks}\)</span>: diferencias entre estados que no cambian con el tiempo</p></li>
<li><p><strong>Efectos año</strong> <span class="math inline">\(YEAR_{jt}\)</span>: factores que afectan a todas las unidades por igual en un momento del tiempo</p></li>
</ul>
</section>
<section id="interpretación" class="slide level2">
<h2>Interpretación</h2>
<table class="caption-top">
<thead>
<tr class="header">
<th style="text-align: left;">Muertes por 100,000 habs.:</th>
<th style="text-align: center;"><span class="math inline">\(\hat{\delta}_{DID}\)</span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Todas</td>
<td style="text-align: center;">10.80</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: center;">(4.59)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Accidentes en vehículos</td>
<td style="text-align: center;">7.59</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: center;">(2.50)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Suicidio</td>
<td style="text-align: center;">0.59</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: center;">(0.59)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Causas internas</td>
<td style="text-align: center;">1.33</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: center;">(1.59)</td>
</tr>
</tbody>
</table>
<ul>
<li><p>La interpretación de los resultados es directa</p></li>
<li><p>El acceso a alcohol causa un incremento de casi 11 muertes adicionales por cada 100,000 habitantes y este efecto es estadísticamente significativo</p></li>
<li><p>No hay efectos donde no esperaríamos tenerlos</p></li>
</ul>
</section></section>
<section>
<section id="descomposición-de-goodman-bacon" class="title-slide slide level1 center">
<h1>Descomposición de Goodman-Bacon</h1>

</section>
<section id="qué-hace-el-estimador-de-twfe" class="slide level2">
<h2>¿Qué hace el estimador de TWFE?</h2>
<p>Consideremos el siguiente problema de adopción escalonada</p>
<ul>
<li>Observamos <span class="math inline">\(T\)</span> periodos</li>
<li><span class="math inline">\(k\)</span> denota la unidad tratada temprano</li>
<li><span class="math inline">\(l\)</span> denota la unidad tratada tarde</li>
<li>Denotamos <span class="math inline">\(\bar{D}_k\)</span> al tiempo que <span class="math inline">\(k\)</span> pasa tratado</li>
<li>Similarmente, <span class="math inline">\(\bar{D}_l\)</span></li>
<li><span class="math inline">\(n_k\)</span> es el número de unidades tratadas temprano</li>
<li><span class="math inline">\(n_l\)</span> es el número de unidades tratadas tarde</li>
<li><span class="math inline">\(n_U\)</span> es el número de unidades nunca tratadas</li>
<li>Para cualesquiera dos grupos <span class="math inline">\(a\)</span> y <span class="math inline">\(b\)</span>, <span class="math inline">\(a_{ab}=\frac{n_a}{n_a+n_b}\)</span></li>
</ul>
</section>
<section id="qué-hace-el-estimador-de-twfe-1" class="slide level2">
<h2>¿Qué hace el estimador de TWFE?</h2>

<img data-src="gb-decomposition-a.png" class="r-stretch"></section>
<section id="qué-hace-el-estimador-de-twfe-2" class="slide level2">
<h2>¿Qué hace el estimador de TWFE?</h2>
<p>Tenemos cuatro posibles comparaciones <span class="math inline">\(2x2\)</span></p>
<ul>
<li>Las comparaciones con las unidades nunca tratadas:</li>
</ul>
<p><span class="math display">\[\hat{\beta}_{jU}=\left(\bar{y}_j^{POST(j)}-\bar{y}_j^{PRE(j)}\right)-\left(\bar{y}_U^{POST(j)}-\bar{y}_U^{PRE(j)}\right),\;j=\{k,l\}\]</span></p>
<ul>
<li>La comparación entre <span class="math inline">\(k\)</span> y <span class="math inline">\(l\)</span> cuando <span class="math inline">\(k\)</span> es tratada, usando los periodos antes de que <span class="math inline">\(l\)</span> sea tratada</li>
</ul>
<p><span class="math display">\[\hat{\beta}^{k}_{kl}=\left(\bar{y}_k^{MID(k,l)}-\bar{y}_k^{PRE(k)}\right)-\left(\bar{y}_l^{MID(k,l)}-\bar{y}_l^{PRE(k)}\right)\]</span></p>
<ul>
<li>La comparación entre <span class="math inline">\(l\)</span> y <span class="math inline">\(k\)</span> cuando <span class="math inline">\(l\)</span> es tratada, usando los periodos después de que <span class="math inline">\(k\)</span> fue tratada</li>
</ul>
<p><span class="math display">\[\hat{\beta}^{l}_{kl}=\left(\bar{y}_l^{POST(l)}-\bar{y}_l^{MID(k,l)}\right)-\left(\bar{y}_k^{POST(l)}-\bar{y}_k^{MID(k,l)}\right)\]</span></p>
</section>
<section id="qué-hace-el-estimador-de-twfe-3" class="slide level2">
<h2>¿Qué hace el estimador de TWFE?</h2>

<img data-src="gb-decomposition-b.png" class="r-stretch"></section>
<section id="qué-hace-el-estimador-de-twfe-4" class="slide level2">
<h2>¿Qué hace el estimador de TWFE?</h2>
<p>Denotamos <span class="math inline">\(D_{it}=1\)</span> cuando la unidad <span class="math inline">\(i\)</span> es tratada en el periodo <span class="math inline">\(0\)</span></p>
<p>Por el teorema de Frisch-Waugh-Lovell sabemos que podemos <em>purgar</em> de efectos fijos a la variable <span class="math inline">\(D_{it}\)</span></p>
<p>Es decir, podemos estimar por MCO:</p>
<p><span class="math display">\[D_{it}=\sum_t \gamma_t P_t + \sum_i \pi S_i + \varepsilon_{it}\]</span></p>
<p>donde <span class="math inline">\(P_t\)</span> son dummies temporales y <span class="math inline">\(S_i\)</span> son dummies individuales</p>
<p>Luego obtenemos</p>
<p><span class="math display">\[\tilde{D}_{it}=D_{it}-\hat{D}_{it}\]</span> Y entonces el estimador de TWFE puede escribirse como el coeficiente de una regresión bivariada:</p>
<p><span class="math display">\[\hat{\beta}_{DD}=\frac{\hat{C}(y_{it}, \tilde{D}_{it})}{\hat{V}^D}\]</span> <span class="math inline">\(\hat{V}^D\)</span> es la varianza de la variable de tratamiento <em>purgada</em> de efectos fijos</p>
</section>
<section id="qué-hace-el-estimador-de-twfe-5" class="slide level2">
<h2>¿Qué hace el estimador de TWFE?</h2>
<p>Goodman-Bacon (2021) muestra que el estimador de TWFE puede descomponerse como:</p>
<p><span class="math display">\[\hat{\beta}_{DD}=s_{kU}\hat{\beta}_{kU}+s_{lU}\hat{\beta}_{lU}+s_{kl}^k\hat{\beta}_{kl}^k+s_{kl}^l\hat{\beta}_{kl}^l\]</span></p>
</section>
<section id="qué-son-los-pesos" class="slide level2">
<h2>¿Qué son los pesos?</h2>
<p>Goodman-Bacon (2021) muestra que los pesos están dados por:</p>
<ul>
<li><p><span class="math inline">\(s_{kU}=\frac{(n_k+n_U)^2\hat{V}_{kU}^D}{\hat{V}^D}\)</span></p></li>
<li><p><span class="math inline">\(s_{lU}=\frac{(n_l+n_U)^2\hat{V}_{lU}^D}{\hat{V}^D}\)</span></p></li>
<li><p><span class="math inline">\(s_{kl}^k=\frac{[(n_k+n_l)(1-\bar{D}_l)]^2\hat{V}_{kl}^{D,k}}{\hat{V}^D}\)</span></p></li>
<li><p><span class="math inline">\(s_{kl}^l=\frac{[(n_k+n_l)\bar{D}_k]^2\hat{V}_{kl}^{D,l}}{\hat{V}^D}\)</span></p></li>
</ul>
</section>
<section id="qué-son-los-pesos-1" class="slide level2">
<h2>¿Qué son los pesos?</h2>
<p>Las varianzas del tratamiento en la submuestra tienen las siguientes formas:</p>
<ul>
<li><p><span class="math inline">\(s_{kU}=\frac{(n_k+n_U)^2\hat{V}_{kU}^D}{\hat{V}^D}=\frac{(n_k+n_U)^2n_{kU}(1-n_{kU})\bar{D}_k(1-\bar{D}_k)}{\hat{V}^D}\)</span></p></li>
<li><p><span class="math inline">\(s_{lU}=\frac{(n_l+n_U)^2\hat{V}_{lU}^D}{\hat{V}^D}=\frac{(n_l+n_U)^2n_{lU}(1-n_{lU})\bar{D}_l(1-\bar{D}_l)}{\hat{V}^D}\)</span></p></li>
<li><p><span class="math inline">\(s_{kl}^k=\frac{[(n_k+n_l)(1-\bar{D}_l)]^2\hat{V}_{kl}^{D,k}}{\hat{V}^D}=\frac{[(n_k+n_l)(1-\bar{D}_l)]^2n_{kl}(1-n_{kl}) \frac{\bar{D}_k-\bar{D}_l}{1-\bar{D}_l}\frac{1-\bar{D}_k}{1-\bar{D}_l}}{\hat{V}^D}\)</span></p></li>
<li><p><span class="math inline">\(s_{kl}^l=\frac{[(n_k+n_l)\bar{D}_k]^2\hat{V}_{kl}^{D,l}}{\hat{V}^D}=\frac{[(n_k+n_l)\bar{D}_k]^2n_{kl}(1-n_{kl})\frac{\bar{D}_l}{\bar{D}_k}\frac{\bar{D}_k-\bar{D}_l}{\bar{D}_k}}{\hat{V}^D}\)</span></p></li>
</ul>
</section>
<section id="qué-son-los-pesos-2" class="slide level2">
<h2>¿Qué son los pesos?</h2>
<p>Pongamos atención a uno de los pesos, <span class="math inline">\(s_{kU}\)</span> para ver la intuición</p>
<p>Vimos que:</p>
<p><span class="math display">\[s_{kU}=\frac{(n_k+n_U)^2\hat{V}_{kU}^D}{\hat{V}^D}=\frac{(n_k+n_U)^2n_{kU}(1-n_{kU})\bar{D}_k(1-\bar{D}_k)}{\hat{V}^D}\]</span></p>
<p>Primero, noten que el peso depende de <span class="math inline">\((n_k+n_u)^2\)</span>, es decir, la parte de la submuestra que se usa para estimar cada comparación <span class="math inline">\(2x2\)</span></p>
</section>
<section id="qué-son-los-pesos-3" class="slide level2">
<h2>¿Qué son los pesos?</h2>
<p>Ahora veamos la varianza que entra en este peso:</p>
<p><span class="math display">\[\hat{V}_{kU}^D=n_{kU}(1-n_{kU})\bar{D}_k(1-\bar{D}_k)\]</span> Una primer cosa que entra en juego es <span class="math inline">\(n_{kU}=\frac{n_k}{n_k+n_U}\)</span>, el peso relativo del grupo tratado temprano en la submuestra</p>
<p>Recordemos que <span class="math inline">\(\bar{D}_k\)</span> indica la fracción del tiempo del panel que <span class="math inline">\(k\)</span> permanece tratado</p>
<p>Dado que <span class="math inline">\(D_{it}\)</span> es binaria, <span class="math inline">\(\bar{D}_k(1-\bar{D}_k)\)</span> es la varianza de <span class="math inline">\(D_{it}\)</span></p>
<p>¿Qué es lo más grande que puede ser <span class="math inline">\(\bar{D}_k(1-\bar{D}_k)\)</span>?</p>
<p>Claramente esto es a lo más 0.5, es decir, la contribución se maximiza cuando el tratamiento ocurre lo más cercano a la mitad del panel</p>
</section>
<section id="qué-son-los-pesos-4" class="slide level2">
<h2>¿Qué son los pesos?</h2>
<p>En resumen, los pesos están dados por</p>
<p><span class="math display">\[pesos = \frac{(\text{participación de la submuestra})^2(\text{varianza del tratamiento purgada de efectos fijos en la submuestra})}{\text{varianza del tratamiento purgada de efectos fijos en la muestra completa}}\]</span></p>
</section>
<section id="qué-nos-dice-la-descomposición" class="slide level2">
<h2>¿Qué nos dice la descomposición?</h2>
<p>Todos los grupos funcionan como <em>controles</em> (algunas veces)</p>
<p>Los pesos en cada comparación <span class="math inline">\(2x2\)</span> dependen del tamaño de la muestra usada para estimarlos y del tiempo que las unidades permanecen tratadas</p>
<p>El efecto estimado se modificaría solo por agregar más años al final del panel</p>
<p>Los términos que dominen pueden incluso cambiar el signo del efecto estimado</p>
<p>Goodman-Bacon (2021) muestra que, en general usar TWFE solo recupera un efecto de tratamiento bajo supuestos muy fuertes, el más crucial, bajo efectos de tratamiento que no varían en el tiempo (no hay efectos dinámicos)</p>
</section></section>
<section>
<section id="estimador-de-callaway-santanna" class="title-slide slide level1 center">
<h1>Estimador de Callaway &amp; Sant’Anna</h1>

</section>
<section id="estimador-de-callaway-santanna-1" class="slide level2">
<h2>Estimador de Callaway &amp; Sant’Anna</h2>
<p>El estimador de Callaway &amp; Sant’Anna (2021) es una forma muy sencilla de explotar la información del desfase del tratamiento</p>
<p>Además permite una presentación muy intuitiva de los efectos de tratamiento</p>
<p>Esencialmente consiste en definir una serie de cohortes de unidades y estimar los impactos para cada cohorte</p>
<p>Luego podemos agregar los impactos por cohorte o presentar la dinámica de los impactos de forma gráfica</p>
</section>
<section id="definiciones" class="slide level2">
<h2>Definiciones</h2>
<ul>
<li><span class="math inline">\(G_i=\min\{t:D_{it}=1\}\)</span> es el primer periodo en que <span class="math inline">\(i\)</span> es tratado</li>
<li><span class="math inline">\(G_i=\infty\)</span> indoca que <span class="math inline">\(i\)</span> nunca es tratado</li>
<li><span class="math inline">\(t=1,\ldots,T\)</span> son los periodos</li>
<li><span class="math inline">\(D_{it}=1\;\forall\;t\geq G_i\)</span> indica tratamiento absorbente</li>
</ul>
<p>Definamos el efecto del tratamiento al periodo <span class="math inline">\(t\)</span> para el cohorte que empezó a ser tratado en <span class="math inline">\(g\)</span>:</p>
<p><span class="math display">\[ATT(g,t)=E(y_{it}(g)-y_{it}(\infty)|G_i=g)\]</span> Por ejemplo, <span class="math inline">\(ATT(2014,2016)\)</span> es el efecto del tratamiento en 2016 para aquellos tratados empezando en 2014</p>
</section>
<section id="supuestos" class="slide level2">
<h2>Supuestos</h2>
<p><strong>Tendencias paralelas en el contexto escalonado</strong></p>
<p><span class="math display">\[E(y_{it}(\infty)-y_{it'}(\infty)|G_i=g)=E(y_{it}(\infty)-y_{it'}(\infty)|G_i=g')\quad\forall\;t\neq t',\; g\neq q'\]</span></p>
<p>Este supuesto indica que en el estado contrafactual de nunca haber sido tratados, dos grupos tratados en dos momentos diferentes <span class="math inline">\(g\)</span> y <span class="math inline">\(g'\)</span> habrían tenido una trayectoria igual entre los periodos <span class="math inline">\(t\)</span> y <span class="math inline">\(t'\)</span></p>
<p><strong>Tendencias paralelas en el contexto escalonado (a)</strong></p>
<p>Modifica el supuesto anterior pero <span class="math inline">\(\forall \;t,t'\geq g_{min}-1\)</span> donde <span class="math inline">\(g_{min}=\min G\)</span> es el primer periodo en donde alguna unidad es tratada (Callaway y Sant’Anna solo usan este supuesto más débil)</p>
</section>
<section id="supuestos-1" class="slide level2">
<h2>Supuestos</h2>
<p><strong>No anticipación en el contexto escalonado</strong></p>
<p><span class="math display">\[y_{it}(g)=y_{it}(\infty)\quad \forall\;i \;\text{y}\;\forall\;t&lt;g\]</span></p>
</section>
<section id="estimador-de-callaway-santanna-2" class="slide level2">
<h2>Estimador de Callaway &amp; Sant’Anna</h2>
<p>El estimador de Callaway &amp; Sant’Anna (2021) se define como:</p>
<p><span class="math display">\[ATT(g,t)=E(y_{it}-y_{i,g-1}|G_i=g)-E(y_{it}-y_{i,g-1}|G_i\in\mathcal{G}_{comp})\]</span> Queremos comparar el valor de la variable de impacto entre el periodo <span class="math inline">\(g-1\)</span> y el <span class="math inline">\(t\)</span> para el grupo que fue tratado en <span class="math inline">\(g\)</span> con algún grupo de comparación denominado <span class="math inline">\(\mathcal{G}_{comp}\)</span></p>
<p>Sustituyendo por el análogo muestral:</p>
<p><span class="math display">\[\hat{ATT}(g,t)=\frac{1}{N_g}\sum_{i:\;G_i=g}(y_{it}-y_{i,g-1})-\frac{1}{N_{\mathcal{G}_{comp}}}\sum_{i\;G_i\in \mathcal{G}_{comp}}(y_{it}-y_{i,g-1})\]</span></p>
<p>¿Qué es <span class="math inline">\(\mathcal{G}_{comp}\)</span>?</p>
<ul>
<li><span class="math inline">\(\mathcal{G}_{comp}=\{\infty \}\)</span>: aquellas unidades nunca tratadas</li>
<li><span class="math inline">\(\mathcal{G}_{comp}=\{g':g'&gt;t \}\)</span>: aquellas unidades aún no tratadas al periodo <span class="math inline">\(t\)</span></li>
</ul>
</section>
<section id="reportar-resultados" class="slide level2">
<h2>Reportar resultados</h2>
<p>Si tenemos pocos periodos y cohortes puede ser práctico reportar todos los <span class="math inline">\(\hat{ATT}(g,t)\)</span></p>
<p>También podemos construir medidas agregadas:</p>
<p><span class="math display">\[\theta = \sum_{g\in\mathcal{G}}\sum_{t=2}^{\mathcal{T}}w(g,t)ATT(g,t)\]</span></p>
</section>
<section id="formas-de-agregación" class="slide level2">
<h2>Formas de agregación</h2>
<p>La notación usada en el artículo es densa pero en resumen, algunas agregaciones posibles son:</p>
<p><strong>Efecto de tratamiento por duración de exposición</strong></p>
<ul>
<li><p>Podemos calcular <span class="math inline">\(\theta(e)\)</span>, el efecto promedio <span class="math inline">\(e\)</span> periodos después del tratamiento, donde <span class="math inline">\(e=t-g\)</span> es el tiempo que ocurre desde que se realizó el tratamiento</p></li>
<li><p>Podemos hacer un gráfico de <span class="math inline">\(\theta(e)\)</span></p></li>
</ul>
<p><strong>Efecto de tratamiento por grupo o cohorte</strong></p>
<ul>
<li>Lo llamamos <span class="math inline">\(\theta(\tilde{g})\)</span> y nos permite conocer si el efecto del tratamiento es distinto para cohortes que fueron tratados temprano o tarde</li>
</ul>
<p><strong>Efecto de tratamiento acumulado</strong></p>
<ul>
<li>Lo llamamos <span class="math inline">\(\theta(\tilde{t})\)</span> y lo definimos como el efecto promedio por participar en el tratamiento hasta una fecha dada <span class="math inline">\(\tilde{t}\)</span></li>
</ul>
</section>
<section id="ventajas-del-estimador" class="slide level2">
<h2>Ventajas del estimador</h2>
<p>Toma en cuenta la heterogeneidad de los efectos de tratamiento</p>
<p>Los pesos son especificados por el investigador y no mecánicamente con en TWFE</p>
<p>Hace explícito el grupo de comparación (nunca tratados o aún no tratados)</p>

<div class="quarto-auto-generated-content">
<div class="footer footer-default">

</div>
</div>
</section></section>
    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="../site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="../site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="../site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="../site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="../site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="../site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="../site_libs/revealjs/plugin/search/search.js"></script>
  <script src="../site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="../site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1600,

        height: 900,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    

    <script>

      // htmlwidgets need to know to resize themselves when slides are shown/hidden.

      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current

      // slide changes (different for each slide format).

      (function () {

        // dispatch for htmlwidgets

        function fireSlideEnter() {

          const event = window.document.createEvent("Event");

          event.initEvent("slideenter", true, true);

          window.document.dispatchEvent(event);

        }

    

        function fireSlideChanged(previousSlide, currentSlide) {

          fireSlideEnter();

    

          // dispatch for shiny

          if (window.jQuery) {

            if (previousSlide) {

              window.jQuery(previousSlide).trigger("hidden");

            }

            if (currentSlide) {

              window.jQuery(currentSlide).trigger("shown");

            }

          }

        }

    

        // hookup for slidy

        if (window.w3c_slidy) {

          window.w3c_slidy.add_observer(function (slide_num) {

            // slide_num starts at position 1

            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);

          });

        }

    

      })();

    </script>

    

    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const onCopySuccess = function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      }
      const getTextToCopy = function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
        text: getTextToCopy
      });
      clipboard.on('success', onCopySuccess);
      if (window.document.getElementById('quarto-embedded-source-code-modal')) {
        // For code content inside modals, clipBoardJS needs to be initialized with a container option
        // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
        const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
          text: getTextToCopy,
          container: window.document.getElementById('quarto-embedded-source-code-modal')
        });
        clipboardModal.on('success', onCopySuccess);
      }
        var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
        var mailtoRegex = new RegExp(/^mailto:/);
          var filterRegex = new RegExp('/' + window.location.host + '/');
        var isInternal = (href) => {
            return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
        }
        // Inspect non-navigation links and adorn them if external
     	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
        for (var i=0; i<links.length; i++) {
          const link = links[i];
          if (!isInternal(link.href)) {
            // undo the damage that might have been done by quarto-nav.js in the case of
            // links that we want to consider external
            if (link.dataset.originalHref !== undefined) {
              link.href = link.dataset.originalHref;
            }
          }
        }
      function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
        const config = {
          allowHTML: true,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start',
        };
        if (contentFn) {
          config.content = contentFn;
        }
        if (onTriggerFn) {
          config.onTrigger = onTriggerFn;
        }
        if (onUntriggerFn) {
          config.onUntrigger = onUntriggerFn;
        }
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note) {
            return note.innerHTML;
          } else {
            return "";
          }
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>